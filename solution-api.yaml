openapi: 3.0.0
info:
  title: Solution API
  description: >-
    The user-centered Solution API makes it possible to build customised energy
    applications.
  version: 2.0.0
  license:
    name: All rights reserved.
    url: https://www.gridx.ai/
  x-api-id: ba9d6a25-ae1a-4ac8-af7a-70b76db17021
  x-audience: company-internal
servers:
  - url: https://api.gridx.de
tags:
  - name: Scan Configuration
    x-displayName: Scan Configuration
  - name: Account
    x-displayName: Account
  - name: Market Prices
    x-displayName: Market Prices
  - name: Token
    x-displayName: Token
  - name: System
    x-displayName: System
  - name: Policy
    x-displayName: Policy
  - name: Document
    x-displayName: Document
  - name: Group
    x-displayName: Group
  - name: User
    x-displayName: User
  - name: Notification
    x-displayName: Notification
  - name: Plan
    x-displayName: Plan
  - name: RFIDTag
    x-displayName: RFIDTag
  - name: Platform
    x-displayName: Platform
  - name: Energy Tariff
    x-displayName: Energy Tariff
  - name: Asset
    x-displayName: Asset
  - name: Clusters
    x-displayName: Clusters
  - name: Customer
    x-displayName: Customer
  - name: Import Power Limit
    x-displayName: Import Power Limit
  - name: Appliance
    x-displayName: Appliance
  - name: EV Charging Schedule
    x-displayName: EV Charging Schedule
  - name: EV Configuration
    x-displayName: EV Configuration
  - name: EV Profile
    x-displayName: EV Profile
  - name: Battery Control Command
    x-displayName: Battery Control Command
  - name: Capacity Tariff
    x-displayName: Capacity Tariff
  - name: Gateway
    x-displayName: Gateway
  - name: Scan
    x-displayName: Scan
  - name: Job
    x-displayName: Job
  - name: TariffV2
    x-displayName: TariffV2
  - name: TimeOfUse
    x-displayName: TimeOfUse
  - name: GridSignals
    x-displayName: GridSignals
  - name: Power Limit Schedule
    x-displayName: Power Limit Schedule
  - name: EMS
    x-displayName: EMS
  - name: Cluster
    x-displayName: Cluster
  - name: Product Functionality
    x-displayName: Product Functionality
  - name: Product Option
    x-displayName: Product Option
  - name: Devices
    x-displayName: Devices
  - name: Power Sequence
    x-displayName: Power Sequence
  - name: Star
    x-displayName: Star
paths:
  /accounts/{accountID}/scanconfiguration:
    get:
      summary: Retrieve Scan Configuration
      tags:
        - Scan Configuration
      security:
        - BearerAuth:
            - ScanConfigurationRead
      parameters:
        - $ref: '#/components/parameters/accountID'
      responses:
        '200':
          $ref: '#/components/responses/GetScanConfigResponse'
        '404':
          $ref: '#/components/responses/ScanConfigurationNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create a Scan Configuration
      tags:
        - Scan Configuration
      security:
        - BearerAuth:
            - ScanConfigurationWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
      requestBody:
        $ref: '#/components/requestBodies/CreateScanConfigRequestBody'
      responses:
        '201':
          $ref: '#/components/responses/CreateScanConfigResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update a Scan Configuration
      tags:
        - Scan Configuration
      security:
        - BearerAuth:
            - ScanConfigurationWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
      requestBody:
        $ref: '#/components/requestBodies/UpdateScanConfigRequestBody'
      responses:
        '200':
          $ref: '#/components/responses/UpdateScanConfigResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete a Scan Configuration
      tags:
        - Scan Configuration
      security:
        - BearerAuth:
            - ScanConfigurationWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
      responses:
        '204':
          description: Scan configuration deleted successfully.
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /account:
    get:
      summary: Retrieve the authenticated Account
      description: Get the account that is currently logged in.
      tags:
        - Account
      security:
        - BearerAuth:
            - AccountRead
      responses:
        '200':
          $ref: '#/components/responses/GetAccountResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/AccountNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update the authenticated Account
      description: Update the user data of the authenticated account.
      tags:
        - Account
      security:
        - BearerAuth:
            - AccountWrite
      requestBody:
        $ref: '#/components/requestBodies/AccountUpdateRequestBody'
      responses:
        '200':
          $ref: '#/components/responses/UpdateAccountResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/AccountNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /account/market-prices/{platform}:
    get:
      summary: Retrieve energy market prices for the authenticated account
      deprecated: true
      description: >
        List energy market prices for the given interval. Prices are fetched
        from an external energy market

        platform.

        For the given interval, the hourly prices of the second to last day and
        for the last day are returned in a 60M resolution.

        For all the other days in the interval, the average daily price is
        returned.

        For example, in order to get hourly prices for the current day and the
        day before, set the **end** of the interval to the current day.


        **Deprecated** - Use `/systems/{systemID}/tariff/prices` instead.
      tags:
        - Market Prices
      security:
        - BearerAuth:
            - MarketPricesRead
      parameters:
        - in: path
          name: platform
          required: true
          schema:
            type: string
          example: entso-e
          description: >
            Specifies an external platform to receive the energy market prices
            from (currently only one supported).

            - "entso-e": Fetch prices from ENTSO-E Transparency Platform.
        - in: query
          name: domain
          required: false
          schema:
            type: string
          description: >
            Specifies an Area-Code which is currently in use of the European
            markets.


            If set, the default bidding zone set in the account is ignored.

            More details about the bidding zones, can be found
            [here](https://transparency.entsoe.eu/content/static_content/Static%20content/web%20api/Guide.html#_areas).
          example: 10Y1001A1001A82H
        - in: query
          name: interval
          description: Requested time interval for fetching prices in UTC.
          required: true
          example: 2020-09-21T00:00:00Z/2022-09-23T00:00:00Z
          schema:
            type: string
            format: datetime
        - in: query
          name: timezone
          description: >-
            Timezone in which all related times should be loaded before being
            returned.
          required: true
          schema:
            type: string
          example: Europe/Berlin
      responses:
        '200':
          $ref: '#/components/responses/GetEnergyMarketPricesResponse'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/AccountNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
        '502':
          $ref: '#/components/responses/BadGatewayExceptionResponse'
  /account/tokens:
    get:
      summary: Get API tokens
      description: >-
        Retrieve all the organizational API tokens for the currently
        authenticated account.
      tags:
        - Token
      security:
        - BearerAuth:
            - GetAPITokens
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/sort'
      responses:
        '200':
          description: All the organizational API tokens of the current account.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/OrganizationalAPIToken'
        '403':
          description: Forbidden (missing authorization)
        '404':
          description: API token not found.
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create an organizational API token
      tags:
        - Token
      security:
        - BearerAuth:
            - APITokenWrite
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrganizationalAPITokenCreationStrict'
      responses:
        '201':
          description: Organizational API token created.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/OrganizationalAPITokenWithSecret'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          description: Forbidden (missing authorization)
        '500':
          description: Internal Server Error
  /account/tokens/{tokenID}:
    get:
      summary: Get an organizational API token
      description: >-
        Retrieve the given organizational API token for the currently
        authenticated account.
      parameters:
        - name: tokenID
          in: path
          description: Identifier of the token.
          required: true
          schema:
            type: string
            format: uuid
          example: 218e8795-2442-42d7-901b-1588373e527f
      tags:
        - Token
      security:
        - BearerAuth:
            - GetAPIToken
      responses:
        '200':
          description: API token
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/OrganizationalAPIToken'
        '403':
          description: Forbidden (missing authorization)
        '404':
          description: API token not found
        '500':
          description: Internal Server Error
    patch:
      summary: Partially update an organizational API token
      description: >-
        Partially update the organizational API token of the currently
        authenticated account.
      tags:
        - Token
      security:
        - BearerAuth:
            - UpdateAPIToken
      parameters:
        - name: tokenID
          in: path
          description: Identifier of the token to be updated.
          required: true
          schema:
            type: string
            format: uuid
          example: 218e8795-2442-42d7-901b-1588373e527f
      requestBody:
        description: The new API token
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/OrganizationalAPITokenStrict'
      responses:
        '200':
          description: >-
            The full representation of the token after the partial update on
            success.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/OrganizationalAPIToken'
        '403':
          description: Forbidden (missing authorization)
        '404':
          description: API token not found
        '500':
          description: Internal Server Error
    delete:
      summary: Delete organizational API token
      description: >-
        Remove a given organizational API token from the currently authenticated
        account.
      tags:
        - Token
      parameters:
        - name: tokenID
          in: path
          description: Identifier of the token.
          required: true
          schema:
            type: string
            format: uuid
          example: 218e8795-2442-42d7-901b-1588373e527f
      security:
        - BearerAuth:
            - DeleteAPIToken
      responses:
        '204':
          description: API token deleted successfully
        '403':
          description: Forbidden (missing authorization)
        '404':
          description: API token not found
        '500':
          description: Internal Server Error
  /account/tokens/{tokenID}/rotate:
    post:
      summary: Rotate an existing organizational API token
      description: >
        Rotates a non-expired organizational API token for the given token ID.

        The current expiry date is extended by the value specified in the
        `lifetime` parameter (if specified).

        The token's permissions remain unchanged.
      parameters:
        - name: tokenID
          in: path
          description: Identifier of the token.
          required: true
          schema:
            type: string
            format: uuid
          example: 218e8795-2442-42d7-901b-1588373e527f
        - name: lifetime
          description: Life time to add to the current expiry date.
          required: false
          in: query
          example: 1D
          schema:
            type: string
            enum:
              - 1D
              - 1W
              - 1M
              - 1Y
      tags:
        - Token
      security:
        - BearerAuth:
            - RotateAPIToken
      responses:
        '201':
          description: New API token
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/OrganizationalAPITokenWithSecret'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          description: API token not found
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts:
    get:
      summary: List all Accounts
      description: List accounts that are accessible to the authenticated user.
      tags:
        - Account
      security:
        - BearerAuth:
            - AccountsRead
      parameters:
        - $ref: '#/components/parameters/kind'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/page'
      responses:
        '200':
          $ref: '#/components/responses/GetAccountsResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create an Account
      description: >-
        Create a new account for the authenticated user. The child account will
        inherit the authenticated accounts information.
      tags:
        - Account
      security:
        - BearerAuth:
            - AccountsWrite
      requestBody:
        $ref: '#/components/requestBodies/AccountCreateRequestBody'
      responses:
        '201':
          $ref: '#/components/responses/CreateAccountResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}:
    get:
      summary: Retrieve an Account
      description: Get an Account by its ID. Make sure you have the necessary permissions.
      tags:
        - Account
      security:
        - BearerAuth:
            - AccountsRead
      parameters:
        - $ref: '#/components/parameters/accountID'
      responses:
        '200':
          $ref: '#/components/responses/GetAccountResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/AccountNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update an Account
      description: >-
        Update an Account's information. Make sure you have the necessary
        permissions.
      tags:
        - Account
      security:
        - BearerAuth:
            - AccountsWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
      requestBody:
        $ref: '#/components/requestBodies/AccountUpdateRequestBody'
      responses:
        '200':
          $ref: '#/components/responses/UpdateAccountResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/AccountNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete an Account
      tags:
        - Account
      security:
        - BearerAuth:
            - AccountsWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
      responses:
        '204':
          description: Account deleted successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/parent:
    patch:
      summary: Move account to different parent.
      description: >
        Moves a b2b account (and all its resources) into a target b2b account
        that is accessible to the authenticated user.  

        A b2b account is an account with `kind="b2b"`
      tags:
        - Account
      security:
        - BearerAuth:
            - MoveAccountsWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
      requestBody:
        $ref: '#/components/requestBodies/MoveAccountRequestBody'
      responses:
        '200':
          $ref: '#/components/responses/MoveAccountResponse'
        '400':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/accounts:
    get:
      summary: List all nested Accounts
      description: >-
        List all child accounts of the given account that are accessible to the
        authenticated user.
      tags:
        - Account
      security:
        - BearerAuth:
            - NestedAccountsRead
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/kind'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/page'
      responses:
        '200':
          $ref: '#/components/responses/GetAccountsResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/systems:
    get:
      summary: List Account's Systems
      tags:
        - System
      security:
        - BearerAuth:
            - SystemsRead
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/embed'
      responses:
        '200':
          $ref: '#/components/responses/GetSystemsResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Assign a System to an Account
      tags:
        - System
      security:
        - BearerAuth:
            - AccountsWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
      requestBody:
        $ref: '#/components/requestBodies/AssignSystemToAccount'
      responses:
        '200':
          $ref: '#/components/responses/AssignSystemToAccountResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/AccountNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Unassign a System from an Account
      tags:
        - System
      security:
        - BearerAuth:
            - AccountsWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
      requestBody:
        $ref: '#/components/requestBodies/UnassignSystemToAccount'
      responses:
        '200':
          $ref: '#/components/responses/UnassignSystemToAccountResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/AccountNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/policies:
    post:
      summary: Assign a Policy Document to an Account
      tags:
        - Policy
      security:
        - BearerAuth:
            - AccountsWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
      requestBody:
        $ref: '#/components/requestBodies/AssignPolicyDocumentToAccountRequestBody'
      responses:
        '204':
          description: Policy document assigned to account successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/documents:
    get:
      summary: Get Account Documents
      description: Lists files with keys that have a specific prefix
      tags:
        - Document
      security:
        - BearerAuth:
            - DocumentsRead
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/prefix'
      responses:
        '200':
          $ref: '#/components/responses/GetAccountDocumentsResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/documents/{documentKey}:
    get:
      summary: Get Account Document
      description: Gets a file and downloads a file
      tags:
        - Document
      security:
        - BearerAuth:
            - DocumentsRead
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/documentKey'
      responses:
        '200':
          $ref: '#/components/responses/GetAccountDocumentResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create Account Document
      description: Creates a new file in the s3 bucket
      tags:
        - Document
      security:
        - BearerAuth:
            - DocumentsWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/documentKey'
      requestBody:
        content:
          multipart/form-data:
            schema:
              type: object
              properties:
                file:
                  type: string
                  format: binary
              additionalProperties: false
      responses:
        '201':
          $ref: '#/components/responses/CreateAccountDocumentResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete Account Document
      description: Delete deletes a file using a given key
      tags:
        - Document
      security:
        - BearerAuth:
            - DocumentsWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/documentKey'
      responses:
        '204':
          description: Account document deleted successfully.
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/groups:
    get:
      summary: List all Groups
      tags:
        - Group
      security:
        - BearerAuth:
            - GroupsRead
      parameters:
        - $ref: '#/components/parameters/accountID'
      responses:
        '200':
          $ref: '#/components/responses/GetGroupsByAccountResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create a Group
      tags:
        - Group
      security:
        - BearerAuth:
            - GroupsWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
      requestBody:
        $ref: '#/components/requestBodies/CreatePolicyGroupRequestBody'
      responses:
        '200':
          $ref: '#/components/responses/CreatePolicyGroupResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/groups/{groupID}:
    get:
      summary: Retrieve a Group
      tags:
        - Group
      security:
        - BearerAuth:
            - GroupsRead
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/groupID'
      responses:
        '200':
          $ref: '#/components/responses/GetPolicyGroupResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      tags:
        - Group
      summary: Update a Group
      security:
        - BearerAuth:
            - GroupsWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/groupID'
      requestBody:
        description: Policy Group
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PolicyGroupUpdateStrict'
      responses:
        '200':
          $ref: '#/components/responses/UpdatePolicyGroupResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      tags:
        - Group
      summary: Delete a Group
      security:
        - BearerAuth:
            - GroupsWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/groupID'
      responses:
        '204':
          description: Policy group deleted successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/groups/{groupID}/policies:
    get:
      summary: Get Policy Documents in a Group
      tags:
        - Group
      security:
        - BearerAuth:
            - GroupsRead
            - PoliciesRead
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/groupID'
      responses:
        '200':
          $ref: '#/components/responses/GetPolicyDocumentsInGroup'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/users/{userID}:
    delete:
      summary: Delete User
      description: Delete a user given its ID.
      tags:
        - User
      security:
        - BearerAuth:
            - AccountsUsersWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/userID'
        - $ref: '#/components/parameters/deleteAuth0'
      responses:
        '204':
          description: User deleted.
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/users/{userID}/notifications:
    get:
      summary: List all Notifications
      description: |
        Lists all notification for a user.

        User ID may be explicitly specified as a path parameter,
        otherwise the authenticated user will be used.
      tags:
        - Notification
      security:
        - BearerAuth:
            - AccountsUsersRead
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/userID'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/page'
        - name: unread
          description: List only unread notifications.
          in: query
          schema:
            type: boolean
      responses:
        '200':
          $ref: '#/components/responses/GetNotificationsResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create User Notifications
      description: |
        Creates a notification for a user.

        User ID may be explicitly specified as a path parameter,
        otherwise the authenticated user will be used.
      tags:
        - Notification
      security:
        - BearerAuth:
            - AccountsUsersWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/userID'
      requestBody:
        $ref: '#/components/requestBodies/CreateUserNotificationsRequestBody'
      responses:
        '201':
          $ref: '#/components/responses/CreateUserNotificationsResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/users/{userID}/notifications/{notificationID}:
    get:
      summary: Retrieve a Notification
      description: |
        Returns a notification by its ID.
      tags:
        - Notification
      security:
        - BearerAuth:
            - AccountsUsersRead
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/userID'
        - $ref: '#/components/parameters/notificationID'
      responses:
        '200':
          $ref: '#/components/responses/GetNotificationResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    put:
      summary: Update Notification
      description: |
        Updates an existing notification.
      tags:
        - Notification
      security:
        - BearerAuth:
            - AccountsUsersWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/userID'
        - $ref: '#/components/parameters/notificationID'
      requestBody:
        $ref: '#/components/requestBodies/UpdateUserNotificationsRequestBody'
      responses:
        '200':
          $ref: '#/components/responses/GetNotificationResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/NotificationNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete Notification
      description: |
        Deletes an existing notification.
      tags:
        - Notification
      security:
        - BearerAuth:
            - AccountsUsersWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/userID'
        - $ref: '#/components/parameters/notificationID'
      responses:
        '204':
          description: Notification deleted successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/users/{userID}/notifications/rules:
    get:
      summary: List all Rules
      description: >
        Lists all rules for the user.


        The user and account may be specified explicitly via path parameters or
        implicitly via the authentication context. Explicitly specified values
        take precedence.
      tags:
        - Notification
      security:
        - BearerAuth:
            - AccountsUsersRead
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/userID'
      responses:
        '200':
          $ref: '#/components/responses/GetNotificationRulesResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create a Rule
      description: >
        Creates a new rule.


        The user and account may be specified explicitly via path parameters or
        implicitly via the authentication context. Explicitly specified values
        take precedence.
      tags:
        - Notification
      security:
        - BearerAuth:
            - AccountsUsersWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/userID'
      requestBody:
        $ref: '#/components/requestBodies/CreateNotificationRuleRequestBody'
      responses:
        '201':
          $ref: '#/components/responses/GetNotificationRuleResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/users/{userID}/notifications/rules/{ruleID}:
    get:
      summary: Retrieve a Rule
      description: >
        Returns a rule specified by its ID.


        The user and account may be specified explicitly via path parameters or
        implicitly via the authentication context. Explicitly specified values
        take precedence.
      tags:
        - Notification
      security:
        - BearerAuth:
            - AccountsUsersRead
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/userID'
        - $ref: '#/components/parameters/ruleID'
      responses:
        '200':
          $ref: '#/components/responses/GetNotificationRuleResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    put:
      summary: Update a Rule
      description: >
        Updates a rule specified by its ID.


        The user and account may be specified explicitly via path parameters or
        implicitly via the authentication context. Explicitly specified values
        take precedence.
      tags:
        - Notification
      security:
        - BearerAuth:
            - AccountsUsersWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/userID'
        - $ref: '#/components/parameters/ruleID'
      requestBody:
        $ref: '#/components/requestBodies/UpdateNotificationRuleRequestBody'
      responses:
        '204':
          description: Notification rule updated successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete a Rule
      description: >
        Deletes a rule specified by its ID.


        The user and account may be specified explicitly via path parameters or
        implicitly via the authentication context. Explicitly specified values
        take precedence.
      tags:
        - Notification
      security:
        - BearerAuth:
            - AccountsUsersWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/userID'
        - $ref: '#/components/parameters/ruleID'
      responses:
        '204':
          description: Notification rule deleted successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/plans:
    get:
      summary: List Charge Plans
      description: |
        Lists all available charge plans.
      tags:
        - Plan
      security:
        - BearerAuth:
            - PlansRead
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/page'
      responses:
        '200':
          $ref: '#/components/responses/GetChargePlansResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/plans/{planID}:
    post:
      summary: Assign Charge Plan.
      description: |
        Assign charge plan to account.
      tags:
        - Plan
      security:
        - BearerAuth:
            - PlansWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/planID'
      responses:
        '200':
          $ref: '#/components/responses/AssignChargePlanResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Unassign Charge Plan.
      description: |
        Unassign charge plan from account.
      tags:
        - Plan
      security:
        - BearerAuth:
            - PlansWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/planID'
      responses:
        '204':
          description: Charge plan unassigned.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/rfidtags/{tagID}:
    get:
      summary: Get RFID Tag
      description: |
        Gets RFID tag for account.
      tags:
        - RFIDTag
      security:
        - BearerAuth:
            - RFIDTagsRead
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/tagID'
      responses:
        '200':
          $ref: '#/components/responses/GetRFIDTagResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update RFID Tag
      description: |
        Updates RFID tag for account.
      tags:
        - RFIDTag
        - Account
      security:
        - BearerAuth:
            - RFIDTagsWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/tagID'
      requestBody:
        $ref: '#/components/requestBodies/UpdateRFIDTagRequestBody'
      responses:
        '200':
          $ref: '#/components/responses/UpdateRFIDTagResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete RFID Tag
      description: |
        Deletes RFID tag for account.
      tags:
        - RFIDTag
      security:
        - BearerAuth:
            - RFIDTagsWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/tagID'
      responses:
        '204':
          description: RFID tag deleted successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/rfidtags/{tagID}/appliances:
    get:
      summary: List Appliances by RFID Tag
      description: |
        Lists all appliances by RFID tag for account.
      tags:
        - RFIDTag
      security:
        - BearerAuth:
            - RFIDTagsRead
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/tagID'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/page'
      responses:
        '200':
          $ref: '#/components/responses/ListAppliancesByRFIDTagsResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/rfidtags/{tagID}/appliances/{applianceID}:
    put:
      summary: Assign Tag to Appliances
      description: |
        Assigns a tag to an appliance.
      tags:
        - RFIDTag
      security:
        - BearerAuth:
            - RFIDTagsWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/tagID'
        - $ref: '#/components/parameters/applianceID'
      responses:
        '204':
          description: Tag assigned to appliance successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Unassign Tag from Appliances
      description: |
        Unassigns a tag from an appliance.
      tags:
        - RFIDTag
      security:
        - BearerAuth:
            - RFIDTagsWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/tagID'
        - $ref: '#/components/parameters/applianceID'
      responses:
        '204':
          description: Tag unassigned from appliance successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/parents:
    get:
      summary: List all parent accounts
      description: |
        Lists all parent accounts starting at the passed account until root.
      tags:
        - Account
      parameters:
        - $ref: '#/components/parameters/accountID'
      responses:
        '200':
          $ref: '#/components/responses/GetAccountParentsResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
      security: []
  /accounts/{accountID}/platform-mapping:
    get:
      summary: Get Platform Mapping
      description: Get the platform-related information of the given accountID.
      tags:
        - Platform
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/accountID'
      responses:
        '200':
          description: Platform Mapping
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/PlatformMapping'
        '204':
          description: No platform-related information found for the given accountID
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/AccountNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/bidding-zone:
    get:
      summary: Get bidding zone
      description: |
        Get the electricity market bidding zone of the given accountID.
      tags:
        - Account
      security:
        - BearerAuth:
            - AccountRead
      parameters:
        - $ref: '#/components/parameters/accountID'
      responses:
        '200':
          description: Bidding zone of the account.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/BiddingZone'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    put:
      summary: Set bidding zone
      description: |
        Set the electricity market bidding zone of the given accountID.
      tags:
        - Account
      security:
        - BearerAuth:
            - AccountWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
      requestBody:
        required: true
        content:
          application/vnd.gridx.v2+json:
            schema:
              $ref: '#/components/schemas/BiddingZoneSetStrict'
      responses:
        '200':
          description: Bidding zone of the account.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/BiddingZone'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /account/tariffs:
    get:
      summary: List Energy Tariffs
      deprecated: true
      description: |
        List all available energy tariffs of the account.

        **Deprecated** - Use TariffV2 instead.
      tags:
        - Energy Tariff
      security:
        - BearerAuth:
            - AccountTariffRead
      responses:
        '200':
          description: All available energy tariffs.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  allOf:
                    - $ref: '#/components/schemas/EnergyTariff'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create Energy Tariff
      deprecated: true
      description: |
        Create an energy tariff for the account.

        **Deprecated** - Use TariffV2 instead.
      tags:
        - Energy Tariff
      security:
        - BearerAuth:
            - AccountTariffWrite
      requestBody:
        description: Energy tariff to be created for the account.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EnergyTariffStrict'
      responses:
        '201':
          description: The created tariff.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/EnergyTariff'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /account/tariffs/{tariffID}:
    get:
      summary: Get Energy Tariff
      deprecated: true
      description: |
        Get the specified energy tariff of the account.

        **Deprecated** - Use TariffV2 instead.
      parameters:
        - $ref: '#/components/parameters/tariffID'
      tags:
        - Energy Tariff
      security:
        - BearerAuth:
            - AccountTariffRead
      responses:
        '200':
          description: The specified energy tariff.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/EnergyTariff'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/TariffNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update Energy Tariff
      deprecated: true
      description: |
        Update the specified energy tariff of the account.

        **Deprecated** - Use TariffV2 instead.
      parameters:
        - $ref: '#/components/parameters/tariffID'
      tags:
        - Energy Tariff
      security:
        - BearerAuth:
            - AccountTariffWrite
      responses:
        '200':
          description: The updated energy tariff.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/EnergyTariff'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/TariffNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete Energy Tariff
      deprecated: true
      description: |
        Delete the specified energy tariff of the account.

        **Deprecated** - Use TariffV2 instead.
      parameters:
        - $ref: '#/components/parameters/tariffID'
      tags:
        - Energy Tariff
      security:
        - BearerAuth:
            - AccountTariffWrite
      responses:
        '204':
          description: Tariff has been deleted successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/TariffNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /beta/systems:
    get:
      summary: Proxy of the AMT endpoint.
      description: >
        This endpoint proxies the AMT endpoint.

        The request and response are the same, the only difference is the
        endpoint.

        See
        [links](https://backstage.sre.gridx.de/catalog/default/api/system-api/definition#/System/get_applications__application_id__systems)
      tags:
        - Asset
      responses:
        '200':
          description: Success
  /clusters:
    get:
      security:
        - BearerAuth:
            - ClustersRead
      summary: Allows to retrieve the list of all available clusters.
      tags:
        - Clusters
      responses:
        '200':
          description: OK
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Cluster'
        '500':
          description: Internal error
    post:
      security:
        - BearerAuth:
            - ClustersWrite
      summary: Create a new cluster.
      tags:
        - Clusters
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClusterSetStrict'
        required: true
      responses:
        '201':
          description: Created resource
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Cluster'
        '500':
          description: Internal error
  /clusters/{clusterID}:
    get:
      security:
        - BearerAuth:
            - ClustersRead
      summary: Allows to retrieve a cluster.
      tags:
        - Clusters
      parameters:
        - $ref: '#/components/parameters/clusterID'
      responses:
        '200':
          description: OK
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Cluster'
        '500':
          description: Internal error
    patch:
      security:
        - BearerAuth:
            - ClustersWrite
      summary: Partially update a cluster.
      tags:
        - Clusters
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AbstractClusterStrict'
        required: true
      parameters:
        - $ref: '#/components/parameters/clusterID'
      responses:
        '200':
          description: OK
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Cluster'
        '500':
          description: Internal error
    put:
      security:
        - BearerAuth:
            - ClustersWrite
      summary: Replace an existing cluster.
      tags:
        - Clusters
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ClusterSetStrict'
        required: true
      parameters:
        - $ref: '#/components/parameters/clusterID'
      responses:
        '200':
          description: OK
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Cluster'
        '500':
          description: Internal error
    delete:
      security:
        - BearerAuth:
            - ClustersWrite
      summary: Delete an existing cluster.
      tags:
        - Clusters
      parameters:
        - $ref: '#/components/parameters/clusterID'
      responses:
        '204':
          description: No content
        '500':
          description: Internal error
  /clusters/{clusterID}/members/{memberID}:
    post:
      security:
        - BearerAuth:
            - ClustersWrite
      summary: Assign a member to an existing cluster.
      description: >
        Assign a member to an existing cluster. 

        A cluster member can be either an appliance or another cluster (nested
        cluster).
      tags:
        - Clusters
      parameters:
        - $ref: '#/components/parameters/clusterID'
        - $ref: '#/components/parameters/memberID'
      responses:
        '204':
          description: No content
        '500':
          description: Internal error
    delete:
      security:
        - BearerAuth:
            - ClustersWrite
      summary: Unassign a member to an existing cluster.
      tags:
        - Clusters
      parameters:
        - $ref: '#/components/parameters/clusterID'
        - $ref: '#/components/parameters/memberID'
      responses:
        '204':
          description: No content
        '500':
          description: Internal error
  /customers:
    get:
      summary: List all Customers
      tags:
        - Customer
      security:
        - BearerAuth:
            - CustomersRead
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/order'
      responses:
        '200':
          description: Customers returned
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CustomerAccount'
        '401':
          $ref: '#/components/responses/UnauthorizedException'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create Customer
      tags:
        - Customer
      security:
        - BearerAuth:
            - CustomersWrite
      requestBody:
        description: Create customer
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CustomerAccountStrict'
      responses:
        '201':
          description: Customer created
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/CustomerAccount'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /customers/{accountID}:
    get:
      summary: Get Customer
      description: Get a single customer given its account ID.
      tags:
        - Customer
      security:
        - BearerAuth:
            - CustomersRead
      parameters:
        - $ref: '#/components/parameters/accountID'
      responses:
        '200':
          description: Customer returned
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/CustomerAccount'
        '400':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Edit a single customer
      tags:
        - Customer
      security:
        - BearerAuth:
            - CustomersWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
      requestBody:
        $ref: '#/components/requestBodies/CustomerAccountUpdateRequestBody'
      responses:
        '200':
          description: Customers updated
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/CustomerAccount'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete Customer
      description: Delete a customer given its ID.
      tags:
        - Customer
      security:
        - BearerAuth:
            - CustomersWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/deleteAuth0'
      responses:
        '204':
          description: Customer deleted.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /customers/{customerID}/users:
    get:
      summary: List Customer's users
      description: Get a list of all users that belong to this customer.
      tags:
        - Customer
      security:
        - BearerAuth:
            - CustomersUsersRead
      parameters:
        - $ref: '#/components/parameters/customerID'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/order'
      responses:
        '200':
          description: Users returned
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/User'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create User in Customer
      description: Create a new user for the customer.
      parameters:
        - $ref: '#/components/parameters/customerID'
      tags:
        - Customer
      security:
        - BearerAuth:
            - CustomersUsersWrite
      requestBody:
        description: Create user
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserStrict'
      responses:
        '201':
          description: User created.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/User'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /customers/{customerID}/users/{userID}/impersonation:
    post:
      summary: Create Redirect Token
      description: Create a new token for the customer's user.
      tags:
        - Customer
      security:
        - BearerAuth:
            - CustomersUsersImpersonationWrite
      parameters:
        - $ref: '#/components/parameters/customerID'
        - $ref: '#/components/parameters/userID'
      requestBody:
        $ref: '#/components/requestBodies/ImpersonationRequestBody'
      responses:
        '201':
          $ref: '#/components/responses/ImpersonatedResp'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /customers/{accountID}/systems:
    get:
      summary: List Systems of a Account
      description: List Systems that belong to a Account of a Customer
      tags:
        - System
        - Customer
      security:
        - BearerAuth:
            - SystemsRead
      parameters:
        - $ref: '#/components/parameters/accountID'
      responses:
        '200':
          description: List of Systems returned.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/System'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Adds a System to an Account
      description: Adds a new System to an Account of a Customer
      tags:
        - System
        - Customer
      security:
        - BearerAuth:
            - SystemsWrite
      parameters:
        - $ref: '#/components/parameters/accountID'
      requestBody:
        $ref: '#/components/requestBodies/AssignSystemToAccount'
      responses:
        '201':
          description: System added
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Account'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /customers/{accountID}/users/{userID}/logins:
    get:
      summary: List Login Events of a User
      description: returns a list of authentication events of the authenticated user
      tags:
        - Customer
      security:
        - BearerAuth:
            - CustomersUsersRead
      parameters:
        - $ref: '#/components/parameters/userID'
        - $ref: '#/components/parameters/accountID'
      responses:
        '200':
          description: return a list of authentication events
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/AuthEvent'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/gateways/{gatewayID}/import-power-limit:
    get:
      summary: Retrieve gateway's current import power limit.
      tags:
        - Import Power Limit
      security:
        - BearerAuth:
            - SystemsRead
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/gatewayID'
      responses:
        '200':
          $ref: '#/components/responses/GetImportPowerLimitResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/ImportPowerLimitNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    put:
      summary: Set gateway's import power limit.
      tags:
        - Import Power Limit
      security:
        - BearerAuth:
            - SystemsWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/gatewayID'
      requestBody:
        $ref: '#/components/requestBodies/SetImportPowerLimitRequestBody'
      responses:
        '201':
          $ref: '#/components/responses/SetImportPowerLimitResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete gateway's import power limit.
      tags:
        - Import Power Limit
      security:
        - BearerAuth:
            - SystemsWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/gatewayID'
      responses:
        '204':
          description: Import power limit deleted successfully!
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/gateways/{gatewayID}/import-power-limit/historical:
    get:
      summary: Get gateway's historical import power limits.
      tags:
        - Import Power Limit
      security:
        - BearerAuth:
            - SystemsRead
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/gatewayID'
      responses:
        '200':
          $ref: '#/components/responses/HistoricalPowerLimitsResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/HistoricalPowerLimitsNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems:
    get:
      summary: List all Systems
      description: List systems that are accessible to the authenticated user.
      tags:
        - System
      security:
        - BearerAuth:
            - SystemsRead
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/embed'
      responses:
        '200':
          description: >
            An array of systems of up to `per_page` systems.


            Each entry in the array is a separate system. If no system is
            available, the resulting array will be empty.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/SystemWithUsers'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create a System
      description: Creates a System.
      tags:
        - System
      security:
        - BearerAuth:
            - SystemsWrite
      requestBody:
        $ref: '#/components/requestBodies/SystemCreationRequestBody'
      responses:
        '201':
          $ref: '#/components/responses/SystemCreated'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}:
    get:
      summary: Retrieve a System
      description: Retrieves the details of an existing system.
      tags:
        - System
      security:
        - BearerAuth:
            - SystemsRead
      parameters:
        - $ref: '#/components/parameters/systemID'
      responses:
        '200':
          description: Returned system.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/System'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update a System
      description: >
        Updates the specific system by setting the values of the body
        parameters.


        Any parameters not provided will be left unchanged.
      tags:
        - System
      security:
        - BearerAuth:
            - SystemsWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
      requestBody:
        $ref: '#/components/requestBodies/SystemUpdateRequestBody'
      responses:
        '200':
          description: Returned system.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/System'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete a System
      description: >
        Deletes a system.


        **Important**: The system must not have any attached Gateway. Reset any
        attached Gateway first by creating a *reset job*.
      tags:
        - System
      security:
        - BearerAuth:
            - SystemsWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
      responses:
        '204':
          description: System has been deleted successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/GatewayNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /gateways:
    get:
      summary: List all Gateways
      description: List gateways that are accessible to the authenticated user.
      tags:
        - Gateway
      security:
        - BearerAuth:
            - GatewaysRead
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/perPage'
      responses:
        '200':
          description: >
            An array of gateways of up to `per_page` gateways.


            Each entry in the array is a separate gateway. If no gateway is
            available, the resulting array will be empty.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Gateway'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /gateways/{gatewayID}:
    get:
      summary: Retrieve a Gateway
      description: Retrieves the details of an existing gateway.
      tags:
        - Gateway
      security:
        - BearerAuth:
            - GatewaysRead
      parameters:
        - $ref: '#/components/parameters/gatewayID'
      responses:
        '200':
          description: Returned gateway.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/GatewayWithSystem'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/GatewayNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update a Gateway
      description: >
        Updates the specific gateway by setting the values of the body
        parameters.


        Any parameters not provided will be left unchanged.
      tags:
        - Gateway
      security:
        - BearerAuth:
            - GatewaysWrite
      parameters:
        - $ref: '#/components/parameters/gatewayID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/GatewayUpdateStrict'
      responses:
        '200':
          description: Returned gateway.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Gateway'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/GatewayNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete a Gateway
      description: Deletes a Gateway.
      tags:
        - Gateway
      security:
        - BearerAuth:
            - GatewaysWrite
      parameters:
        - $ref: '#/components/parameters/gatewayID'
      responses:
        '204':
          description: Gateway has been deleted successfully.
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/gateways:
    post:
      summary: Create a System's Gateway
      description: Creates a gateway.
      tags:
        - Gateway
      security:
        - BearerAuth:
            - GatewayWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
      requestBody:
        $ref: '#/components/requestBodies/GatewayCreation'
      responses:
        '201':
          description: Created gateway.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Gateway'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '422':
          description: The payload for creating the gateway contains invalid data.
          content:
            application/vnd.gridx.v2+json:
              schema:
                allOf:
                  - $ref: '#/components/schemas/GeneralException'
                  - properties:
                      type:
                        type: string
                        enum:
                          - GENERAL
                          - STARTCODE_NOT_FOUND
                          - STARTCODE_ALREADY_REGISTERED
                    required:
                      - type
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /gateways/{gatewayID}/scans:
    get:
      summary: List Gateway's Scans
      description: >
        List of scans for the given gateway and the given interval.


        If no interval is specified, the entire period is considered and all
        scans are listed.
      tags:
        - Scan
      security:
        - BearerAuth:
            - ScansRead
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/interval'
      responses:
        '200':
          description: |
            An array of scans.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Scan'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /gateways/{gatewayID}/jobs:
    get:
      summary: List Gateway's Jobs
      description: |
        List jobs that belong to the given gateway.
      tags:
        - Job
      security:
        - BearerAuth:
            - JobsRead
      parameters:
        - $ref: '#/components/parameters/gatewayID'
      responses:
        '200':
          description: |
            An array of jobs.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/JobWithExecutions'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/GatewayNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /gateways/{gatewayID}/jobs/{jobIDOrType}:
    get:
      summary: Get a Job
      description: >
        Gets a particular job that belongs to the given gateway. In this case,
        the path parameter should be a job ID.
      tags:
        - Job
      security:
        - BearerAuth:
            - JobsRead
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/jobIDOrType'
      responses:
        '200':
          description: |
            A job.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/JobWithExecutions'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '404':
          $ref: '#/components/responses/JobNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create a job with a given type
      description: >
        Creates a job with the given type for the given gateway, only if a job
        with that type doesn't already exist.

        In this case, the path parameter should be a job type. Please note that
        the job type is case-sensitive.

          * `SCAN`: Once this job is triggered, the gridBox will look for connected appliances and update the list accordingly.

          * `RESET`: This type of job resets gridBox to default and removes it from previously configured system.

          * `RESTART`: Once this job is triggered, the gridBox will restart.

        *Job execution is asynchronous and does not guarantee immediate
        execution.*
      tags:
        - Job
      security:
        - BearerAuth:
            - JobsWrite
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/jobIDOrType'
      responses:
        '201':
          description: |
            A job.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/JobCreation'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Cancel a particular job
      description: >
        Cancels a particular job from the given gateway. In this case, the path
        parameter should be a job ID.
      tags:
        - Job
      security:
        - BearerAuth:
            - JobsWrite
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/jobIDOrType'
      responses:
        '200':
          description: |
            A job.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/JobWithExecutions'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '404':
          $ref: '#/components/responses/JobNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /gateways/{gatewayID}/appliances:
    get:
      summary: List Gateway's Appliances
      description: >
        Lists appliances that belong to the given gateway.


        Children appliances, e.g. those of hybrid inverters, are not included by
        default.

        To include them, `listAll` parameter must be set to `true`.
      tags:
        - Appliance
      security:
        - BearerAuth:
            - AppliancesRead
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/listAll'
      responses:
        '200':
          description: >
            An array of appliances of up to `per_page` appliances.


            Each entry in the array is a separate appliance. If no appliance is
            available, the resulting array will be empty.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Appliance'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/GatewayNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create an Appliance
      description: >
        This endpoint can be used by third parties to create external appliances
        that are not managed by the gridBox itself.
      tags:
        - Appliance
      security:
        - BearerAuth:
            - AppliancesWrite
      parameters:
        - $ref: '#/components/parameters/gatewayID'
      requestBody:
        $ref: '#/components/requestBodies/ApplianceCreateRequestBody'
      responses:
        '201':
          description: The appliance has been created successfully.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Appliance'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/GatewayNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /gateways/{gatewayID}/appliances/{applianceID}:
    get:
      summary: Retrieve an Appliance
      description: Retrieves the details of an existing appliance.
      tags:
        - Appliance
      security:
        - BearerAuth:
            - AppliancesRead
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/applianceID'
      responses:
        '200':
          description: Returned Appliance.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Appliance'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update an Appliance
      description: >
        Updates the specific appliance by setting the values of the body
        parameters. 


        Any parameters not provided will be left unchanged.
      tags:
        - Appliance
      security:
        - BearerAuth:
            - AppliancesWrite
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/applianceID'
      requestBody:
        $ref: '#/components/requestBodies/ApplianceUpdateRequestBody'
      responses:
        '200':
          description: Updated appliance.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Appliance'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete an Appliance
      description: Deletes an appliances.
      tags:
        - Appliance
      security:
        - BearerAuth:
            - AppliancesWrite
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/applianceID'
      responses:
        '204':
          description: Appliance has been deleted successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /gateways/{gatewayID}/appliances/{applianceID}/status:
    get:
      summary: Retrieve appliance hardware statuses
      description: >
        Returns appliance hardware statuses for the given interval.


        Only returns multiple statuses when state changes during the given
        interval. If, for example, the state stayed the same for the whole
        interval,

        only one status will be returned.


        Works only for **inverters** currently.
      tags:
        - Appliance
      security:
        - BearerAuth:
            - AppliancesRead
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/applianceID'
        - $ref: '#/components/parameters/interval'
      responses:
        '200':
          description: Returned hardware status.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/HardwareStatusData'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /gateways/{gatewayID}/appliances/{applianceID}/ev/configuration:
    get:
      summary: Retrieve an EV configuration
      description: Returns an EV charging station's configuration.
      tags:
        - EV Configuration
      security:
        - BearerAuth:
            - AppliancesEVConfigurationRead
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/applianceID'
      responses:
        '200':
          description: Returned EV configuration.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/EVChargingStationConfiguration'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create an EV Configuration
      description: >
        Creates an EV charging station's configuration if no configuration is
        present.
      tags:
        - EV Configuration
      security:
        - BearerAuth:
            - AppliancesEVConfigurationWrite
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/applianceID'
      requestBody:
        description: EV configuration to be created.
        required: true
        content:
          application/json:
            schema:
              $ref: >-
                #/components/schemas/EVChargingStationConfigurationCreationStrict
      responses:
        '201':
          description: EV charging station configuration created.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/EVChargingStationConfiguration'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/GatewayNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update an EV configuration
      description: >-
        Updates the specified appliance's EV charging station configuration by
        setting the body parameters.
      tags:
        - EV Configuration
      security:
        - BearerAuth:
            - AppliancesEVConfigurationWrite
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/applianceID'
      requestBody:
        description: Modified EV configuration.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EVChargingStationConfigurationUpdate'
      responses:
        '200':
          description: Updated Charging Station configuration.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/EVChargingStationConfiguration'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete an EV configuration
      description: Deletes an EV charging Station configuration.
      tags:
        - EV Configuration
      security:
        - BearerAuth:
            - AppliancesEVConfigurationWrite
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/applianceID'
      responses:
        '204':
          description: EV configuration has been deleted successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /gateways/{gatewayID}/appliances/{applianceID}/battery/settings:
    get:
      summary: Retrieve Battery Control Settings
      description: Returns battery control Settings
      deprecated: true
      tags:
        - Battery Control Command
      security:
        - BearerAuth:
            - AppliancesBatteryControlSettingsRead
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/applianceID'
      responses:
        '200':
          description: Returned battery control Settings.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/BatteryControlSettings'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create Battery Control Settings
      deprecated: true
      tags:
        - Battery Control Command
      security:
        - BearerAuth:
            - AppliancesBatteryControlSettingsWrite
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/applianceID'
      requestBody:
        description: Battery Control Settings to be created.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BatteryControlSettingsStrict'
      responses:
        '201':
          description: Created battery control settings.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/BatteryControlSettings'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/GatewayNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update Battery Control Settings
      deprecated: true
      description: >-
        Updates the specific appliance's battery control settings by setting the
        values of the body parameter.
      tags:
        - Battery Control Command
      security:
        - BearerAuth:
            - AppliancesBatteryControlSettingsWrite
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/applianceID'
      requestBody:
        description: Modified battery control settings.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/BatteryControlSettingsStrict'
      responses:
        '200':
          description: Updated battery control settings.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/BatteryControlSettings'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete Battery Control Settings
      deprecated: true
      description: Deletes appliance's battery control settings.
      tags:
        - Battery Control Command
      security:
        - BearerAuth:
            - AppliancesBatteryControlSettingsWrite
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/applianceID'
      responses:
        '204':
          description: Battery Control Settings has been deleted successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/ev-profiles:
    get:
      summary: List available EV profiles
      description: Lists EV profiles that belong the the specified system.
      tags:
        - EV Profile
      security:
        - BearerAuth:
            - EVProfilesRead
      parameters:
        - $ref: '#/components/parameters/systemID'
      responses:
        '200':
          description: Available EV profiles.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ElectricVehicleProfile'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/NotFoundErrorResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create a new EV profile
      description: Creates an EV profile.
      tags:
        - EV Profile
      security:
        - BearerAuth:
            - EVProfilesWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
      requestBody:
        description: EV profile to be created.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ElectricVehicleProfileCreate'
      responses:
        '201':
          description: Created EV profile.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/ElectricVehicleProfile'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/NotFoundErrorResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/ev-profiles/{evProfileID}:
    get:
      summary: Retrieve an EV profile
      description: Retrieve an EV profile that belong the the specified system.
      tags:
        - EV Profile
      security:
        - BearerAuth:
            - EVProfilesRead
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/evProfileID'
      responses:
        '200':
          description: EV profile.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/ElectricVehicleProfile'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/NotFoundErrorResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update an EV profile
      description: Update an EV profile that belong the the specified system.
      tags:
        - EV Profile
      security:
        - BearerAuth:
            - EVProfilesWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/evProfileID'
      requestBody:
        description: EV profile to be updated.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ElectricVehicleProfileUpdate'
      responses:
        '200':
          description: Returned updated EV profile.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/ElectricVehicleProfile'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/NotFoundErrorResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete an EV profile
      description: Deletes an EV profile that belongs to the specified system.
      tags:
        - EV Profile
      security:
        - BearerAuth:
            - EVProfilesWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/evProfileID'
      responses:
        '204':
          description: EV profile deleted successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/evcharging-schedules:
    get:
      summary: List a System's EV charging schedules.
      description: >
        Lists EV charging schedules that belong to the specified system.


        It only contains the currently active schedules and schedules to be
        active in the

        next 24 hours.
      tags:
        - EV Charging Schedule
      security:
        - BearerAuth:
            - SchedulesRead
      parameters:
        - $ref: '#/components/parameters/systemID'
      responses:
        '200':
          description: Returned currently active and upcoming EV charging schedules.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  allOf:
                    - $ref: '#/components/schemas/EVChargingSchedule'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create an EV charging schedule
      description: Creates a system's EV charging schedule.
      tags:
        - EV Charging Schedule
      security:
        - BearerAuth:
            - SchedulesWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
      requestBody:
        description: EV charging schedule to be created.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EVChargingScheduleCreationStrict'
      responses:
        '201':
          description: Created EV charging schedule.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/EVChargingSchedule'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/evcharging-schedules/{scheduleID}:
    get:
      summary: Retrieve an EV charging schedule
      description: Retrieves the details of an existing EV charging station schedule.
      tags:
        - EV Charging Schedule
      security:
        - BearerAuth:
            - SchedulesRead
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/scheduleID'
      responses:
        '200':
          description: Returned EV charging schedule
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/EVChargingSchedule'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update an EV charging schedule
      description: >-
        Updates the specified systems EV charging schedule by setting the body
        parameters.
      tags:
        - EV Charging Schedule
      security:
        - BearerAuth:
            - SchedulesWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/scheduleID'
      requestBody:
        description: Modified EV charging schedule.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EVChargingScheduleUpdateStrict'
      responses:
        '200':
          description: Updated EV charging schedule.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/EVChargingSchedule'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete an EV charging schedule
      description: Deletes an EV charging schedule.
      tags:
        - EV Charging Schedule
      security:
        - BearerAuth:
            - SchedulesWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/scheduleID'
      responses:
        '204':
          description: EV charging schedule has been deleted successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/power-limit-schedules:
    get:
      summary: List a Systems power limit schedules.
      description: |
        List all power limit schedules of the system.
      tags:
        - Power Limit Schedule
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/perPage'
      responses:
        '200':
          description: Power limit schedules ordered by `from` and `to` in ascending order.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/PowerLimitSchedule'
        '400':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create a power limit schedule
      description: Creates a power limit schedule for this system.
      tags:
        - Power Limit Schedule
      parameters:
        - $ref: '#/components/parameters/systemID'
      requestBody:
        description: Power limit schedule to be created.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PowerLimitScheduleCreateStrict'
            examples:
              dailyRepetition:
                $ref: '#/components/examples/powerLimitScheduleDaily'
              weekends:
                $ref: '#/components/examples/powerLimitScheduleWeekends'
      responses:
        '201':
          description: Created power limit schedule.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/PowerLimitSchedule'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/power-limit-schedules/{scheduleID}:
    get:
      summary: Retrieve a power limit schedule
      description: Retrieves the details of an existing power limit schedule.
      tags:
        - Power Limit Schedule
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/scheduleID'
      responses:
        '200':
          description: Returned power limit schedule.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/PowerLimitSchedule'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update a power limit schedule
      description: Updates the specified power limit schedule.
      tags:
        - Power Limit Schedule
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/scheduleID'
      requestBody:
        description: Partially modified power limit schedule.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/PowerLimitScheduleUpdateStrict'
      responses:
        '200':
          description: Updated power limit schedule.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/PowerLimitSchedule'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete a power limit schedule
      description: Deletes a power limit schedule.
      tags:
        - Power Limit Schedule
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/scheduleID'
      responses:
        '204':
          description: Power limit schedule has been deleted successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/power-limit-schedules-intervals:
    get:
      summary: List applied power limits intervals
      description: >
        Returns a list of scheduled power limit intervals.


        Intervals in the past are fixed and will never change. 

        Intervals in the future can change if the underlying schedule is
        changed.
      tags:
        - Power Limit Schedule
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/interval'
      responses:
        '200':
          description: Applied power limits intervals.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/PowerLimitIntervals'
        '400':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/capacity-tariff:
    get:
      summary: Get the capacity tariff information.
      tags:
        - Capacity Tariff
      security:
        - BearerAuth:
            - CapacityTariffRead
      parameters:
        - $ref: '#/components/parameters/systemID'
      responses:
        '200':
          $ref: '#/components/responses/CapacityTariffResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create the user limit, price and enable or disable the limit.
      tags:
        - Capacity Tariff
      security:
        - BearerAuth:
            - CapacityTariffWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
      requestBody:
        $ref: '#/components/requestBodies/SetUserLimitRequestBody'
      responses:
        '201':
          $ref: '#/components/responses/CapacityTariffResponse'
        '400':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update the user limit, price and enable or disable the limit.
      tags:
        - Capacity Tariff
      security:
        - BearerAuth:
            - CapacityTariffWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
      requestBody:
        $ref: '#/components/requestBodies/SetUserLimitRequestBody'
      responses:
        '200':
          $ref: '#/components/responses/CapacityTariffResponse'
        '400':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Deletes the Capacity Tariff.
      tags:
        - Capacity Tariff
      security:
        - BearerAuth:
            - CapacityTariffWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
      responses:
        '204':
          description: Capacity Tariff has been deleted successfully.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/capacity-tariff/recommendation:
    post:
      summary: Create the recommended capacity tariff limit.
      description: >-
        When updating the recommended limit it is effectively if the userLimit
        is disabled.
      tags:
        - Capacity Tariff
      security:
        - BearerAuth:
            - CapacityTariffRecommendationWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
      requestBody:
        $ref: '#/components/requestBodies/SetRecommendedLimitRequestBody'
      responses:
        '201':
          $ref: '#/components/responses/CapacityTariffResponse'
        '400':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete capacity tariff recommendation
      description: Removes the recommended value from the capacity tariff.
      tags:
        - Capacity Tariff
      security:
        - BearerAuth:
            - CapacityTariffRecommendationWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
      responses:
        '200':
          $ref: '#/components/responses/DeleteCapacityTariffRecommendationResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/capacity-tariff/peak-power:
    post:
      summary: Set the capacity tariff peak-power.
      description: >-
        When setting the peak-power it becomes the new `effectiveLimit` if it is
        higher than the user and recommended limit.
      tags:
        - Capacity Tariff
      security:
        - BearerAuth:
            - CapacityTariffPeakPowerWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
      requestBody:
        $ref: '#/components/requestBodies/SetPeakPowerRequestBody'
      responses:
        '201':
          $ref: '#/components/responses/CapacityTariffResponse'
        '400':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete capacity tariff peak-power
      description: >-
        After deleting the peak-power limit, the new `effectiveLimit` would be
        the user's (if enabled) or the recommended limit.
      tags:
        - Capacity Tariff
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
      responses:
        '200':
          $ref: '#/components/responses/DeletePeakPowerResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/savings/{saving}:
    get:
      summary: Retrieve saving of a system
      description: >
        Retrieves a specific saving of a system obtained through various
        optimizations.


        Which savings are available for a system is specified in the systems
        metadata. Requesting unavailable savings will always return a value of
        0.


        The saving is **cached** and can be refreshed by specifying the
        corresponding URL parameter.
      tags:
        - System
      security:
        - BearerAuth:
            - SystemsRead
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/saving'
        - name: refresh
          description: >
            If specified the saving will be calculated and the cached value
            updated instead of just returning cached value.

            Be aware that calculating savings can take some time.
          in: query
          schema:
            type: boolean
            default: false
          required: false
          example: false
      responses:
        '200':
          description: Saving of specified type for the system.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Saving'
        '400':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/tariff:
    get:
      summary: Retrieve the tariff v2 of a system
      description: |
        Retrieves the tariff v2 of the system. 
      tags:
        - TariffV2
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
      responses:
        '200':
          description: Tariff of the system. Empty if there is none.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/TariffV2'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Set the tariff v2 of a system
      description: >
        Sets the tariff v2 of the system. 


        See the response bodies description which fields have to be set for
        which `feedinType`/`offtakeType`.
      tags:
        - TariffV2
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TariffV2CreationStrict'
      responses:
        '201':
          description: The newly-set tariff v2.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/TariffV2'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '409':
          $ref: '#/components/responses/ConflictExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update the tariff v2 of a system
      description: >
        Updates the tariff v2 of the system.


        See the response bodies description which fields have to be set for
        which `feedinType`/`offtakeType`.
      tags:
        - TariffV2
      security:
        - BearerAuth:
            - TariffWrite
      parameters:
        - $ref: '#/components/parameters/systemID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TariffV2UpdateStrict'
      responses:
        '200':
          description: The updated TariffV2.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/TariffV2'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/tariff/prices:
    get:
      summary: Retrieve the tariff end prices of a system
      description: >
        Retrieves the end-price tariff for the system in the specified
        resolution (15-minute by default if not specified).

        The end-price is the price the customer is billed for (for market data
        tariffs for example after offset, VAT and provider fee are applied).


        Depending on the tariff settings, the tariff data might have been
        directly posted through the API, originate from market data 

        or is extrapolated from static data.


        If the resolution of the underlying data doesn't correspond to the
        requested resolution the data will be up- or down-sampled.

        For example the market prices used by market data tariffs have a 1 hour
        resolution. If you request 15min resolution you will

        get 4 equal periods per hour. If you request daily resolution, the
        average prices of 24 hourly periods will be returned per period.  


        If there are missing price periods over the requested interval (which
        may happen for `EXTERNAL` tariffs), the end-price tariff will start
        after the last period gap, aligned with the requested resolution.

        That is, if the requested interval for a given day is from 00:00 to
        12:00 and no prices were sent from at 02:15 to 03:45, the first period
        returned will be from 03:45 to 04:00 for a 15-min resolution or from
        04:00 to 05:00 for an hourly resolution.


        Once calculated the prices won't change anymore for the requested
        period.

        Even if the tariff is reconfigured the returned price will stay the
        same.

        This is due to the fact that historical prices can not be changed
        anymore. 

        Changes in the tariff will only have an effect in the future.


        The returned currency is determined by the currency of the underlying
        tariff if not specified otherwise.
      tags:
        - TariffV2
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
        - name: interval
          in: query
          description: >
            Requested time interval for fetching end-price tariff in the RFC3339
            format.

            If the available tariff data does not cover the full interval, the
            largest available subset will still be returned.

            If the lower bound of the interval is not a multiple of the
            resolution, it will be truncated.

            If the upper bound of the interval is not a multiple of the
            resolution, it will be rounded up.
          required: true
          example: 2020-09-21T00:00:00Z/2022-09-23T00:00:00Z
          schema:
            type: string
            format: datetime
        - name: resolution
          in: query
          description: |
            Resolution of the end-price tariff periods as ISO8601 duration.
            If not specified it will be a 15-min resolution.

            Possible resolutions are:
            - PT15M - 15 minutes
            - PT1H - 1 hour
            - P1D - 1 day
          required: false
          example: PT1H
          schema:
            type: string
            format: iso8601
        - name: currency
          in: query
          description: >
            Currency in which the end prices should be returned.


            If the underlying data isn't already in the requested currency, the
            prices will be converted.

            This uses exchange rates with a daily resolution.
          example: EUR
          required: false
          schema:
            type: string
      responses:
        '200':
          description: >
            End-price tariff of the system for the interval requested.

            If the system has no tariff and therefore no end prices can be
            calculated the returned periods will be empty.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/EndpriceTariffV2'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Set tariff end prices of a system
      description: >
        Sets the tariff end prices for **external tariffs**.


        The sent price periods have a few restrictions:

        - They must have a 15 minute resolution.

        - They must not have gaps for current and future prices (gaps in the
        past are allowed).


        The prices can be sent in all supported currencies and will be converted
        by the `GET /tariff/prices` endpoint accordingly.


        You don't have to send your prices in all the currencies you want to
        support.

        Internally they always will be converted to Euro, therefore sending the
        same price periods in different currencies will overwrite

        the previously sent price periods. 
      tags:
        - TariffV2
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/EndPriceTariffV2SetStrict'
      responses:
        '201':
          description: |
            Price periods successfully inserted.

            Returns an end-price tariff with all inserted price periods.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/EndpriceTariffV2'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
        '502':
          $ref: '#/components/responses/BadGatewayExceptionResponse'
  /systems/{systemID}/timeofuse/decisions:
    get:
      summary: Get time of use optimization decisions of a system.
      description: >
        Get optimization decisions and associated metrics for a system with
        `system_id`,

        within given time interval. Note that decisions may not always cover the
        complete time interval.

        Only decisions with `start_at` in the past are returned.

        The maximum time interval that can be requested is 48 hours.
      tags:
        - TimeOfUse
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/interval'
      responses:
        '200':
          description: Array of optimization decisions and associated metrics.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Decisions'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
        '502':
          $ref: '#/components/responses/BadGatewayExceptionResponse'
  /systems/{systemID}/timeofuse/settings:
    get:
      summary: Get time of use optimization settings of a system.
      description: Get time of use optimization settings of a system.
      tags:
        - TimeOfUse
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
      responses:
        '200':
          $ref: '#/components/responses/TimeOfUseSettingsResp'
        '204':
          description: No time of use setting information found for the given systemID
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
        '502':
          $ref: '#/components/responses/BadGatewayExceptionResponse'
    put:
      summary: Set time of use optimization settings for a system.
      description: Set time of use optimization settings for a system.
      tags:
        - TimeOfUse
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
      requestBody:
        $ref: '#/components/requestBodies/TimeOfUseSettingsPut'
      responses:
        '200':
          $ref: '#/components/responses/TimeOfUseSettingsResp'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
        '502':
          $ref: '#/components/responses/BadGatewayExceptionResponse'
    patch:
      summary: Update time of use optimization settings for a system.
      description: Update time of use optimization settings for a system.
      tags:
        - TimeOfUse
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
      requestBody:
        $ref: '#/components/requestBodies/TimeOfUseSettingsPatch'
      responses:
        '200':
          $ref: '#/components/responses/TimeOfUseSettingsResp'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
        '502':
          $ref: '#/components/responses/BadGatewayExceptionResponse'
  /systems/{systemID}/timeofuse/forecasts/meter:
    get:
      summary: Get the Time-of-Use forecasts for the grid connection point.
      description: >
        The Time-of-Use (ToU) optimization runs on a given resolution of 15
        minutes.

        For each time segment, i.e. `[10:00, 10:15]` it publishes a series of
        forecasts for

        the grid connection point associated with a system with `systemID`.


        This endpoint requires to specify a time window called `interval` for
        which the forecasts are returned.

        For example `[2021-01-01T02:07:14Z, 2021-01-02T02:07:14Z]`.

        If no interval is provided it is assumed to be `[00:00:00 today,
        00:00:00 in two days]`.

        The maximum size of this interval is 48h.


        This endpoint returns the forecasts **in the selected time window**.

        Please note that the forecasts might not cover the whole time window.

        In this case the largest possible subset is returned.

        If no forecast is available, an empty list is returned.
      tags:
        - TimeOfUse
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/ToUForecastsTimeInterval'
      responses:
        '200':
          description: |
            Successful request. Retrieved forecasts for the given parameters.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/GridConnectionPointForecasts'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
        '502':
          $ref: '#/components/responses/BadGatewayExceptionResponse'
  /systems/{systemID}/timeofuse/forecasts/meter/last-updated:
    get:
      summary: >-
        Get the last updated timestamp for the Time-of-Use forecasts for the
        grid connection point.
      description: >
        The Time-of-Use (ToU) optimization runs on a given resolution of 15
        minutes.

        For each time segment, i.e. `[10:00, 10:15]` it publishes a series of
        forecasts for

        the grid connection point associated with a system with `systemID`.


        This endpoint requires to specify a time window called `interval` for
        which the forecasts are returned.

        For example `[2021-01-01T02:07:14Z, 2021-01-02T02:07:14Z]`.

        If no interval is provided it is assumed to be `[00:00:00 today,
        00:00:00 in two days]`.

        The maximum size of this interval is 48h.


        This endpoint returns the last timestamp RFC3339 format when the
        forecasts **in the selected time window**

        were updated.
      tags:
        - TimeOfUse
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/ToUForecastsTimeInterval'
      responses:
        '200':
          description: >
            Successful request. Retrieved last update time for the given
            parameters.
          content:
            application/json:
              schema:
                type: object
                properties:
                  lastUpdated:
                    type: string
                    format: date-time
                    example: '2020-09-21T00:00:00Z'
                    description: |
                      Last time when the prediction where updated.
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
        '502':
          $ref: '#/components/responses/BadGatewayExceptionResponse'
  /systems/{systemID}/timeofuse/status:
    get:
      summary: Get the historical status of the Time-of-Use service.
      description: >-
        The Time-of-Use (ToU) optimization runs on a given resolution of 15
        minutes.

        For each time segment, i.e. `[10:00, 10:15]` it publishes an operational
        status

        associated with a system with `systemID`.


        This endpoint requires to specify a time window called `interval` for
        which the status data are returned.

        For example `[2021-01-01T02:07:14Z, 2021-01-02T02:07:14Z]`.

        If no interval is provided it is assumed to be `[now - 48h, now]`.

        The maximum size of this interval is 48h.

        Please note that the statuses might not cover the whole time window.
      tags:
        - TimeOfUse
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/ToUForecastsTimeInterval'
      responses:
        '200':
          description: >
            Successful request. Retrieved historical status for given
            parameters.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/StatusHistory'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
        '502':
          $ref: '#/components/responses/BadGatewayExceptionResponse'
  /systems/{systemID}/timeofuse/status/current:
    get:
      summary: Get the last known status of the Time-of-Use service.
      description: >-
        The Time-of-Use (ToU) optimization runs on a given resolution of 15
        minutes.

        For each time segment, i.e. `[10:00, 10:15]` it publishes an operational
        status for

        associated with a system with `systemID`.


        This endpoint provides the last known, or current, status of the
        Time-of-Use runs.
      tags:
        - TimeOfUse
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
      responses:
        '200':
          description: |
            Successful request. Retrieved status for the given parameters.
          content:
            application/json:
              schema:
                type: object
                properties:
                  status:
                    $ref: '#/components/schemas/RunStatus'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
        '502':
          $ref: '#/components/responses/BadGatewayExceptionResponse'
  /systems/{systemID}/timeofuse/readiness:
    get:
      summary: Evaluate whether the system is ready for enabling Time-of-Use.
      description: >-
        A series of operational prerequisites are required before enabling
        Time-of-Use (ToU) for a system.

        The checks are done in order to evaluate the system's "readiness" for
        ToU.

        In principal, checks pertaining to appliances used, price data used, as
        well as some system metadata are performed.
      tags:
        - TimeOfUse
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
      responses:
        '200':
          description: >
            Successful request. Retrieved ToU readiness for the given
            parameters.
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ToUReadiness'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
        '502':
          $ref: '#/components/responses/BadGatewayExceptionResponse'
  /systems/{systemID}/grid-signals:
    get:
      summary: Get system grid signal capabilities.
      description: >
        Gets information about the system's capabilities to deal with grid
        signals. 
      tags:
        - GridSignals
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemGridSignals'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update system grid signal capabilities.
      description: >
        Updates information about the system's capabilities to deal with grid
        signals. 
      tags:
        - GridSignals
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
      requestBody:
        $ref: '#/components/requestBodies/SystemGridSignalsUpdateRequestBody'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemGridSignals'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/ems-capabilities:
    get:
      summary: Get system EMS capabilities.
      description: >
        __WARN: This API is only for internal usage!__


        Gets information about the system's EMS capabilities. The latest
        reported list of capabilities is returned.


        Empty response means no capabilities were reported by EMS so far. Full
        list of supported capabilities is maintained by gridBox team.
      tags:
        - EMS
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/systemID'
      responses:
        '200':
          description: Ok
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/SystemEMSCapabilities'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/SystemNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/live:
    get:
      summary: Retrieve System's Live Measurement.
      description: Retrieves a system's latest aggregated measurement.
      tags:
        - System
      security:
        - BearerAuth:
            - SystemMeasurementsRead
      parameters:
        - $ref: '#/components/parameters/systemID'
      responses:
        '200':
          description: Successfully returned system's live measurements.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Measurement'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/NotFoundExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /systems/{systemID}/historical:
    get:
      summary: Historical Measurements for Systems
      description: |
        Lists aggregated measurements of a system over a period of time.

        System measurements are the result of incorporating measurements from 
        all appliances that are part of a system. This allows computing e.g. 
        overall consumption adding producers (e.g. PV) and subtracting consumers
        (e.g. EV charging stations). This aggregation is performed in various 
        resolutions to suit different use cases. See the 'resolution' parameter
        for a list of options.

        Depending on the resolution parameter, the response contains either
        power or energy measurements (unless otherwise documented):
        - **power** (unit: W): `15m`, `1h`
        - **energy** (unit: Wh): `1d`, `1w`, `1M`, `1y`

        Measurements are "aligned" differently whether they contain energy or
        power measurements:
        - For power values the data point is written after the aggregated time 
          span. For the interval 2018-04-01T00:00:00Z/2018-04-02T00:00:00Z
          with resolution 15m the first observation will be recorded at 
          2018-04-01T00:15:00Z
        - For energy values the observation is stored at the beginning of 
          the aggregated time span. For the interval 
          2018-04-01T00:00:00Z/2018-04-05T00:00:00Z and resolution 1d the first 
          observation will be recorded at 2018-04-01T00:00:00Z

        The `total` object of the response contains an aggregation of the 
        individual data points over time and therefore is an energy value.
        The `total.measuredAt` field is an interval containing all data points 
        in the requested interval.

        In order to reduce the duration of the endpoint, the gridX API imposes 
        limitations on the interval for a given resolution:

        | Resolution | Limit                   |
        |------------|-------------------------|
        | 15m        | intervals up to 1 day   |
        | 1h         | intervals up to 1 week  |
        | 1d         | intervals up to 1 month |
        | 1w         | intervals up to 1 month |
        | 1M         | intervals up to 5 years |
        | 1y         | no limit                |
      tags:
        - System
      security:
        - BearerAuth:
            - SystemMeasurementsRead
      parameters:
        - $ref: '#/components/parameters/systemID'
        - $ref: '#/components/parameters/interval'
        - $ref: '#/components/parameters/resolution'
      responses:
        '200':
          description: Successfully returned system's aggregated measurements.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Measurements'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/NotFoundExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /gateways/{gatewayID}/appliances/{applianceID}/measurements/appliance:
    get:
      summary: List Appliance's Raw Measurements
      description: |
        Lists raw measurements of an appliance over a period of time.

        The provided `interval` must not span more than 24 hours.

        The resolution cannot be controlled. The granularity at which we store
        measurements varies from appliance to appliance, firmware and 
        configuration.
      tags:
        - Appliance
      security:
        - BearerAuth:
            - ApplianceMeasurementsRead
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/applianceID'
        - $ref: '#/components/parameters/interval'
      responses:
        '200':
          description: Returned raw measurement.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  oneOf:
                    - $ref: '#/components/schemas/BatteryMeasurement'
                    - $ref: '#/components/schemas/InverterMeasurement'
                    - $ref: '#/components/schemas/AUXMeterMeasurement'
                    - $ref: '#/components/schemas/EVChargingStationMeasurement'
                    - $ref: '#/components/schemas/HeatMeterMeasurement'
                    - $ref: '#/components/schemas/ElectrolyzerMeasurement'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/NotFoundExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Write Appliance Measurements
      tags:
        - Appliance
      security:
        - BearerAuth:
            - ApplianceMeasurementsWrite
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/applianceID'
      requestBody:
        description: >-
          Create appliance raw measurement that can be retrieved via the
          [appliance
          measurements](https://developer.gridx.ai/reference/get_gateways-gatewayid-appliances-applianceid-measurements-appliance-1)
          and influences the [system
          measurements](https://developer.gridx.ai/reference/get_systems-systemid-historical)
          endpoints.
        required: true
        content:
          application/json:
            schema:
              allOf:
                - oneOf:
                    - $ref: '#/components/schemas/RawInverterMeasurement'
                    - $ref: '#/components/schemas/RawBatteryMeasurement'
                    - $ref: '#/components/schemas/RawMeterMeasurement'
                    - $ref: '#/components/schemas/RawEVChargingStationMeasurement'
                    - $ref: '#/components/schemas/RawHeaterMeasurement'
                    - $ref: '#/components/schemas/RawHeatpumpMeasurement'
                    - $ref: '#/components/schemas/HeatMeterMeasurement'
                    - $ref: '#/components/schemas/ElectrolyzerMeasurement'
                - additionalProperties: false
      responses:
        '200':
          description: Measurement written successfully.
        '400':
          description: The request body did not match the required format.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/NotFoundExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /gateways/{gatewayID}/appliances/{applianceID}/measurements:
    get:
      summary: List Appliance's Combined Measurements
      description: >
        Lists combinations of appliance measurements and energy management 

        measurements. 


        This endpoints adds a "convenience" method for fetching raw
        measurements 

        and energy management measurements together, by combining them into a 

        single measurement object. 


        It is usually used to inspect the EMS behavior in correspondence to raw 

        values reported by the appliance. 


        The requested `interval` must not span more than 24 hours.
      tags:
        - Appliance
      security:
        - BearerAuth:
            - ApplianceMeasurementsRead
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/applianceID'
        - $ref: '#/components/parameters/interval'
      responses:
        '200':
          description: Combined measurements have been returned successfully.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/CombinedMeasurement'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/NotFoundExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /gateways/{gatewayID}/appliances/{applianceID}/measurements/energymanagement:
    get:
      summary: List Appliance's Energy Management Measurements
      description: >
        Lists energy management measurements of an appliance over a period of
        time.

        Data points returned are emitted directly by the Energy Management

        System (EMS), therefore the resolution cannot be controlled. The 

        granularity at which we store measurements depends on the EMS mode and 

        configuration. 

        The provided `interval` must not span more than 24 hours.
      tags:
        - Appliance
      security:
        - BearerAuth:
            - ApplianceMeasurementsRead
      parameters:
        - $ref: '#/components/parameters/gatewayID'
        - $ref: '#/components/parameters/applianceID'
        - $ref: '#/components/parameters/interval'
      responses:
        '200':
          description: Energy Management Measurement returned.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/EnergyManagementMeasurement'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/NotFoundExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /clusters/{clusterID}/live:
    get:
      summary: Retrieve Cluster's Live Measurement.
      description: Retrieves a cluster's latest aggregated measurement.
      tags:
        - Cluster
      security:
        - BearerAuth:
            - SystemMeasurementsRead
      parameters:
        - $ref: '#/components/parameters/clusterID'
      responses:
        '200':
          description: Successfully returned cluster's live measurements.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Measurement'
        '401':
          $ref: '#/components/responses/UnauthorizedException'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/NotFoundExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /clusters/{clusterID}/historical:
    get:
      summary: Historical Measurements for cluster
      description: |
        Lists aggregated measurements of a cluster over a period of time.

        Cluster measurements are the result of incorporating measurements from 
        all appliances that are part of a cluster. This allows computing e.g. 
        overall consumption adding producers (e.g. PV) and subtracting consumers
        (e.g. EV charging stations). This aggregation is performed in various 
        resolutions to suit different use cases. See the 'resolution' parameter
        for a list of options.

        Depending on the resolution parameter, the response contains either
        power or energy measurements (unless otherwise documented):
        - **power** (unit: W): `10m`, `15m`, `1h`
        - **energy** (unit: Wh): `1d`, `1w`, `1M`, `1y`

        **Note**: Fetching historical measurements with 10m resolution works
        only for intervals **before** 2021-06-15T00:00:00Z.

        Measurements are "aligned" differently whether they contain energy or
        power measurements:
        - For power values the data point is written after the aggregated time 
          span. For the interval 2018-04-01T00:00:00Z/2018-04-02T00:00:00Z
          with resolution 15m the first observation will be recorded at 
          2018-04-01T00:15:00Z
        - For energy values the observation is stored at the beginning of 
          the aggregated time span. For the interval 
          2018-04-01T00:00:00Z/2018-04-05T00:00:00Z and resolution 1h the first 
          observation will be recorded at 2018-04-01T00:00:00Z
      tags:
        - Cluster
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/clusterID'
      responses:
        '200':
          description: Successfully returned cluster's aggregated measurements.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Measurements'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/NotFoundExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
        '502':
          $ref: '#/components/responses/BadGatewayExceptionResponse'
  /policies:
    get:
      summary: List Policy Documents
      description: Lists all ever created policy documents
      tags:
        - Policy
      security:
        - BearerAuth:
            - PoliciesRead
      responses:
        '200':
          $ref: '#/components/responses/ListPoliciesResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    post:
      summary: Create Policy Document
      description: Creates a new policy document.
      tags:
        - Policy
      security:
        - BearerAuth:
            - PoliciesWrite
      requestBody:
        $ref: '#/components/requestBodies/CreatePolicyDocumentRequestBody'
      responses:
        '201':
          $ref: '#/components/responses/CreatePolicyDocumentResponse'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /policies/{policyID}:
    get:
      summary: Get Policy Document
      description: Gets policy document based on its ID.
      tags:
        - Policy
      security:
        - BearerAuth:
            - PoliciesRead
      parameters:
        - $ref: '#/components/parameters/policyID'
      responses:
        '200':
          $ref: '#/components/responses/PolicyDocumentResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    patch:
      summary: Update Policy Document
      description: Updates a policy document.
      tags:
        - Policy
      security:
        - BearerAuth:
            - PoliciesWrite
      requestBody:
        $ref: '#/components/requestBodies/UpdatePolicyDocumentRequestBody'
      parameters:
        - $ref: '#/components/parameters/policyID'
      responses:
        '204':
          description: Policy Document Updated
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete Policy Document
      description: Deletes a policy document.
      tags:
        - Policy
      security:
        - BearerAuth:
            - PoliciesWrite
      parameters:
        - $ref: '#/components/parameters/policyID'
      responses:
        '204':
          description: Policy Document Deleted
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /policies/{policyID}/statements/{statementID}:
    delete:
      summary: Unassign Policy Statement from Document
      description: Un-assigns a policy statement from a policy document
      tags:
        - Policy
      security:
        - BearerAuth:
            - PoliciesWrite
      parameters:
        - $ref: '#/components/parameters/policyID'
        - $ref: '#/components/parameters/statementID'
      responses:
        '204':
          description: Policy Statement Unassigned
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /policies/{policyID}/groups:
    post:
      summary: Assign Policy Document to Group
      tags:
        - Policy
        - Group
      security:
        - BearerAuth:
            - GroupsWrite
      parameters:
        - $ref: '#/components/parameters/policyID'
      requestBody:
        $ref: '#/components/requestBodies/AssignPolicyDocumentToGroupRequestBody'
      responses:
        '204':
          description: Policy Group Assigned
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /policies/{policyID}/groups/{groupID}:
    delete:
      summary: Unassign Policy Document from Group
      tags:
        - Policy
        - Group
      security:
        - BearerAuth:
            - GroupsWrite
      parameters:
        - $ref: '#/components/parameters/policyID'
        - $ref: '#/components/parameters/groupID'
      responses:
        '204':
          description: Policy Group Unassigned
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /product-functionalities:
    post:
      summary: Create Product Functionality
      description: Creates a new product functionality.
      tags:
        - Product Functionality
      security:
        - BearerAuth: []
      requestBody:
        description: Product functionality to be created.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductFunctionalityCreationStrict'
      responses:
        '201':
          description: Created product functionality.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/ProductFunctionality'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    get:
      summary: List Product Functionalities
      description: Lists all product functionalities.
      tags:
        - Product Functionality
      security:
        - BearerAuth: []
      responses:
        '200':
          description: List of product functionalities.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProductFunctionality'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /product-functionalities/{functionalityID}:
    get:
      summary: Get a Product Functionality
      description: Lists all product functionalities.
      tags:
        - Product Functionality
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/functionalityID'
      responses:
        '200':
          description: Requested product functionality.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/ProductFunctionality'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete Product Functionality
      description: Delete a product functionality.
      tags:
        - Product Functionality
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/functionalityID'
      responses:
        '204':
          description: Product functionality successfully deleted.
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/product-options:
    post:
      summary: Create Product Option
      description: Creates a new product option.
      tags:
        - Product Option
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/accountID'
      requestBody:
        description: Product option to be created.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductOptionCreationStrict'
      responses:
        '201':
          description: Created product option.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/ProductOption'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    get:
      summary: List Product Options
      description: >
        Lists all product options created by the given account and its children.


        Product options returned by this endpoint are not necessarily assignable
        to all systems assigned to the given account. 
      tags:
        - Product Option
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/accountID'
      responses:
        '200':
          description: List of product options.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/ProductOption'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /accounts/{accountID}/product-options/{optionID}:
    patch:
      summary: Update a Product Option
      description: Updates a product option.
      tags:
        - Product Option
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/optionID'
      requestBody:
        description: Partially updates a product option.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ProductOptionUpdateStrict'
      responses:
        '200':
          description: Updated product option.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/ProductOption'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
    delete:
      summary: Delete Product Option
      description: Delete a product option.
      tags:
        - Product Option
      security:
        - BearerAuth: []
      parameters:
        - $ref: '#/components/parameters/accountID'
        - $ref: '#/components/parameters/optionID'
      responses:
        '204':
          description: Product option successfully deleted.
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /spine/devices:
    get:
      summary: List all connected devices
      description: |
        List devices that are accessible to the authenticated account. 
        The response contains devices grouped by their provider.
      tags:
        - Devices
      security:
        - BearerAuth:
            - SPINEDevicesRead
      responses:
        '200':
          $ref: '#/components/responses/GetDevicesResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /spine/devices/{deviceID}/powersequences/{sequenceID}:
    patch:
      summary: Change a specific power sequence for a specific device.
      description: >
        A PATCH may be performed on startTime and endTime of an existing power
        sequence. 

        If only one parameter is specified, the other is calculated from the
        accumulated duration of all power time slots for this sequence.

        A device binding is needed before changing the power sequence. If a
        binding doesn't exist, it is first created and then the power sequence
        is updated.
      tags:
        - Power Sequence
      security:
        - BearerAuth:
            - SPINEDevicesWrite
      parameters:
        - $ref: '#/components/parameters/deviceID'
        - $ref: '#/components/parameters/sequenceID'
      requestBody:
        $ref: '#/components/requestBodies/UpdatePowerSequenceRequestBody'
      responses:
        '201':
          description: A complete representation of the updated power sequence.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/powerSequence'
              examples:
                earliestStart:
                  $ref: '#/components/examples/runningPowerSequence'
                scheduleStart:
                  $ref: '#/components/examples/scheduledPowerSequence'
        '400':
          $ref: '#/components/responses/BadRequestExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/DeviceNotFoundResponse'
        '422':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /user:
    get:
      summary: Retrieve the authenticated User
      description: Retrieves the details of the authenticated user.
      tags:
        - User
      security:
        - BearerAuth:
            - ReadUser
      responses:
        '200':
          description: The currently authenticated user representation.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/User'
        '500':
          description: Internal Server Error
    patch:
      summary: Update the authenticated User
      description: >
        Updates the authenticated user by setting the values of the body
        parameters.

        Any parameters not provided will be left unchanged.
      tags:
        - User
      requestBody:
        description: User fields to update.
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserStrict'
      security:
        - BearerAuth:
            - WriteUser
      responses:
        '200':
          description: >-
            The full representation of the user after the partial update on
            success.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/User'
        '403':
          description: Forbidden (missing authorization)
        '500':
          description: Internal Server Error
  /user/logins:
    get:
      summary: Retrieve the authenticated user's login history
      description: Retrieves the history of the last user logins.
      tags:
        - User
      security:
        - BearerAuth:
            - ListLogins
      responses:
        '200':
          description: Login history of the currently authenticated user.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/LoginEvent'
        '403':
          description: Forbidden (missing authorization)
        '500':
          description: Internal Server Error
  /user/policies:
    get:
      summary: List Policy Documents attached to the authenticated User
      tags:
        - User
      security:
        - BearerAuth:
            - PoliciesRead
      responses:
        '200':
          $ref: '#/components/responses/GetUserPolicyDocumentsResponse'
        '500':
          $ref: '#/components/responses/InternalExceptionResponse'
  /user/stars/systems:
    get:
      summary: List all starred Systems
      description: List starred systems of the authenticated user.
      tags:
        - Star
      security:
        - BearerAuth:
            - ListStarredSystems
      responses:
        '200':
          description: Starred systems of the authenticated user.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StarredSystem'
        '403':
          description: Forbidden (missing authorization)
        '500':
          description: Internal Server Error
  /user/stars/systems/{systemID}:
    put:
      summary: Star a System
      description: Marks a system as favorite by starring it.
      tags:
        - Star
      parameters:
        - name: systemID
          in: path
          description: Identifier of the system to be starred.
          required: true
          example: 218e8795-2442-42d7-901b-1588373e527f
          schema:
            type: string
            format: uuid
      security:
        - BearerAuth:
            - StarSystem
      responses:
        '204':
          description: Successfully starred system.
        '403':
          description: Forbidden (missing authorization)
        '404':
          description: System not found.
        '500':
          description: Internal Server Error
    delete:
      summary: Unstar a System
      description: Removes a system from favorites by unstarring it.
      tags:
        - Star
      parameters:
        - name: systemID
          in: path
          description: Identifier of the system to be unstarred.
          required: true
          example: 218e8795-2442-42d7-901b-1588373e527f
          schema:
            type: string
            format: uuid
      security:
        - BearerAuth:
            - UnstarSystem
      responses:
        '204':
          description: Successfully unstarred system.
        '403':
          description: Forbidden (missing authorization)
        '500':
          description: Internal Server Error
  /user/stars/accounts:
    get:
      summary: List all starred Accounts
      description: Lists all starred accounts for the authenticated user.
      tags:
        - Star
      security:
        - BearerAuth:
            - ListAccounts
      responses:
        '200':
          description: Starred accounts of the currently authenticated user.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/StarredAccount'
        '403':
          description: Forbidden (missing authorization)
        '500':
          description: Internal Server Error
  /user/stars/accounts/{accountID}:
    put:
      summary: Star an Account
      description: Marks an account as favorite by starring it.
      tags:
        - Star
      parameters:
        - name: accountID
          in: path
          description: Identifier of the account to be starred.
          required: true
          example: 218e8795-2442-42d7-901b-1588373e527f
          schema:
            type: string
            format: uuid
      security:
        - BearerAuth:
            - StarAccount
      responses:
        '204':
          description: Account starred successfully.
        '403':
          description: Forbidden (missing authorization)
        '404':
          description: Account not found.
        '500':
          description: Internal Server Error
    delete:
      summary: Unstar an Account
      description: Removes a given account from favorites by unstarring it.
      tags:
        - Star
      parameters:
        - name: accountID
          in: path
          description: Identifier of the account to be starred.
          required: true
          example: 218e8795-2442-42d7-901b-1588373e527f
          schema:
            type: string
            format: uuid
      security:
        - BearerAuth:
            - UnstarAccount
      responses:
        '204':
          description: Account unstarred successfully.
        '403':
          description: Forbidden (missing authorization)
        '500':
          description: Internal Server Error
  /user/accounts:
    get:
      summary: Get user accounts
      description: Returns a list of accounts the authenticated user can switch to.
      tags:
        - Account
        - User
      security:
        - BearerAuth:
            - ListAccounts
      responses:
        '200':
          $ref: '#/components/responses/UserAccounts'
        '403':
          description: Forbidden (missing authorization)
        '404':
          description: Account not found.
        '500':
          description: Internal Server Error
  /user/notifications:
    get:
      summary: List Notifications
      description: Lists dashboard notifications the authenticated user.
      tags:
        - Notification
      security:
        - BearerAuth:
            - ListNotifications
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/perPage'
        - name: unread
          description: List only unread notifications.
          in: query
          schema:
            type: boolean
      responses:
        '200':
          description: Dashboard notifications.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Notification'
        '403':
          description: Forbidden (missing authorization)
        '500':
          description: Internal Server Error
  /user/notifications/{notificationID}:
    get:
      summary: Retrieve a Notification
      description: Retrieves specific dashboard notification of the authenticated user.
      parameters:
        - $ref: '#/components/parameters/notificationID'
      tags:
        - Notification
      security:
        - BearerAuth:
            - GetNotification
      responses:
        '200':
          description: Dashboard notification.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/Notification'
        '403':
          description: Forbidden (missing authorization)
        '404':
          description: Dashboard notification not found.
        '500':
          description: Internal Server Error
    patch:
      summary: Update a Notification
      description: Updates a dashboard notification of the authenticated user.
      parameters:
        - $ref: '#/components/parameters/notificationID'
      tags:
        - Notification
      security:
        - BearerAuth: []
      requestBody:
        description: Modified Notification
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NotificationUpdateStrict'
      responses:
        '200':
          description: Dashboard notification.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/AbstractNotification'
        '400':
          $ref: '#/components/responses/InvalidExceptionResponse'
        '403':
          $ref: '#/components/responses/ForbiddenExceptionResponse'
        '404':
          $ref: '#/components/responses/EntityNotFoundResponse'
        '500':
          description: Internal Server Error
  /user/tokens:
    get:
      summary: List all Tokens
      description: Lists all the API tokens for the authenticated user.
      tags:
        - Token
      security:
        - BearerAuth:
            - GetAPITokens
      parameters:
        - $ref: '#/components/parameters/page'
        - $ref: '#/components/parameters/perPage'
        - $ref: '#/components/parameters/sort'
        - $ref: '#/components/parameters/order'
      responses:
        '200':
          description: API tokens of the current user.
          content:
            application/vnd.gridx.v2+json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/APIToken'
        '403':
          description: Forbidden (missing authorization)
        '404':
          description: API token not found.
        '500':
          description: Internal Server Error
    post:
      summary: Create a Token
      tags:
        - Token
      security:
        - BearerAuth:
            - APITokenWrite
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/APITokenCreationStrict'
      responses:
        '201':
          description: API token created.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/PersonalAPITokenWithSecret'
        '400':
          description: Bad Request
        '403':
          description: Forbidden (missing authorization)
        '500':
          description: Internal Server Error
  /user/tokens/{tokenID}:
    get:
      summary: Retrieve a Token
      description: Retrieves the given API token for the authenticated user.
      parameters:
        - name: tokenID
          in: path
          description: Identifier of the token.
          required: true
          example: 218e8795-2442-42d7-901b-1588373e527f
          schema:
            type: string
            format: uuid
      tags:
        - Token
      security:
        - BearerAuth:
            - GetAPIToken
      responses:
        '200':
          description: API token of the current user.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/APIToken'
        '403':
          description: Forbidden (missing authorization)
        '404':
          description: API token not found.
        '500':
          description: Internal Server Error
    patch:
      summary: Update a Token
      description: |
        Updates the specific token by setting the values of the body parameters.
        Any parameters not provided will be left unchanged. 
      tags:
        - Token
      security:
        - BearerAuth:
            - UpdateAPIToken
      parameters:
        - name: tokenID
          in: path
          description: Identifier of the token to be updated.
          required: true
          example: 218e8795-2442-42d7-901b-1588373e527f
          schema:
            type: string
            format: uuid
      requestBody:
        description: Update Token
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/APITokenUpdateStrict'
      responses:
        '200':
          description: >-
            The full representation of the token after the partial update on
            success.
          content:
            application/vnd.gridx.v2+json:
              schema:
                $ref: '#/components/schemas/APIToken'
        '403':
          description: Forbidden (missing authorization)
        '404':
          description: API token not found.
        '500':
          description: Internal Server Error
    delete:
      summary: Delete a Token
      description: Removes a given token from the authenticated user.
      tags:
        - Token
      parameters:
        - name: tokenID
          in: path
          description: Identifier of the token.
          required: true
          example: 218e8795-2442-42d7-901b-1588373e527f
          schema:
            type: string
            format: uuid
      security:
        - BearerAuth:
            - DeleteAPIToken
      responses:
        '204':
          description: API token deleted successfully.
        '403':
          description: Forbidden (missing authorization)
        '404':
          description: API token not found.
        '500':
          description: Internal Server Error
components:
  parameters:
    tariffID:
      name: tariffID
      description: |
        Unique identifier for the energy tariff.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: 17874c1b-d073-4b06-bf01-a1497fbe1142
    documentKey:
      name: documentKey
      description: |
        Unique identifier that can be used to access documents.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: 97874c1b-d073-4b06-bf01-a1497fbe1146
    ruleID:
      name: ruleID
      description: |
        Unique identifier that can be used to access notification rules.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: 97874c1b-d073-4b06-bf01-a1497fbe1146
    planID:
      name: planID
      description: |
        Unique identifier that can be used to access charge plans.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: 97874c1b-d073-4b06-bf01-a1497fbe1146
    tagID:
      name: tagID
      description: |
        Unique identifier that can be used to access RFID tags.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: 97874c1b-d073-4b06-bf01-a1497fbe1146
    kind:
      name: kind
      description: Account kind.
      in: query
      example: b2b
      schema:
        type: string
        enum:
          - b2b
          - end-user
    prefix:
      name: prefix
      description: Limits the response to keys that begin with the specified prefix.
      in: query
      example: myKey_
      schema:
        type: string
    accountID:
      name: accountID
      description: |
        Unique identifier used to access an account.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: 17874c1b-d073-4b06-bf01-a1497fbe1142
    page:
      name: page
      description: |
        Requested page, to be used in combination with the `per_page` parameter.
      in: query
      schema:
        type: integer
        format: int32
        default: 1
        minimum: 1
      example: 5
    perPage:
      name: per_page
      description: |
        Requested number of items per page.
      in: query
      schema:
        type: integer
        format: int32
        default: 20
        minimum: 20
        maximum: 100
      example: 50
    sort:
      name: sort
      description: Sort results based on a key.
      in: query
      schema:
        type: string
      example: created_at
    embed:
      name: embed
      description: Describes which embedded fields of the system should be populated.
      in: query
      schema:
        type: string
        enum:
          - user
    groupID:
      name: groupID
      description: |
        Unique identifier that can be used to access policy groups.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: 97874c1b-d073-4b06-bf01-a1497fbe1146
    userID:
      name: userID
      description: |
        Unique identifier used to access a user.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: 97874c1b-d073-4b06-bf01-a1497fbe1146
    deleteAuth0:
      name: delete-auth0
      description: |
        If set to `false`, it does not delete the user from Auth0.
      in: query
      required: false
      schema:
        type: boolean
        default: true
      example: false
    notificationID:
      name: notificationID
      description: |
        Unique identifier that can be used to access notifications.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: 97874c1b-d073-4b06-bf01-a1497fbe1146
    applianceID:
      name: applianceID
      description: |
        Unique identifier used to access an appliance.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: bb2681ab-9526-49ca-bc52-a5f4ec366958
    memberID:
      name: memberID
      in: path
      description: Identifier of a member (Appliance ID/Cluster ID).
      required: true
      example: 2c7043ae-1539-4e02-bdbd-0395c90d6bd0
      schema:
        type: string
        format: uuid
    clusterID:
      name: clusterID
      description: Unique identifier used to access a cluster.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: 2c7043ae-1539-4e02-bdbd-0395c90d6bd0
    customerID:
      name: customerID
      description: |
        customerID is universally unique identifier (UUID V4) used identify a
        customer in our backend.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: 37874c1b-d073-4b06-bf01-a1497fbe1142
    order:
      name: order
      description: >-
        Order direction of the results, to be used in combination with `sort`
        parameter.
      in: query
      schema:
        type: string
      example: desc
    systemID:
      name: systemID
      description: |
        Unique identifier used to access a system.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: aa3e5a93-bb38-4b15-b7f2-af40daf3a1dc
    gatewayID:
      name: gatewayID
      description: |
        Unique identifier used to access a gateway.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: 4ef41512-8445-4b90-aa53-8f8549b3f4bd
    listAll:
      name: listAll
      description: >
        Boolean value to define if all the appliances must be listed.

        If absent or set to `false` child appliances of Hybrid Inverter would be
        skipped.
      in: query
      example: true
      schema:
        type: boolean
        default: false
    evProfileID:
      name: evProfileID
      description: Unique identifier for an EV profile.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: d4498841-1404-46f6-8086-7cc8bbdf98d3
    jobIDOrType:
      name: jobIDOrType
      description: >
        Unique identifier for a job or the type of the job. 

        In `POST` request the job **type** is used, in `GET` and `DELETE`
        requests job **ID**.
      in: path
      required: true
      schema:
        type: string
      examples:
        jobType:
          summary: Type of the job.
          value: reset
        jobID:
          summary: Unique identifier for a job.
          value: 0dce59b6-edd5-4366-a6fb-27c0ab3e8f90
    ToUForecastsTimeInterval:
      name: interval
      in: query
      required: false
      schema:
        type: string
        format: datetime
        example: 2018-04-01T15:00:00Z/2018-04-25T00:00:00Z
      description: >
        A time interval [start_timestamp, end_timestamp] encoded as a unique
        string start_timestamp/end_timestamp.

        Each timestamp should be specified in the RFC3339 format.

        The maximum time interval that can be requested is 48 hours.

        IMPORTANT: it has to be fully URL encoded (also known as
        Percent-encoding), including the `/`.
    interval:
      name: interval
      description: >
        Requested time interval, formatted in ISO8601.


        In this format the start and end point of the interval are formatted
        according

        to RFC3339 and separated by a slash "/".
      in: query
      required: true
      allowReserved: true
      example: 2021-12-24T18:21:00Z/2021-12-25T18:21:00Z
      schema:
        type: string
        format: datetime
    scheduleID:
      name: scheduleID
      description: |
        Unique identifier for a schedule.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: ec4d0c89-a604-49ac-82f0-427f9cb42204
    saving:
      name: saving
      in: path
      required: true
      description: Kind of saving.
      example: CAPACITY_TARIFF_OPTIMIZATION
      schema:
        $ref: '#/components/schemas/SavingKind'
    resolution:
      name: resolution
      description: >
        Requested resolution, formatted in ISO8601 units.


        In this format the resolution is formatted with a single number and
        corresponding

        ISO8601 date or time unit.
      in: query
      example: 1h
      schema:
        type: string
        default: 1h
        enum:
          - 15m
          - 1h
          - 1d
          - 1w
          - 1M
    policyID:
      name: policyID
      description: |
        Unique identifier that can be used to access policy documents.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: 97874c1b-d073-4b06-bf01-a1497fbe1146
    statementID:
      name: statementID
      description: |
        Unique identifier that can be used to refer to policy statements.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: 17874c1b-d073-4b06-bf01-a1497fbe1142
    functionalityID:
      name: functionalityID
      description: |
        Unique identifier of the product functionality.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: 12a2cfc0-f873-11ed-b67e-0242ac120002
    optionID:
      name: optionID
      description: |
        Unique identifier of the product option.
      in: path
      required: true
      schema:
        type: string
        format: uuid
      example: 7e82929c-f87e-11ed-b67e-0242ac120002
    deviceID:
      name: deviceID
      description: ID of the SPINE device, specified by the manufacturer.
      in: path
      required: true
      schema:
        type: string
      example: deviceID
    sequenceID:
      name: sequenceID
      description: Identifier of power sequence.
      in: path
      required: true
      schema:
        type: integer
      example: 1
  requestBodies:
    CreateScanConfigRequestBody:
      description: Creates a scan configuration.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ScanConfigurationSet'
    UpdateScanConfigRequestBody:
      description: Updates a scan configuration.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ScanConfigurationSet'
    AssignPolicyDocumentToAccountRequestBody:
      description: Assigns a policy document to an account.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PolicyDocumentAssignStrict'
    CreatePolicyGroupRequestBody:
      description: Creates a policy group and related documents.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PolicyGroupCreateStrict'
    UpdateNotificationRuleRequestBody:
      description: Updates a notification rule.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/NotificationsRuleStrict'
    CreateNotificationRuleRequestBody:
      description: Creates a notification rule.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/NotificationsRuleStrict'
    CreateUserNotificationsRequestBody:
      description: Create a notification.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/NotificationStrict'
    UpdateUserNotificationsRequestBody:
      description: Updates a notification.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/NotificationStrict'
    CreateRFIDTagRequestBody:
      description: Creates RFID tag.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RFIDTagStrict'
    UpdateRFIDTagRequestBody:
      description: Updates RFID tag.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RFIDTagStrict'
    AccountUpdateRequestBody:
      description: Updates an account.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AccountUpdateStrict'
    AccountCreateRequestBody:
      description: Creates an account.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/AccountCreateStrict'
    MoveAccountRequestBody:
      description: Move an account into the target account with the provided targetID.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/MoveAccountStrict'
    AssignSystemToAccount:
      description: Assign a system (and its customers) to an account.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/SystemAccountAssignmentStrict'
    UnassignSystemToAccount:
      description: Unassings a system (and its customers) from an account.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/SystemAccountUnAssignment'
    CreateAssetRequestBody:
      description: Creates an asset.
      required: true
      content:
        application/json:
          schema:
            properties:
              id:
                type: string
                format: uuid
              name:
                type: string
                example: Some Human-Readable Asset Name
              applicationId:
                type: string
                format: uuid
              system:
                description: >-
                  Minimal information about the System in which the Asset is
                  being created.
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                required:
                  - id
              manufacturer:
                type: string
                example: TQ-Systems
              model:
                type: string
                example: B-control Energy Manager 300
              serialNumber:
                type: string
                example: 3cdae5c3c30c53b9
              priority:
                type: boolean
                default: false
              lastHeartbeatReceivedAt:
                type: string
                format: date-time
                description: At what time the last heartbeat was received.
              driverVersion:
                type: string
                example: v1.0.1
              type:
                type: string
                enum:
                  - CONTAINER
                  - EVSTATION
                  - HEAT_PUMP
                  - HEATER
                  - INVERTER
                  - IO_DEVICE
                  - METER
                  - UNKNOWN
              kind:
                type: string
                enum:
                  - BATTERY
                  - BTTP
                  - CLUSTER
                  - CONTAINER
                  - EVSTATION
                  - FUEL_CELL
                  - GRID
                  - HEAT_PUMP
                  - HEAT_PUMP_EXTERNAL
                  - HEATER
                  - HEATING
                  - HYBRID
                  - IO_DEVICE
                  - MISC
                  - PV
                  - PV_EXTERNAL
                  - UNKNOWN
                  - WIND_TURBINE
              metadata:
                type: string
                format: json
                example: >-
                  "{"reverse_flow": false, "aux_meter_type":
                  "SIMULATION_AUX_METER_TYPE"}"
              networkSettings:
                $ref: '#/components/schemas/NetworkSettings'
            required:
              - type
              - system
    UpdateAssetRequestBody:
      description: Updates an asset.
      required: true
      content:
        application/json:
          schema:
            type: object
            description: A request to (partially) update an asset
            properties:
              name:
                type: string
                example: Some Human-Readable Asset Name
              system:
                description: >
                  Minimal information needed to check asset permission. Note:
                  This property is for verification purposes only and it will
                  not update or patch system ID.
                type: object
                properties:
                  id:
                    type: string
                    format: uuid
                required:
                  - id
              manufacturer:
                type: string
                example: TQ-Systems
              model:
                type: string
                example: B-control Energy Manager 300
              serialNumber:
                type: string
                example: 3cdae5c3c30c53b9
              priority:
                type: boolean
                nullable: true
              lastHeartbeatReceivedAt:
                type: string
                format: date-time
                description: At what time the last heartbeat was received.
              driverVersion:
                type: string
                example: v1.0.1
              type:
                type: string
                enum:
                  - CONTAINER
                  - EVSTATION
                  - HEAT_PUMP
                  - HEATER
                  - INVERTER
                  - IO_DEVICE
                  - METER
                  - UNKNOWN
              kind:
                type: string
                enum:
                  - BATTERY
                  - BTTP
                  - CLUSTER
                  - CONTAINER
                  - EVSTATION
                  - FUEL_CELL
                  - GRID
                  - HEAT_PUMP
                  - HEAT_PUMP_EXTERNAL
                  - HEATER
                  - HEATING
                  - HYBRID
                  - IO_DEVICE
                  - MISC
                  - PV
                  - PV_EXTERNAL
                  - UNKNOWN
                  - WIND_TURBINE
              metadata:
                type: string
                format: json
                example: >-
                  "{"reverse_flow": false, "aux_meter_type":
                  "SIMULATION_AUX_METER_TYPE"}"
              networkSettings:
                $ref: '#/components/schemas/NetworkSettings'
            required:
              - system
    CustomerAccountUpdateRequestBody:
      description: Updates an end-customer account.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/CustomerAccountUpdateStrict'
    ImpersonationRequestBody:
      description: Impersonate as user
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ImpersonationStrict'
    SetImportPowerLimitRequestBody:
      description: Set a gateway's import power limit.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ImportPowerLimitSetStrict'
    SetUserLimitRequestBody:
      description: Set user capacity limit, price and enable or disable the limit.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/UserLimitSetStrict'
    SetRecommendedLimitRequestBody:
      description: Set recommended capacity limit.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/RecommendedLimitSetStrict'
    SetPeakPowerRequestBody:
      description: Set detected peak power.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PeakPowerSetStrict'
    SystemCreationRequestBody:
      description: The body of a system creation request.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/SystemCreateStrict'
    SystemUpdateRequestBody:
      description: Modified System.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/SystemUpdateStrict'
          examples:
            updateName:
              $ref: '#/components/examples/systemPatch'
            enableDerApi:
              $ref: '#/components/examples/enableDerApi'
            enableDerApiWithoutFlexibilitiesSync:
              $ref: '#/components/examples/enableDerApiWithoutFlexibilitiesSync'
            assignProductOption:
              summary: Assign a product option to the system
              value:
                productOption:
                  id: d085f746-1ae3-4a89-ab3a-a5aa61fd4bf8
    GatewayCreation:
      description: Gateway to be created.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/GatewayCreateStrict'
    ApplianceCreateRequestBody:
      description: Creates an appliance.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ApplianceCreateStrict'
    ApplianceUpdateRequestBody:
      description: Partially updates an appliance.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/ApplianceUpdateStrict'
    TimeOfUseSettingsPut:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/TimeOfUseSettingsPutStrict'
    TimeOfUseSettingsPatch:
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/TimeOfUseSettingsPatchStrict'
    SystemGridSignalsUpdateRequestBody:
      description: Modified System.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/SystemGridSignalsUpdateStrict'
    CreatePolicyDocumentRequestBody:
      description: Policy document to be created.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PolicyDocumentUpdateStrict'
    UpdatePolicyDocumentRequestBody:
      description: Policy document to be updated.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PolicyDocumentUpdateStrict'
    AssignPolicyDocumentToGroupRequestBody:
      description: Policy document that should be assigned to a group.
      required: true
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PolicyGroupStrict'
    UpdatePowerSequenceRequestBody:
      description: Update a power sequence for the given device.
      content:
        application/json:
          schema:
            $ref: '#/components/schemas/PowerSequenceUpdateStrict'
          examples:
            scheduleStart:
              $ref: '#/components/examples/scheduledStartPowerSequence'
  responses:
    GetScanConfigResponse:
      description: Scan configuration returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/ScanConfiguration'
    CreateScanConfigResponse:
      description: Scan configuration created.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/ScanConfiguration'
    UpdateScanConfigResponse:
      description: Scan configuration updated.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/ScanConfiguration'
    AccountNotFoundResponse:
      description: Account not found.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/NotFoundException'
    ScanConfigurationNotFoundResponse:
      description: Scan configuration not found.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/NotFoundException'
    TariffNotFoundResponse:
      description: Tariff not found.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/NotFoundException'
    GetAccountResponse:
      description: Account returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/Account'
    UpdateAccountResponse:
      description: Account updated.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/Account'
    GetAccountsResponse:
      description: Accounts returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Account'
    CreateAccountResponse:
      description: Account created.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/Account'
    GetAccountDocumentsResponse:
      description: Account documents returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/File'
    GetAccountDocumentResponse:
      description: |
        Account document returned.
        The MIME-Type and concrete content depends on the returned file.
    CreateAccountDocumentResponse:
      description: Account document created.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/FileCreate'
    GetPolicyDocumentsInGroup:
      description: Policy documents returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/PolicyDocument'
    GetSystemsResponse:
      description: Systems returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/SystemWithUsers'
    GetGroupsByAccountResponse:
      description: Policy groups of the account returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/PolicyGroup'
    CreatePolicyGroupResponse:
      description: Policy group created.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/PolicyGroup'
    GetPolicyGroupResponse:
      description: Policy group returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/PolicyGroupWithCustomers'
    UpdatePolicyGroupResponse:
      description: Updated policy group.
      content:
        application/vnd.gridx.v2+json:
          schema:
            type: object
            allOf:
              - $ref: '#/components/schemas/PolicyGroup'
    AssignSystemToAccountResponse:
      description: System assigned to account.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/Account'
    UnassignSystemToAccountResponse:
      description: System unassigned from account.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/Account'
    MoveAccountResponse:
      description: Moved account.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/Account'
    GetNotificationsResponse:
      description: Notifications returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Notification'
    GetNotificationResponse:
      description: Notification returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/Notification'
    NotificationNotFoundResponse:
      description: Notification not found.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/NotFoundException'
    CreateUserNotificationsResponse:
      description: Notification created.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/Notification'
    GetNotificationRuleResponse:
      description: Notifications rule returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/NotificationsRule'
    GetNotificationRulesResponse:
      description: Notification rules returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/NotificationsRule'
    GetChargePlansResponse:
      description: Charge plans returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/ChargePlan'
    AssignChargePlanResponse:
      description: Charge plans assigned to account.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/ChargePlan'
    ListRFIDTagsResponse:
      description: RFID tags returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/RFIDTag'
    GetRFIDTagResponse:
      description: RFID tag returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/RFIDTag'
    CreateRFIDTagResponse:
      description: RFID tag created.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/RFIDTag'
    UpdateRFIDTagResponse:
      description: RFID tag updated.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/RFIDTag'
    ListAppliancesByRFIDTagsResponse:
      description: Appliances by RFID tag returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/Appliance'
    GetEnergyMarketPricesResponse:
      description: Energy market prices returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/EnergyMarketData'
    GetAccountParentsResponse:
      description: |
        Account parents sorted hierarchical.
        The first item is the parent of the passed account. 
        The next is the parent of the parent of the passed account. 
      content:
        application/json:
          example:
            - accountID: parent
            - accountID: parent-parent
              audience: my-audience
            - accountID: root
          schema:
            type: array
            items:
              type: object
              properties:
                accountID:
                  type: string
                audience:
                  type: string
              required:
                - accountID
    BadGatewayExceptionResponse:
      description: There has been an error from an upstream server.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/BadGateway'
    InvalidExceptionResponse:
      description: Validation failed.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/InvalidException'
    InternalExceptionResponse:
      description: There has been an internal error on our side. We're looking into it.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/InternalException'
    ForbiddenExceptionResponse:
      description: Forbidden.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/ForbiddenException'
    BadRequestExceptionResponse:
      description: Malformed request.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/BadRequestException'
    EntityNotFoundResponse:
      description: Requested entity not found.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/NotFoundException'
    CustomerNotFoundResponse:
      description: Customer Not found
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/NotFoundException'
    UnauthorizedException:
      description: Unauthorized.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/UnauthorizedException'
    ImpersonatedResp:
      description: Impersonated.
      content:
        application/vnd.gridx.v2+json:
          schema:
            type: object
            properties:
              dashboard:
                type: string
                example: https://my.gridx.de
              location:
                type: string
            required:
              - dashboard
              - location
    GetImportPowerLimitResponse:
      description: Import power limit returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/ImportPowerLimit'
    SetImportPowerLimitResponse:
      description: Import power limit set.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/ImportPowerLimit'
    ImportPowerLimitNotFoundResponse:
      description: Import power limit not found.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/NotFoundException'
    HistoricalPowerLimitsResponse:
      description: Historical import power limits returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/HistoricalPowerLimits'
    HistoricalPowerLimitsNotFoundResponse:
      description: Historical import power limits not found.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/NotFoundException'
    NotFoundErrorResponse:
      description: Entity Not found.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/NotFoundException'
    JobNotFoundResponse:
      description: Job or Gateway not found
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/NotFoundException'
    GatewayNotFoundResponse:
      description: Gateway Not found
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/NotFoundException'
    SystemNotFoundResponse:
      description: System not found
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/NotFoundException'
    CapacityTariffResponse:
      description: Capacity tariff returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/CapacityTariff'
    DeleteCapacityTariffRecommendationResponse:
      description: Recommended value deleted successfully.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/CapacityTariff'
    DeletePeakPowerResponse:
      description: Peak-power deleted successfully.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/CapacityTariff'
    SystemCreated:
      description: The created system.
      content:
        application/vnd.gridx.v2+json:
          schema:
            allOf:
              - $ref: '#/components/schemas/SystemWithoutProductOption'
              - $ref: '#/components/schemas/EmbeddedAccounts'
    ConflictExceptionResponse:
      description: Resource already exists
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/ConflictException'
    TimeOfUseSettingsResp:
      description: Ok
      content:
        application/vnd.gridx.v2+json:
          schema:
            allOf:
              - $ref: '#/components/schemas/TimeOfUseSettings'
              - required:
                  - enabled
                  - enabledBatteryChargeFromGrid
                  - enabledDischargeFlexibilityToGrid
    NotFoundExceptionResponse:
      description: Entity Not found.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/NotFoundException'
    ListPoliciesResponse:
      description: List of policies.
      content:
        application/vnd.gridx.v2+json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/PolicyDocument'
    CreatePolicyDocumentResponse:
      description: Created policy document.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/PolicyDocument'
    PolicyDocumentResponse:
      description: Policy Document
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/PolicyDocument'
    GetDevicesResponse:
      description: SPINE devices returned.
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/devices'
    DeviceNotFoundResponse:
      description: Device Not found
      content:
        application/vnd.gridx.v2+json:
          schema:
            $ref: '#/components/schemas/NotFoundException'
    GetUserPolicyDocumentsResponse:
      description: The user's policies.
      content:
        application/vnd.gridx.v2+json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/PolicyDocument'
    UserAccounts:
      description: List of the accounts the user can access.
      content:
        application/vnd.gridx.v2+json:
          schema:
            type: array
            items:
              $ref: '#/components/schemas/UserAccount'
  securitySchemes:
    BearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
    BearerAuthentication:
      type: http
      scheme: bearer
  schemas:
    PlatformMapping:
      title: PlatformMapping
      description: >-
        Represents a 1:1 mapping from a XENON account to a Platform workspace
        and application.
      type: object
      required:
        - applicationID
        - workspaceID
        - accountID
      properties:
        accountID:
          type: string
          format: uuid
          example: 6dd0a658-5828-4d30-bc65-a03c6d6e425f
          readOnly: true
          description: Unique identifier of a XENON account.
        applicationID:
          type: string
          format: uuid
          example: 7af138d7-717d-486e-8ad1-1d4ed4b1669e
          description: Unique identifier of the corresponding platform application.
        workspaceID:
          type: string
          format: uuid
          example: 2549665c-5067-49ad-af6a-9c74e74095e8
          description: Unique identifier of the corresponding platform workspace.
    ScanConfigurationSet:
      title: ScanConfiguration
      description: ScanConfiguration determines the behavior of a scan.
      type: object
      properties:
        configuration:
          description: The names of the scanners in this configuration.
          type: array
          items:
            type: string
    ScanConfiguration:
      title: ScanConfiguration
      description: ScanConfiguration determines the behavior of a scan.
      type: object
      properties:
        accountID:
          type: string
          format: uuid
          example: 6dd0a658-5828-4d30-bc65-a03c6d6e425f
          description: The account ID the configuration belongs to.
          readOnly: true
        configuration:
          description: The names of the scanners in this configuration.
          type: array
          items:
            type: string
        createdAt:
          type: string
          format: date-time
          readOnly: true
          description: Date when the configuration was created.
        updatedAt:
          type: string
          format: date-time
          readOnly: true
          description: Date when the configuration was updated the last time.
    ChargePlan:
      title: ChargePlan
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: 49a4f165-8233-426b-a1a4-e569665a25dd
          readOnly: true
        name:
          type: string
        description:
          type: string
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
    RFIDTag:
      title: RFIDTag
      type: object
      properties:
        tagID:
          type: string
          format: uuid
          example: 49a4f165-8233-426b-a1a4-e569665a25dd
          readOnly: true
        accountID:
          type: string
          format: uuid
          example: 49a4f165-8233-426b-a1a4-e569665a25dd
          readOnly: true
        name:
          type: string
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
    RFIDTagStrict:
      allOf:
        - $ref: '#/components/schemas/RFIDTag'
        - additionalProperties: false
    NotificationsRule:
      title: NotificationsRule
      type: object
      properties:
        id:
          type: string
          format: uuid
          example: 49a4f165-8233-426b-a1a4-e569665a25dd
          readOnly: true
        accountID:
          type: string
          format: uuid
          example: 49a4f165-8233-426b-a1a4-e569665a25dd
          readOnly: true
        userID:
          type: string
          format: uuid
          example: 49a4f165-8233-426b-a1a4-e569665a25dd
          readOnly: true
        eventType:
          type: string
        filters:
          type: array
          items:
            $ref: '#/components/schemas/Filter'
        notificationType:
          $ref: '#/components/schemas/NotificationType'
        locale:
          type: string
    NotificationsRuleStrict:
      allOf:
        - $ref: '#/components/schemas/NotificationsRule'
        - additionalProperties: false
    Filter:
      title: Filter
      type: object
      properties:
        name:
          type: string
        condition:
          type: string
    NotificationType:
      title: NotificationType
      type: object
      properties:
        email:
          type: object
          properties:
            address:
              type: string
        sms:
          type: object
          properties:
            phonenumber:
              type: string
        dashboardNotification:
          type: object
          properties:
            userID:
              type: string
        webhook:
          type: object
          properties:
            targetURL:
              type: string
        mobile:
          type: object
          properties:
            appName:
              type: string
            os:
              type: string
            deviceToken:
              type: string
    File:
      title: File
      description: |
        Used to represent a bunch of data related to files in the S3 bucket.
      type: object
      properties:
        key:
          type: string
        size:
          type: number
        modified:
          type: string
          format: date-time
      required:
        - key
        - size
        - modified
    FileCreate:
      allOf:
        - $ref: '#/components/schemas/File'
        - type: object
          properties:
            link:
              description: URI location of the uploaded file
              type: string
          required:
            - link
    EnergyTariff:
      title: Energy Tariff
      type: object
      properties:
        id:
          type: string
          description: Unique ID to identify the energy tariff.
          format: uuid
          example: fc8ee525-669f-45de-9bca-bf5a51829d33
          readOnly: true
        name:
          type: string
          description: Name of the energy tariff, to be chosen freely.
          example: E.ON Strom
        createdAt:
          type: string
          description: >-
            Time at which the tariff was created in UTC using the RFC3339
            format.
          example: '2021-10-10T23:20:50Z'
          format: date-time
          readOnly: true
        periods:
          type: array
          items:
            $ref: '#/components/schemas/EnergyTariffPeriod'
    EnergyTariffStrict:
      allOf:
        - $ref: '#/components/schemas/EnergyTariff'
        - additionalProperties: false
    EnergyTariffPeriod:
      title: Energy Tariff Period
      type: object
      properties:
        day:
          type: integer
          description: Numeric day of week. 1 means Monday and 7 means Sunday.
          example: 1
        from:
          type: integer
          description: >-
            Time of day in seconds at which the period starts, e.g. 07:00 =
            7*60*60 = 25200.
          example: 25200
        to:
          type: integer
          description: >-
            Time of day in seconds at which the period ends, e.g. 20:00 =
            20*60*60 = 72000.
          example: 72000
        feedinPrice:
          type: number
          format: double
          description: >-
            Price in cents per kWh (ct/kWh) for fed in energy in the period
            [from, to).
        offtakePrice:
          type: number
          format: double
          description: >-
            Price in cents per kWh (ct/kWh) for consumed energy in the period
            [from, to).
    EnergyMarketData:
      title: Energy Market Data
      type: object
      properties:
        priceUnit:
          type: string
          description: Currency unit which the prices are (ct/kWh).
          example: EUR/MWh
        averagePriceDay:
          type: number
          format: double
          description: Average price of the second to last day in EUR/MWh.
          example: 33.6
        periodStart:
          type: string
          description: Starting date at which the prices are fetched in RFC3339 format.
          example: '2020-09-24T00:00:00Z'
        periodEnd:
          type: string
          description: Ending date at which the prices are fetched in RFC3339 format.
          example: '2022-09-27T00:00:00Z'
        totalPrices:
          description: >
            Contains an array of arrays in the format [time, price].


            The fetched prices are in the following order:

            * Average prices for each day between [PeriodStart,
            SecondToLastDay].

            * Prices for the second to last day from the given interval with
            resolution 1h.

            * Price for the last day of the given interval with resolution 1h.
          type: array
          items:
            type: array
            items:
              oneOf:
                - type: string
                - type: number
          example:
            - - '2022-09-25T22:00:00Z'
              - 2.5
            - - '2022-09-25T23:00:00Z'
              - 1
            - - '2022-09-26T00:00:00Z'
              - 2
            - - '2022-09-26T01:00:00Z'
              - 3
            - - '2022-09-26T02:00:00Z'
              - 4
            - - '2022-09-26T23:00:00Z'
              - 1
            - - '2022-09-27T00:00:00Z'
              - 2
            - - '2022-09-27T01:00:00Z'
              - 3
            - - '2022-09-27T02:00:00Z'
              - 4
    GeneralException:
      title: General Exception
      description: Represents a general error structure returned by our REST API.
      type: object
      properties:
        message:
          type: string
          description: Message represents the message reported to the user.
        details:
          type: array
          description: |
            Details represents detail information for the user to fix this
            problem
          items:
            type: string
      required:
        - message
    NotFoundException:
      readOnly: true
      allOf:
        - $ref: '#/components/schemas/GeneralException'
        - title: ClientError - Not Found
          description: Not Found indicates that the entity was not found.
          example:
            message: Not Found
    InvalidException:
      readOnly: true
      allOf:
        - $ref: '#/components/schemas/GeneralException'
        - title: ClientError - Validation
          description: |
            Validation indicates that the request body contains fields which
            does not pass the validation.
          type: object
          required:
            - message
            - details
          example:
            message: Validation failed
            details:
              - email is not valid
    InternalException:
      readOnly: true
      allOf:
        - $ref: '#/components/schemas/GeneralException'
        - title: ServerSideError - Internal Server Error
          description: Internal Server Error
          example:
            message: Internal Server Error
    AccountSolution:
      type: string
      description: >
        Represents the supported solutions within the account:

        - HOME if the account contains household-like systems. 

        - CHARGE if the account is used solely for charging station fleet
        management.

        - GENERAL if unsure what the account should contain or if it's a mix of
        multiple solutions.

        - SMART_DISTRICT if the account is used solely for smart district
        management.

        If not set, the parent account's solution will be assumed.
      enum:
        - HOME
        - CHARGE
        - GENERAL
        - SMART_DISTRICT
        - MICROGRID
        - HOME_VIRTUAL_METERING
        - COMMERCIAL
        - CUSTOM_P2P
    AbstractAccount:
      title: Account
      description: >
        An account describes an organizational unit to manage access to systems
        for one or multiple users.


        This is the base type for the more concrete usages and not used directly
        within operations.
      type: object
      properties:
        name:
          type: string
          example: John Doe
          description: >-
            Name of the account, can be chosen freely but should be kept terse
            and descriptive.
          minLength: 1
          maxLength: 256
        email:
          type: string
          format: email
          example: john@doe.com
          description: >-
            The email field of the account can optionally be chosen e.g. for
            contact purposes (in order to reach the responsible person for the
            account).
          maxLength: 256
        solution:
          $ref: '#/components/schemas/AccountSolution'
    AccountKind:
      type: string
      enum:
        - b2b
        - end-user
      description: >-
        If b2b, the account is a regular account. If end-user, the account is a
        customer account which contains just one user.
    AbstractLocation:
      type: object
      properties:
        city:
          description: The city of the location.
          type: string
          example: Aachen
        country:
          description: The country of the location.
          type: string
          example: Germany
        addressLine1:
          description: |
            First line of the location's address, typically containing the 
            main information such as the street name and house number.
          type: string
          example: Oppenhoffallee 143
        addressLine2:
          description: >
            Second line of the location's address, typically containing
            additional 

            information such as apartment numbers, suite numbers, or other
            details 

            that can help in identifying the exact location of the address.
          type: string
        addressLine3:
          description: >
            Third line of the location's address, typically containing any
            other 

            details that can help in identifying the exact location of the
            address.
          type: string
        addressLine4:
          description: >
            Fourth line of the location's address, typically containing any
            other 

            details that can help in identifying the exact location of the
            address.
          type: string
        timeZone:
          description: The TZ Identifier of the location's timezone.
          type: string
          example: Europe/Berlin
          readOnly: true
    Address:
      title: Address
      description: Represents a physical address of a customer.
      allOf:
        - $ref: '#/components/schemas/AbstractLocation'
        - type: object
          properties:
            postalcode:
              description: The postal code of the location.
              type: string
              example: '52062'
            region:
              description: The region of the address.
              type: string
            telephone:
              description: The telephone number of the customer.
              type: string
    Account:
      title: Account
      description: >
        An account describes an organizational unit to manage access to systems
        for one or multiple users.
      type: object
      readOnly: true
      allOf:
        - $ref: '#/components/schemas/AbstractAccount'
        - properties:
            id:
              type: string
              format: uuid
              example: 49a4f165-8233-426b-a1a4-e569665a25dd
              description: Uniquely identifies the account.
            parentID:
              type: string
              format: uuid
              example: 19a4f165-8233-426b-a1a4-e569665a25dd
              description: >-
                Parent of the account for a tree-like account structure. Only
                the root account does not have a parent ID.
            createdAt:
              type: string
              format: date-time
              description: Specifies when the account was created.
            updatedAt:
              type: string
              format: date-time
              description: Specifies when the account was updated.
            systemsCount:
              type: integer
              description: SystemCount is the number of systems assigned to this account
              example: 1
            kind:
              $ref: '#/components/schemas/AccountKind'
            mainAddress:
              $ref: '#/components/schemas/Address'
            customization:
              description: Customization can be used to store arbitrary data.
          required:
            - id
            - createdAt
            - updatedAt
    ForbiddenException:
      readOnly: true
      allOf:
        - $ref: '#/components/schemas/GeneralException'
        - title: UnauthorizedError - Forbidden Error
          description: Forbidden Error
          example:
            message: Bad credentials
    AccountUpdate:
      allOf:
        - $ref: '#/components/schemas/AbstractAccount'
        - properties:
            kind:
              $ref: '#/components/schemas/AccountKind'
            customization:
              description: Customization can be used to store arbitrary data.
            mainAddress:
              $ref: '#/components/schemas/Address'
    AccountUpdateStrict:
      allOf:
        - $ref: '#/components/schemas/AccountUpdate'
        - additionalProperties: false
    BadRequestException:
      readOnly: true
      allOf:
        - $ref: '#/components/schemas/GeneralException'
        - title: ClientError - Bad Request
          description: |
            Bad Request indicates that the request body is not a valid JSON or
            it contains a invalid json type.
          example:
            message: Problems parsing JSON
    BadGateway:
      readOnly: true
      allOf:
        - $ref: '#/components/schemas/GeneralException'
        - title: BadGatewayError
          description: Indicates that there has been an error from an upstream server.
          example:
            message: Bad Gateway
    AbstractAPIToken:
      title: APIToken
      description: >
        API Tokens can be used as an alternative to Bearer Authentication for
        making requests.

        They are instead used as an in-header API Key.
      type: object
      properties:
        description:
          type: string
          example: My api token
        expiresAt:
          type: string
          format: date-time
          description: >
            Time at which the token expires in UTC using the RFC3339 format.


            **WARNING** - if `expiresAt` is not set, the token will never
            expire. We strongly recommend

            that you set an expiration date to help keep your account and
            information secure.
          example: '2021-11-10T23:00:00Z'
    APIToken:
      allOf:
        - $ref: '#/components/schemas/AbstractAPIToken'
        - properties:
            id:
              type: string
              format: uuid
              example: fc8ee525-669f-45de-9bca-bf5a51829de3
              readOnly: true
            createdAt:
              type: string
              description: >-
                Time at which the token was created in UTC using the RFC3339
                format.
              example: '2021-10-10T23:20:50Z'
              format: date-time
              readOnly: true
          required:
            - id
            - createdAt
    AbstractPolicyGroup:
      title: Policy Group
      description: >
        A policy group describes the permissions of a group.


        This is the base type for the more concrete usages and not used directly
        within operations.
      type: object
      properties:
        name:
          type: string
          description: Name of the policy group.
          example: group name
        description:
          type: string
          description: Description of the group, omitted if empty
          example: Group provides read-access to accounts
    PolicyGroup:
      title: Policy Group
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractPolicyGroup'
        - properties:
            id:
              type: string
              format: uuid
              description: Unique identifier of the policy group.
              example: 97874c1b-d073-4b06-bf01-a1497fbe1146
              readOnly: true
            accountID:
              type: string
              format: uuid
              description: Unique identifier of the creator account.
              example: 97874c1b-d073-4b06-bf01-a1497fbe1146
              readOnly: true
            createdAt:
              description: >-
                Time at which the policy group was created in UTC (RFC 3339
                format).
              type: string
              format: date-time
              example: '2019-11-06T15:33:00Z'
              readOnly: true
            updatedAt:
              description: >-
                Time at which the policy group was last updated in UTC (RFC 3339
                format).
              type: string
              format: date-time
              example: '2019-11-08T23:20:50Z'
              readOnly: true
            userCount:
              type: integer
              description: Amount of users that are in this group.
              example: 10
              readOnly: true
          required:
            - id
            - name
            - accountID
            - createdAt
            - updatedAt
    Language:
      title: Language
      description: The language information of the user.
      type: object
      required:
        - tag
        - name
        - nameNative
      properties:
        tag:
          type: string
          description: >
            Tag is the IETF language tag's primary identifier for this language.


            See [here](https://tools.ietf.org/rfc/bcp/bcp47.txt) and the example
            below for more information.
          example: de_DE
        name:
          type: string
          description: The name of the language in English.
          example: German
          readOnly: true
        nameNative:
          type: string
          description: The name of the language in the language itself.
          example: Deutsch
          readOnly: true
    UserWithoutAuth:
      title: User
      description: >
        Represents a user of the Xenon platform.


        This is the base type for the more concrete usages and not used directly
        within operations.
      type: object
      required:
        - id
        - email
        - createdAt
        - updatedAt
      properties:
        id:
          description: Unique identifier of the user.
          type: string
          format: uuid
          example: 43a4f165-8233-426b-a1a4-e569665a25dd
          readOnly: true
        accountID:
          description: Unique identifier of the account that the user belongs to.
          type: string
          format: uuid
          example: 6dd0a658-5828-4d30-bc65-a03c6d6e425f
          readOnly: true
        newPassword:
          description: Used to set a new password for the user.
          type: string
          writeOnly: true
        loginsCount:
          description: Number of user logins.
          type: integer
          readOnly: true
        mfaEnabled:
          description: Indicates whether MFA (Multi-Factor Authentication) is enabled.
          type: boolean
          readOnly: true
        mfaReset:
          description: >-
            Can be set to true if MFA (Multi-Factor Authentication) needs to to
            be reset. This will remove the MFA.
          type: boolean
          writeOnly: true
        createdAt:
          description: Time at which the user was created in UTC using the RFC3339 format.
          type: string
          format: date-time
          example: '2009-11-10T23:20:50Z'
          readOnly: true
        updatedAt:
          description: >-
            Time at which the user was last updated in UTC using the RFC3339
            format.
          type: string
          format: date-time
          example: '2009-11-10T23:20:50Z'
          readOnly: true
        fullName:
          description: >-
            Full name of the user typically consisting of first name and last
            name.
          type: string
          example: John Doe
        email:
          description: The email address of the user that is used for login.
          type: string
          format: email
          example: john@doe.com
        groups:
          description: >-
            Policy groups attached to this user which determine the effective
            permissions through policies.
          type: array
          items:
            $ref: '#/components/schemas/PolicyGroup'
        mainAddress:
          $ref: '#/components/schemas/Address'
        language:
          $ref: '#/components/schemas/Language'
    User:
      type: object
      allOf:
        - $ref: '#/components/schemas/UserWithoutAuth'
        - required:
            - auth
    OrganizationalAPIToken:
      title: OrganizationalAPIToken
      allOf:
        - $ref: '#/components/schemas/APIToken'
        - properties:
            user:
              $ref: '#/components/schemas/User'
            userID:
              type: string
              format: uuid
              description: >-
                Reference to the user to which the API token belongs. Can be
                used to set the token's "scope" by assigning groups to the user.
              example: 123ee525-669f-45de-9bca-bf5a51829de3
          required:
            - user
            - userID
    APITokenCreation:
      allOf:
        - $ref: '#/components/schemas/AbstractAPIToken'
    OrganizationalAPITokenCreation:
      title: OrganizationalAPITokenCreation
      allOf:
        - $ref: '#/components/schemas/APITokenCreation'
        - type: object
          properties:
            email:
              type: string
              description: >-
                Used to specify the email address associated with the user
                responsible for the organizational token upon its creation
                (account email is used by default).
              example: john@doe.com
            groups:
              type: array
              description: >-
                Used to specify the permissions assigned to the organizational
                token.
              items:
                type: string
                description: Unique identifier of the policy group.
                example: 97874c1b-d073-4b06-bf01-a1497fbe1146
    OrganizationalAPITokenCreationStrict:
      allOf:
        - $ref: '#/components/schemas/OrganizationalAPITokenCreation'
        - additionalProperties: false
    OrganizationalAPITokenWithSecret:
      title: OrganizationalAPITokenWithSecret
      allOf:
        - $ref: '#/components/schemas/OrganizationalAPIToken'
        - properties:
            token:
              type: string
              description: >
                This token can be used for authenticating further requests as an
                alternative to Bearer Authentication.


                Example: Set the header field `Authorization` to `Token
                gxo_SUDJmIoABC1337JiAuKBZuauC0ff331HNPR0`. 

                To set the permissions of it, you can assign a group to the
                newly created associated organizational user, see `userID`.


                **ATTENTION**: Please keep the token secret and treat it like a
                password! The token is only available immediately after creation
                and can not be retrieved again afterwards.
              example: gxo_SUDJmIoABC1337JiAuKBZuauC0ff331HNPR0
          required:
            - token
    OrganizationalAPITokenStrict:
      allOf:
        - $ref: '#/components/schemas/OrganizationalAPIToken'
        - additionalProperties: false
    AccountKindWithDefault:
      type: string
      enum:
        - b2b
        - end-user
      default: b2b
      description: >-
        If b2b, the account is a regular account. If end-user, the account is a
        customer account which contains just one user.
    AccountCreate:
      allOf:
        - $ref: '#/components/schemas/AbstractAccount'
        - properties:
            parentID:
              type: string
              format: uuid
              example: 19a4f165-8233-426b-a1a4-e569665a25dd
              description: >-
                Parent of the account for a tree-like account structure. If not
                set, defaults to the authenticated account.
            kind:
              $ref: '#/components/schemas/AccountKindWithDefault'
            groups:
              type: array
              description: >-
                the IDs of the policy groups that the account should be assigned
                to.
              example:
                - 532365fc-5a0e-4323-bc66-4ce9f1308480
              items:
                type: string
                format: uuid
            customization:
              description: Customization can be used to store arbitrary data.
            mainAddress:
              $ref: '#/components/schemas/Address'
    AccountCreateStrict:
      allOf:
        - $ref: '#/components/schemas/AccountCreate'
        - additionalProperties: false
    MoveAccount:
      title: Move Account
      type: object
      required:
        - targetID
      properties:
        targetID:
          description: >-
            AccountID of the target account that the account should be moved
            into.
          type: string
          format: uuid
          example: 49a4f165-8233-426b-a1a4-e569665a25dd
    MoveAccountStrict:
      allOf:
        - $ref: '#/components/schemas/MoveAccount'
        - additionalProperties: false
    SystemSolution:
      type: string
      description: |
        Represents the solution that the system uses:
        - HOME if the system is for a household. 
        - CHARGE if the system is for charging station fleet management.
      enum:
        - HOME
        - CHARGE
        - GENERAL
        - SMART_DISTRICT
        - MICROGRID
        - HOME_VIRTUAL_METERING
        - COMMERCIAL
        - CUSTOM_P2P
    SystemCurtailmentStrategy:
      type: string
      description: |
        The curtailment strategy describes how appliances shall be curtailed.
          * SERIES: Appliances get in order as much as possible; order: first order by least number of energy importing phases and second order lexicographically by appliance ID.
          * EQUALLY: Every appliance gets equally (fair) curtailed.
          * PROPORTIONAL: Proportional according to the desired energy to charge (current SoC, desired SoC and max. energy) and the desired charging time set via the API.
      enum:
        - SERIES
        - EQUALLY
        - PROPORTIONAL
    Location:
      title: Location
      description: Represents a GPS location with longitude and latitude.
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractLocation'
        - type: object
          properties:
            countryCode:
              type: string
              description: Country code in ISO 3166-1 alpha-2.
              example: DE
              enum:
                - AF
                - AX
                - AL
                - DZ
                - AS
                - AD
                - AO
                - AI
                - AQ
                - AG
                - AR
                - AM
                - AW
                - AU
                - AT
                - AZ
                - BS
                - BH
                - BD
                - BB
                - BY
                - BE
                - BZ
                - BJ
                - BM
                - BT
                - BO
                - BQ
                - BA
                - BW
                - BV
                - BR
                - IO
                - BN
                - BG
                - BF
                - BI
                - CV
                - KH
                - CM
                - CA
                - KY
                - CF
                - TD
                - CL
                - CN
                - CX
                - CC
                - CO
                - KM
                - CG
                - CD
                - CK
                - CR
                - CI
                - HR
                - CU
                - CW
                - CY
                - CZ
                - DK
                - DJ
                - DM
                - DO
                - EC
                - EG
                - SV
                - GQ
                - ER
                - EE
                - SZ
                - ET
                - FK
                - FO
                - FJ
                - FI
                - FR
                - GF
                - PF
                - TF
                - GA
                - GM
                - GE
                - DE
                - GH
                - GI
                - GR
                - GL
                - GD
                - GP
                - GU
                - GT
                - GG
                - GN
                - GW
                - GY
                - HT
                - HM
                - VA
                - HN
                - HK
                - HU
                - IS
                - IN
                - ID
                - IR
                - IQ
                - IE
                - IM
                - IL
                - IT
                - JM
                - JP
                - JE
                - JO
                - KZ
                - KE
                - KI
                - KP
                - KR
                - KW
                - KG
                - LA
                - LV
                - LB
                - LS
                - LR
                - LY
                - LI
                - LT
                - LU
                - MO
                - MG
                - MW
                - MY
                - MV
                - ML
                - MT
                - MH
                - MQ
                - MR
                - MU
                - YT
                - MX
                - FM
                - MD
                - MC
                - MN
                - ME
                - MS
                - MA
                - MZ
                - MM
                - NA
                - NR
                - NP
                - NL
                - NC
                - NZ
                - NI
                - NE
                - NG
                - NU
                - NF
                - MK
                - MP
                - 'NO'
                - OM
                - PK
                - PW
                - PS
                - PA
                - PG
                - PY
                - PE
                - PH
                - PN
                - PL
                - PT
                - PR
                - QA
                - RE
                - RO
                - RU
                - RW
                - BL
                - SH
                - KN
                - LC
                - MF
                - PM
                - VC
                - WS
                - SM
                - ST
                - SA
                - SN
                - RS
                - SC
                - SL
                - SG
                - SX
                - SK
                - SI
                - SB
                - SO
                - ZA
                - GS
                - SS
                - ES
                - LK
                - SD
                - SR
                - SJ
                - SE
                - CH
                - SY
                - TW
                - TJ
                - TZ
                - TH
                - TL
                - TG
                - TK
                - TO
                - TT
                - TN
                - TR
                - TM
                - TC
                - TV
                - UG
                - UA
                - AE
                - GB
                - US
                - UM
                - UY
                - UZ
                - VU
                - VE
                - VN
                - VG
                - VI
                - WF
                - EH
                - YE
                - ZM
                - ZW
            postalCode:
              description: The postal code of the location.
              type: string
              example: '52062'
            longitude:
              description: >-
                The geographic coordinate that specifies the east–west position
                of the location.
              type: number
              example: 6.09294299
              readOnly: true
            latitude:
              description: >-
                The geographic coordinate that specifies the north–south
                position of the location.
              type: number
              example: 50.77441934
              readOnly: true
    MetadataWizard:
      title: Wizard
      type: object
      description: Represents the metadata to keep track of the current wizard step.
      required:
        - step
      properties:
        step:
          type: string
          description: Represents the last completed wizard step.
    DateTime:
      description: Date time combination in RFC3339 format.
      type: string
      format: date-time
      example: '2020-09-21T00:00:00Z'
    SyncEntitySettings:
      title: SyncEntitySettings
      type: object
      description: SyncEntitySettings configures entity synchronisation parameters.
      properties:
        syncInterval:
          type: number
          nullable: true
          format: double
          description: >-
            SyncInterval defines the period in seconds for data to be
            synchronized between gridBox and cloud DER API.
        ttl:
          type: number
          nullable: true
          format: double
          description: TTL defines the time to live in seconds for entity.
        disabled:
          type: boolean
          description: Disabled disables the sync of entities.
    DerAPISettings:
      title: DerAPISettings
      type: object
      description: DerAPISettings represents the metadata related to DER API configuration.
      properties:
        enabledCloudAPI:
          type: boolean
          nullable: true
          description: EnabledCloudAPI enables assets control with cloud DER API.
        constraints:
          $ref: '#/components/schemas/SyncEntitySettings'
        flexibilities:
          $ref: '#/components/schemas/SyncEntitySettings'
    MetadataEMS:
      title: MetadataEMS
      type: object
      description: MetadataEMS represents the energy management allowances.
      properties:
        agreedEMSTerms:
          type: boolean
          nullable: true
          description: AgreedEMSTerms indicates if the customers accepts the ems terms.
        enabledEMS:
          type: boolean
          nullable: true
          description: EnabledEMS indicates if gridBox should activate the ems.
        agreedDynamicPVControlTerms:
          type: boolean
          nullable: true
          description: >-
            AgreedDynamicPVControlTerms indicates if the customer accepts the
            dynamic pc control terms.
        enabledDynamicPVControl:
          type: boolean
          nullable: true
          description: >-
            EnabledDynamicPVControl indicates if the gridBox should activate the
            dynamic pv control.
        agreedForecastBasedEMSTerms:
          type: boolean
          nullable: true
          description: >-
            AgreedForecastBasedEMSTerms indicates if the customer accepts the
            forecast-based EMS.
        enabledForecastBasedEMS:
          type: boolean
          nullable: true
          description: >-
            EnabledForecastBasedEMS indicates if the gridBox should activate the
            forecast-based EMS.
        agreedPriorityConfigurationTerms:
          type: boolean
          nullable: true
          description: >-
            AgreedPriorityConfigurationTerms indicates if the customer accepts
            the priority configuration terms.
        enabledPriorityConfiguration:
          type: boolean
          nullable: true
          description: >-
            EnabledPriorityConfiguration indicates if the gridBox should
            activate the priority configuration.
        agreedPowerManagementTerms:
          type: boolean
          nullable: true
          description: >-
            AgreedPowerManagementTerms indicates if the customer accepts the
            power management terms.
        enabledPowerManagement:
          type: boolean
          nullable: true
          description: >-
            EnabledPowerManagement indicates if the gridBox should activate the
            power management.
        enabledStaticPowerManagement:
          type: boolean
          nullable: true
          description: >-
            EnabledStaticPowerManagement indicates if the gridBox should
            activate the static power management.
        enabledPowerImportPeakOptimization:
          type: boolean
          nullable: true
          description: >-
            EnabledPowerImportPeakOptimization indicates if the gridBox should
            activate the 15min avg. energy optimization algorithm.
        powerImportPeakPerOptimizationInterval:
          type: number
          nullable: true
          format: double
          description: >-
            Describes the amount of imported energy in a 15 minutes interval in
            mVA.
        enabledPVSurplusChargeMode:
          type: boolean
          nullable: true
          description: >
            Indicates whether the gridBox should activate the system-wide PV
            surplus EV charging mode or not.


            The individual EV configuration charging mode always takes
            precedence.
        powerPVSurplusThreshold:
          type: number
          nullable: true
          format: double
          deprecated: true
          description: |
            Specifies the PV surplus charging threshold in mVA. 

            WARN: This field is deprecated and not supported any more.
        pVSurplusActiveAt:
          description: >-
            Specifies the time at which the PV surplus charging mode is
            activated.
          nullable: true
          allOf:
            - $ref: '#/components/schemas/DateTime'
        pVSurplusInactiveAt:
          description: >-
            Specifies the time at which the PV surplus charging mode is
            deactivated.
          nullable: true
          allOf:
            - $ref: '#/components/schemas/DateTime'
        enabledBatteryFullGridCharge:
          type: boolean
          nullable: true
          description: >-
            If enabled, the battery can be recharged from the grid with 100% of
            the maximum charging power. If disabled, the default value is 30%.
        enabledLessConstrainingSOCLimits:
          type: boolean
          nullable: true
          description: >-
            If enabled, allows applying both "more constraining" and "less
            constraining" SOC limits. If disabled, only the "most constraining"
            SOC limits are considered.
        derAPISettings:
          $ref: '#/components/schemas/DerAPISettings'
        enabledTimeOfUseOptimization:
          deprecated: true
          type: boolean
          nullable: true
          description: >
            Indicates if time of use optimization is enabled for the system.

            *Deprecated* - Use `systems/{systemID}/timeofuse/options` endpoint
            instead.
        disableAveragePmaxCalculation:
          type: boolean
          nullable: true
          description: >-
            Disables the average pMax calculation. It means EMS will not
            calculate average pMax and will get the default value instead.
        excludeApplianceTypes:
          description: >-
            Appliance types to be ignored by the EMS. Updating this field to an
            empty array clears it. **Please note that this currently requires
            the box to be restarted to take effect**.
          nullable: true
          type: array
          items:
            type: string
            enum:
              - HEAT_PUMP
        evChargingReallocationTolerance:
          description: >-
            Specifies the maximum power that can be drawn to charge an EV in
            case the PV surplus is not sufficient (in mVA).
          nullable: true
          type: number
          format: double
          example: 500000
    MetadataEnergy:
      title: Energy Metadata
      type: object
      description: represents the metadata related to the energy use case.
      properties:
        installer:
          type: string
          nullable: true
          description: Installer is the person who has installed the systems.
        norminalPower:
          type: number
          nullable: true
          description: >-
            The system's maximal power production in Wp (for historical reasons
            the word "norminal" is used instead of the correct term "nominal
            power").
        curtailment:
          type: number
          nullable: true
          description: >-
            Curtailment is the percentage of system's norminal power at which
            the pv inverters should stop feeding into the grid. (0-1)
        heatingSystem:
          type: string
          nullable: true
          description: HeatingSystem represents the type of the heating system.
        agreedEMSTerms:
          type: boolean
          nullable: true
          deprecated: true
          description: AgreedEMSTerms indicates if the customers accepts the ems terms.
        ems:
          $ref: '#/components/schemas/MetadataEMS'
        smartMeterInstallationTimestamp:
          nullable: true
          description: >-
            The time the smart meter has been installed (if any), in RFC3339
            format.
          allOf:
            - $ref: '#/components/schemas/DateTime'
    MetadataEnergySupplier:
      title: Energy Supplier
      type: object
      description: >-
        MetadataEnergySupplier represents the metadata related to energy
        supplier.
      properties:
        type:
          type: string
          nullable: true
          deprecated: true
          description: >-
            Type determines if gridX is the energy supplier. The value is either
            "GRIDX" or "OTHER".
          enum:
            - GRIDX
            - OTHER
        unitPrice:
          type: number
          nullable: true
          description: >-
            UnitPrice is unit price per kWh in EU cent. Deprecated - Use
            TariffV2 instead.
          deprecated: true
        installment:
          type: number
          nullable: true
          description: Installment is the monthly payment.
        baseFee:
          type: number
          nullable: true
          description: BaseFee is the monthly base fee.
        feedInTariff:
          type: number
          nullable: true
          description: >-
            FeedInTariff is the cost-based compensation in EUR cent for feeding
            in. Deprecated - Use TariffV2 instead.
          deprecated: true
        expectedConsumption:
          type: number
          nullable: true
          description: ExpectedConsumption is the expected annual consumption in kWh.
    MetadataSmartMeter:
      title: Smart Meter
      description: Represents the metadata to report if a smart meter has been installed.
      type: object
      properties:
        installed:
          type: boolean
          nullable: true
          description: Reports if the smart meter has been installed.
        hasInstallationDate:
          type: boolean
          nullable: true
          description: >-
            Reports if the provider has sent us a installation date that can be
            found in energy metadata.
    MetadataElectricVehicle:
      title: ElectricVehicle
      description: >-
        MetadataElectricVehicle represents the metadata related to the ev. It
        acts as a fallback EV, if no matching EV profile has been found. See
        ElectricVehicleProfiles.
      type: object
      properties:
        manufacturer:
          type: string
          nullable: true
          description: Represents the manufacturer of the EV.
        model:
          type: string
          nullable: true
          description: Represents the model of the EV.
        capacity:
          type: number
          nullable: true
          description: Represents the capacity of the EV in Wh.
        averageConsumption:
          type: number
          nullable: true
          description: Represents the average consumption of the EV in Wh/km.
        phasesCount:
          type: integer
          nullable: true
          description: Number of phases used for charging the EV (range 1-3).
          minimum: 1
          maximum: 3
    MetadataElectricVehicleProfile:
      title: ElectricVehicleProfile
      type: object
      description: >-
        MetadataElectricVehicleProfile represents the metadata related to the
        ev. It has more information like ChargingStationApplianceID which
        contains the ID of the charging station appliance the EV is assigned to.
      allOf:
        - $ref: '#/components/schemas/MetadataElectricVehicle'
        - properties:
            chargingStationApplianceID:
              type: string
              nullable: true
              format: uuid
              example: 6dd0a658-5828-4d30-bc65-a03c6d6e425f
              description: Represents the charging station appliance the EV is assigned to.
    SavingKind:
      description: >
        Saving due to various optimizations.


        * `CAPACITY_TARIFF_OPTIMIZATION` - Saving due to capacity tariff
        optimization

        * `SOLAR_GENERATION` - Saving due to optimal usage of solar generation

        * `TIME_OF_USE_OPTIMIZATION` - Saving due to optimization of day/night
        tariffs
      type: string
      enum:
        - CAPACITY_TARIFF_OPTIMIZATION
        - SOLAR_GENERATION
        - TIME_OF_USE_OPTIMIZATION
    SystemMetadata:
      title: Metadata
      description: Represents system's metadata.
      type: object
      properties:
        wizard:
          $ref: '#/components/schemas/MetadataWizard'
        energy:
          $ref: '#/components/schemas/MetadataEnergy'
        energySupplier:
          $ref: '#/components/schemas/MetadataEnergySupplier'
        smartMeter:
          $ref: '#/components/schemas/MetadataSmartMeter'
        electricVehicle:
          $ref: '#/components/schemas/MetadataElectricVehicle'
        electricVehicleProfiles:
          type: array
          items:
            $ref: '#/components/schemas/MetadataElectricVehicleProfile'
        availableSavings:
          type: array
          items:
            $ref: '#/components/schemas/SavingKind'
    AbstractSystem:
      title: System
      description: >
        A System represents the logical view of one gateway and its appliances.


        For example, a household can be represented as a system with a gateway
        such as a 

        gridBox, and its connected appliances.
      properties:
        name:
          type: string
          maxLength: 200
          description: Name of the System.
          example: gridX Headquarter
          nullable: true
        solution:
          $ref: '#/components/schemas/SystemSolution'
        labels:
          title: Labels
          description: >
            Labels help you organize your systems.


            Pass one or more labels to replace the set of labels. Send an empty
            array ([]) to clear all

            labels from your system.


            **Deprecated** - Labels will no longer be supported starting from
            01.03.2024
          deprecated: true
          type: array
          items:
            type: string
          example:
            - beta
            - sma
        priorities:
          description: Allows prioritisation of EMS functionalities by appliance type.
          type: array
          items:
            type: string
          example:
            - EV
            - BATTERY
        appliancePriorities:
          type: array
          description: >
            Allows prioritisation of EMS functionalities by appliance UUIDs.

            This option takes precendence over `priorities` field as it is more
            explicit.
          items:
            type: string
            format: uuid
        tariffID:
          type: string
          deprecated: true
          description: >
            TariffID is used to reference a (deprecated) time of use tariff for
            a system.


            **Deprecated** - Use TariffV2 instead.
        plan:
          description: >-
            Charge plan of the system. Must be one of the accounts assigned
            charge plans.
          type: string
        operatingSince:
          type: string
          format: date-time
          description: Date since when the system is active in RFC3339 format.
          example: '2017-12-23T10:15:40Z'
        curtailmentStrategy:
          $ref: '#/components/schemas/SystemCurtailmentStrategy'
        location:
          $ref: '#/components/schemas/Location'
        metadata:
          $ref: '#/components/schemas/SystemMetadata'
    PositivePower:
      title: Positive Power in Watt.
      type: integer
      format: int64
      minimum: 0
      example: 501
    AbstractEVChargingSchedule:
      title: EV Charging Schedule
      description: |
        An Electric Vehicle charging schedule represents an interval in which
        the electric vehicle is supposed to charge at a defined limit.
      type: object
      properties:
        from:
          type: string
          format: date-time
          example: '2021-11-04T00:00:00Z'
          description: |
            Specifies when the schedule should start in RFC3339 format.
        to:
          type: string
          format: date-time
          example: '2021-11-04T00:30:00Z'
          description: |
            Specifies when the schedule should end in RFC3339 format.
        limit:
          $ref: '#/components/schemas/PositivePower'
          description: >
            The maximum amount of power in Watts that will be used for
            scheduling charging in the interval [from, to].
          example: 75000
    EVChargingSchedule:
      title: EV Charging Schedule
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractEVChargingSchedule'
        - properties:
            id:
              type: string
              format: uuid
              example: ec4d0c89-a604-49ac-82f0-427f9cb42204
              readOnly: true
            updatedAt:
              type: string
              format: date-time
              readOnly: true
              description: Specifies when the schedule was updated the last time.
        - required:
            - id
            - from
            - to
            - limit
    AbstractGateway:
      title: Gateway
      description: |
        A gateway used to monitor and control appliances.

        For instance, our beloved gridbox is a gateway.
      type: object
      properties:
        name:
          type: string
          maxLength: 255
          description: Name of the gateway.
        debugModeUntil:
          type: string
          format: date-time
          description: Date until which debug messages are logged in RFC3339 format.
    GatewayType:
      type: string
      description: >
        Type of the gateway.


        **Deprecated** - Non-physical gateways will no longer be supported from
        01.03.2024. This field will consequently be removed.
      deprecated: true
      enum:
        - VIRTUAL
        - PHYSICAL
        - OTHER
    ConnectionStatus:
      title: Connection Status
      type: object
      readOnly: true
      properties:
        status:
          type: string
          description: |-
            Indicates the connection status. Is one of:
              * `AVAILABLE`: Gateway/Appliance has sent data in the last two minutes
              * `TEMPORARILY_UNAVAILABLE`: Gateway/Appliance has not sent data in the last two minutes
              * `UNAVAILABLE`: Gateway/Appliance has not sent data in the last 24 hours
          enum:
            - AVAILABLE
            - TEMPORARILY_UNAVAILABLE
            - UNAVAILABLE
        contactedAt:
          type: string
          format: date-time
          description: When the gateway/appliance has last contacted the gridX cloud.
      required:
        - status
    AdditionalIdentifier:
      title: Additional identifiers of the gridBox.
      description: Additional identifiers used by the gridBox.
      type: object
      properties:
        service:
          type: string
          readOnly: true
          description: >-
            The service this identifier is referring to, e.g the protocol used
            for the appliance-gridBox handshake
          example: EEBUS
        type:
          type: string
          readOnly: true
          description: The type of the identifier.
          example: SKI
          enum:
            - UNKNOWN
            - SKI
        identifier:
          type: string
          readOnly: true
          description: >-
            The actual identifier, e.g "SKI" used in the TLS certificate for the
            communication. If type is "SKI", it is hexadecimal-encoded.
    ScannerName:
      type: string
      description: The name of the scanner which searches for the appliance in the network.
      example: SMA_INVERTER_IGMP_HOST_DISCOVERY
      enum:
        - SMA_INVERTER_IGMP_HOST_DISCOVERY
        - SMA_INVERTER_ARP_HOST_DISCOVERY
        - SMA_METER
        - BCONTROL_METER
        - SOLAREDGE_INVERTER_METER_MODBUS_TCP
        - SOLAREDGE_INVERTER_METER_MODBUS_RTU
        - SOLARLOG_MONITOR
        - CUSTOMER_HOLFELDER_METER
        - CUSTOMER_HOLFELDER_INVERTER
        - E3DC_INVERTER_METER
        - KOSTAL_INVERTER
        - STUDER_INVERTER
        - FRONIUS_INVERTER
        - HUAWEI_INVERTER
        - KEBA_CHARGING_STATION
        - ECHARGE_CHARGING_STATION
        - INNOGY_CHARGING_STATION
        - ELECTRIS_METER
        - SOLARWATT_INVERTER_METER
        - ABL_CHARGING_STATION
        - SIEMENS_PAC_METER
        - JANITZA_METER
        - JANITZA_METER_RTU
        - EVTEC_CHARGING_STATION
        - HIKING_METER_RTU
        - EEBUS_FUEL_CELL_METER
        - KOSTAL_INVERTER_PLENTICORE
        - SONNENBATTERIE_UPNP
        - VIRTUAL_METER
        - MENNEKES_UPNP
        - ANYBUS_MBUS_CONVERTER_METER
        - EEBUS_GENERIC
        - SIMULATION_GENERIC
        - ALFEN_NG9XX_MODBUS_CHARGING_STATION
        - ALPITRONIC_HYPERCHARGER_MODBUS_CHARGING_STATION
        - MY_PV_AC_THOR_HEATER
        - COMPLEO_MODBUS_CHARGING_STATION
        - OCPP_CHARGING_STATION
        - BENDER_CHARGING_STATION
        - VOLTERION_REDOX_FLOW_BATTERY
        - XNET_METER
        - RSW_METER
        - SCHNEIDER_METER
        - INNOGY_MODBUS_CHARGING_STATION
        - MENNEKES_PREMIUM_MODBUS_CHARGING_STATION
        - PLPLANO_MODBUS_RTU_METER
        - HEIDELBERG_ENERGY_CONTROL_MODBUS_RTU_CHARGING_STATION
        - CARLO_GAVAZZI_MODBUS_RTU_METER
        - VESTEL_CHARGING_STATION
        - INNOTEC_HEAT_PUMP
        - WALLBE_MODBUS_CHARGING_STATION
        - EVBOX_MAX_CHARGING_STATION
        - ISKRAEMECO_METER
        - SUNGROW_MODBUS_INVERTER
        - WAGO_IO_DEVICE
        - GOE_CHARGING_STATION
        - XNET_CLOUD_HEAT_PUMP
        - XNET_CLOUD_GENERIC
        - LANDIS_GYR_METER
        - POWERDALE_CHARGING_STATION
        - EASTRON_SDM230_METER
        - EASTRON_SDM72DM_METER
        - ZUCCHETTI_CONNEXT_BOX
        - PLVARIO_ENERGY_METER_EM3
        - ABB_OPC_UA_CHARGING_STATION
        - DATA_LOGGER_DEVICE
        - POWERSIDE_METER
        - PPC_METER
        - RUTENBECK_TCR_IP4_IO_DEVICE
        - JEAN_MUELLER_PL_MULTI_METER
        - ENPHASE_ENVOY_S_GATEWAY
        - SOLAX_MODBUS_RTU_INVERTER
        - ALPHA_ESS_HI10_HYBRID_INVERTER
        - ZUCCHETTI_MODBUS_RTU_INVERTER
        - STIEBEL_ELTRON_MODBUS_TCP_HEAT_PUMP
        - MENNEKES_AMTRON_COMPACT_2S_MODBUS_RTU_CHARGING_STATION
        - SAIA_PCD1_E_LINE_HEAT_PUMP
        - SUNGROW_SG_MODBUS_INVERTER
        - SOLAX_MODBUS_TCP_INVERTER
        - PHOENIX_CONTACT_EM_PRO_METER
    Gateway:
      allOf:
        - $ref: '#/components/schemas/AbstractGateway'
        - properties:
            id:
              type: string
              format: uuid
              example: 6dd0a658-5828-4d30-bc65-a03c6d6e425f
              description: Unique identifier of a gateway.
              readOnly: true
            type:
              $ref: '#/components/schemas/GatewayType'
            createdAt:
              type: string
              format: date-time
              readOnly: true
              description: Date when the Gateway was created in RFC3339 format.
            updatedAt:
              type: string
              format: date-time
              readOnly: true
              description: Date when the Gateway was last updated in RFC3339 format.
            registeredAt:
              type: string
              format: date-time
              readOnly: true
              description: Date when the Gateway was first registered in RFC3339 format.
            connectionStatus:
              $ref: '#/components/schemas/ConnectionStatus'
            vendorID:
              description: >-
                ID of the vendor account to which the corresponding system is
                assigned.
              type: string
              format: uuid
              example: 6dd0a658-5828-4d30-bc65-a03c6d6e425f
            startcode:
              description: Code used to register a new gateway.
              type: string
              example: 39FDDF7D85BAAD2D
              pattern: ^[A-F0-9]{16}$
            manufacturer:
              description: Manufacturer of the gateway.
              type: string
              example: gridX
              readOnly: true
            model:
              description: Model of the gateway.
              type: string
              example: 2.00P-X
              readOnly: true
            serialnumber:
              description: Serial number of the gateway.
              type: string
              example: C083-200-000-000-199-P-X
              readOnly: true
            additionalIdentifiers:
              description: Additional identifiers used by the gateway.
              type: array
              items:
                $ref: '#/components/schemas/AdditionalIdentifier'
              readOnly: true
            scanners:
              type: array
              readOnly: true
              description: List of scanner names that are enabled for this gateway.
              items:
                $ref: '#/components/schemas/ScannerName'
            applianceComposition:
              type: array
              readOnly: true
              description: >-
                Appliance types that are connected to the gateway for overview
                purposes.
              example:
                - HEAT_PUMP
              items:
                type: string
          required:
            - id
            - type
            - startcode
            - connectionStatus
            - createdAt
            - updatedAt
    SystemWithoutProductOption:
      title: System
      description: >
        A System represents the logical view of one gateway and its appliances.
          
        For example, a household can be represented as a system with a gateway
        such as a 

        gridBox, and its connected appliances.
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractSystem'
        - properties:
            id:
              type: string
              format: uuid
              readOnly: true
              description: Unique identifier of a system.
              example: aa3e5a93-bb38-4b15-b7f2-af40daf3a1dc
            createdAt:
              type: string
              format: date-time
              readOnly: true
              description: Date when the system was created in RFC3339 format.
              example: '2017-12-22T14:20:50Z'
            updatedAt:
              type: string
              format: date-time
              readOnly: true
              description: Date when the system was last updated in RFC3339 format.
              example: '2017-12-24T08:33:00Z'
            chargingIntervals:
              type: array
              readOnly: true
              description: >-
                Displays charging intervals of the system's EV charging
                stations.
              items:
                $ref: '#/components/schemas/EVChargingSchedule'
            gateways:
              description: The gateways of which this system is comprised.
              type: array
              readOnly: true
              items:
                $ref: '#/components/schemas/Gateway'
            status:
              type: string
              readOnly: true
              enum:
                - UNDEFINED
                - OK
                - WARNING
                - ERROR
              description: |
                Status of the system: 
                  - OK: If there has been a successful heartbeat of an attached gateway recently.
                  - WARNING: If the last heartbeat of an attached gateway is a longer time but less than 24h ago.
                  - ERROR: If the last heartbeat of an attached gateway is longer than 24h ago. 
                  - UNEFINED: otherwise
    EmbeddedAccounts:
      title: Embedded accounts
      description: >
        Hierarchy of accounts the system belongs to, from the authenticated
        account down to the end customer's.
      type: object
      properties:
        accounts:
          type: array
          items:
            $ref: '#/components/schemas/Account'
          readOnly: true
    AbstractProductOption:
      title: Product Option
      description: >
        A product option describes a set of features whose access should be
        restricted from or granted to users of a system.


        Systems can be assigned a product option to manage their access to these
        features.


        This is the base type for the more concrete usages and not used directly
        within operations.
      type: object
      properties:
        name:
          type: string
          description: Name of the product option.
          example: Default Product Option
        description:
          type: string
          description: Describes the purpose of the product option.
    AbstractProductFunctionality:
      description: >
        A product functionality describes a feature.


        It is used to manage access to this feature via product options.


        This is the base type for the more concrete usages and not used directly
        within operations.
      type: object
      properties:
        name:
          type: string
          maxLength: 256
          description: Name of the product functionality.
          example: EV Manager
        hide:
          type: boolean
          description: >-
            Indicates whether the product functionality should be hidden or
            shown.
        description:
          type: string
          description: Describes the purpose of the product functionality.
    ProductFunctionality:
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractProductFunctionality'
        - properties:
            id:
              description: Unique identifier of the product functionality.
              type: string
              format: uuid
              example: 4e3392ce-ed94-4946-8a11-665e0443723e
          required:
            - id
            - name
            - hide
    ProductOption:
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractProductOption'
        - properties:
            id:
              description: Unique identifier of the product option.
              type: string
              format: uuid
              example: d5166f02-8b56-4200-90bd-35d3d17391b4
            accountID:
              description: Unique identifier of the account that owns the product option.
              type: string
              format: uuid
              example: d73b6749-2c32-4bca-ab73-50d8e3744edf
            isDefault:
              type: boolean
              description: >-
                Indicates whether the product option should be assigned by
                default to all systems of the owning account.
            functionalities:
              description: >-
                The default functionalities that a product option restricts
                access to. Deprecated - Use `showFunctionalities` and
                `hideFunctionalities` instead.
              type: array
              readOnly: true
              deprecated: true
              items:
                $ref: '#/components/schemas/ProductFunctionality'
            hideFunctionalities:
              readOnly: true
              description: >-
                The default functionalities that a product option restricts
                access to. Must be of type `hide=true`.
              type: array
              items:
                $ref: '#/components/schemas/ProductFunctionality'
            showFunctionalities:
              readOnly: true
              description: >-
                The extra functionalities that a product option grants access
                to. Must be of type `hide=false`.
              type: array
              items:
                $ref: '#/components/schemas/ProductFunctionality'
          required:
            - id
            - accountID
            - name
            - isDefault
            - functionalities
            - hideFunctionalities
            - showFunctionalities
    System:
      title: System
      description: >
        A System represents the logical view of one gateway and its appliances.


        For example, a household can be represented as a system with a gateway
        such as a 

        gridBox, and its connected appliances.
      allOf:
        - $ref: '#/components/schemas/SystemWithoutProductOption'
        - $ref: '#/components/schemas/EmbeddedAccounts'
        - properties:
            productOption:
              $ref: '#/components/schemas/ProductOption'
            productOptionUpdatedAt:
              description: >-
                Time at which the system's product option was last changed in
                RFC3339 format.
              type: string
              format: date-time
              readOnly: true
              example: '2009-11-10T23:20:50Z'
            tariffID:
              type: string
              format: uuid
          required:
            - id
            - name
            - createdAt
            - updatedAt
    SystemWithUsers:
      allOf:
        - $ref: '#/components/schemas/System'
        - properties:
            users:
              description: |
                The users belonging to this system.
                Only set if `embed` query parameter includes `user`.
              type: array
              readOnly: true
              items:
                $ref: '#/components/schemas/User'
    SystemAccountAssignment:
      title: System-Account assignment
      type: object
      required:
        - uuids
      properties:
        moveSystemsAndCustomers:
          description: >
            - `true`: Moves the system from the origin account to the target
            account (accountID parameter) and its parent accounts. The customers
            that belong to that account are also moved to the target account.

            - `false`: Assigns the system to the target account (accountID
            parameter) and its parent accounts.
          type: boolean
        moveVendorID:
          description: |
            `true` by default when moveSystemsAndCustomers is `true`.
              - `true`: Updates the vendorID of the gateway of the specified system to the target accountID.
              - `false`: Does not update the vendorID of the gateway of the specified system.
          type: boolean
        uuids:
          description: System IDs that will be moved to the target account.
          type: array
          items:
            type: string
            example: aa3e5a93-bb38-4b15-b7f2-af40daf3a1dc
    SystemAccountAssignmentStrict:
      allOf:
        - $ref: '#/components/schemas/SystemAccountAssignment'
        - additionalProperties: false
    SystemAccountUnAssignment:
      title: System-Account unassignment
      type: object
      required:
        - uuids
      properties:
        moveSystemsAndCustomers:
          description: >
            - `true`: Unassigns the system from the given account (accountID
            parameter). Moves the customer account to the parent account of the
            account the system is unassigned from (accountID parameter).

            - `false`: Unassigns the system from the given account (accountID
            parameter).
          type: boolean
        moveVendorID:
          description: |
            `true` by default when moveSystemsAndCustomers is `true`.

              - `true`: Updates the vendorID of the gateway of the specified system to the target accounts' parentID.
              - `false`: Does not update the vendorID of the gateway of the specified system.
          type: boolean
        uuids:
          description: System IDs that will be removed from the target account.
          type: array
          items:
            type: string
            example: aa3e5a93-bb38-4b15-b7f2-af40daf3a1dc
    PolicyDocumentAssign:
      title: Assign Policy Document to Account
      description: >
        Holds the data required to assign an existing policy document by its ID
        to an existing account.
      type: object
      required:
        - id
      properties:
        id:
          type: string
          format: uuid
          description: >-
            Unique identifier of the policy document to be assigned to the
            account.
          example: 97874c1b-d073-4b06-bf01-a1497fbe1146
    PolicyDocumentAssignStrict:
      allOf:
        - $ref: '#/components/schemas/PolicyDocumentAssign'
        - additionalProperties: false
    PolicyGroupCreate:
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractPolicyGroup'
        - properties:
            accountID:
              type: string
              format: uuid
              description: Unique identifier of the creator account.
              example: 97874c1b-d073-4b06-bf01-a1497fbe1146
              readOnly: true
            policies:
              type: array
              description: >-
                the ID's of the policy documents that the group should be
                assigned to.
              example:
                - 532365fc-5a0e-4323-bc66-4ce9f1308480
              items:
                type: string
                format: uuid
          required:
            - name
    PolicyGroupCreateStrict:
      allOf:
        - $ref: '#/components/schemas/PolicyGroupCreate'
        - additionalProperties: false
    AbstractCustomer:
      title: Customer
      description: Represents an end-customer user.
      type: object
      allOf:
        - properties:
            deliveryAddress:
              $ref: '#/components/schemas/Address'
            customerID:
              type: string
              description: Uniquely identifies the customer.
            meterID:
              type: string
            wizardCompleted:
              type: boolean
              description: True if the wizard has been completed.
            lastRequestAt:
              type: string
              format: date-time
              description: >-
                Specifies when the last request has been made by the customer.
                This field might not be always up-to-date and it might take some
                time for changes to be propagated.
              readOnly: true
    CustomerWithoutAuth:
      title: Customer
      description: Represents an end-customer user.
      type: object
      allOf:
        - $ref: '#/components/schemas/UserWithoutAuth'
        - $ref: '#/components/schemas/AbstractCustomer'
    PolicyGroupWithCustomers:
      allOf:
        - $ref: '#/components/schemas/PolicyGroup'
        - type: object
          properties:
            users:
              type: array
              items:
                $ref: '#/components/schemas/CustomerWithoutAuth'
    PolicyGroupUpdate:
      title: Policy Group Update
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractPolicyGroup'
    PolicyGroupUpdateStrict:
      allOf:
        - $ref: '#/components/schemas/PolicyGroupUpdate'
        - additionalProperties: false
    AbstractPolicyDocument:
      title: Policy Document
      description: >
        A policy document describes the permissions of the user which can be
        used for access management.
      type: object
      required:
        - name
        - version
      properties:
        name:
          type: string
          maxLength: 256
          description: Name of the policy.
          example: Default Policy
        version:
          type: string
          maxLength: 64
          description: Version of the policy.
          example: Default Policy
    AbstractPolicyStatement:
      title: Policy Statement
      description: >
        A policy statement grants or restricts the permission to perform an
        action.
      type: object
      required:
        - name
        - action
        - resource
        - fields
        - effect
      properties:
        id:
          type: string
          format: uuid
          description: Unique identifier of the policy statement.
          example: 97874c1b-d073-4b06-bf01-a1497fbe1146
        name:
          type: string
          description: Name of the policy statement.
        action:
          type: string
          description: >-
            The action that this statement represents. An action is an operation
            on a resource.
          example: groups:Create
        effect:
          type: string
          description: >-
            Whether this statement restricts or grants the permission to perform
            the described action.
          enum:
            - allow
            - deny
          example: allow
        fields:
          type: string
          description: >-
            Used for fine-grained control over request bodies, e.g. to
            allow/deny a certain field in the payload.
          example: '*'
        resource:
          type: string
          description: >
            Hierarchical structure over resources to control endpoint access.


            For instance, "accounts:*" means that the user can read/modify any
            account (represented by the wildcard '*').
          example: accounts:*:groups
    PolicyStatement:
      title: Policy Statement
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractPolicyStatement'
        - properties:
            id:
              type: string
              format: uuid
              description: Unique identifier of the policy statement.
              example: 97874c1b-d073-4b06-bf01-a1497fbe1146
              readOnly: true
            createdAt:
              type: string
              format: date-time
              description: >-
                Date when the policy statement was created in UTC (RFC 3339
                format).
              readOnly: true
            updatedAt:
              type: string
              format: date-time
              description: >-
                Date when the policy statement was last updated in UTC (RFC 3339
                format).
              readOnly: true
          required:
            - id
            - name
            - action
            - resource
            - fields
            - createdAt
    PolicyDocument:
      title: Policy Document
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractPolicyDocument'
        - properties:
            id:
              type: string
              readOnly: true
              format: uuid
              description: Unique identifier of the policy document.
              example: 97874c1b-d073-4b06-bf01-a1497fbe1146
            createdAt:
              type: string
              format: date-time
              description: Date when the policy was created in UTC (RFC 3339 format).
              readOnly: true
            updatedAt:
              type: string
              format: date-time
              description: Date when the policy was last updated in UTC (RFC 3339 format).
              readOnly: true
            statements:
              type: array
              items:
                $ref: '#/components/schemas/PolicyStatement'
          required:
            - id
            - statements
            - createdAt
            - updatedAt
    AbstractNotification:
      title: Notification
      type: object
      properties:
        eventType:
          type: string
          description: Type of the event that triggered the notification.
        systemID:
          type: string
          format: uuid
          description: Identifies the affected system.
          example: 49a4f165-8233-426b-a1a4-e569665a25dd
        content:
          type: string
          description: Textual content that is displayed within the dashboard.
        read:
          type: boolean
          description: >-
            If true, the message has been read by the user, otherwise it was not
            read yet.
        timestamp:
          type: string
          format: date-time
          description: >-
            Time at which the event with `eventType` was issued by the
            notification system in UTC in RFC3339 format.
    Notification:
      allOf:
        - $ref: '#/components/schemas/AbstractNotification'
        - properties:
            id:
              type: string
              format: uuid
              description: Uniquely identifies the notification.
              example: 49a4f165-8233-426b-a1a4-e569665a25dd
              readOnly: true
            userID:
              type: string
              format: uuid
              description: User ID of the recipient.
              example: 49a4f165-8233-426b-a1a4-e569665a25dd
              readOnly: true
            createdAt:
              type: string
              format: date-time
              description: >-
                Time at which the notification was created in UTC in RFC3339
                format.
              readOnly: true
            updatedAt:
              type: string
              format: date-time
              description: >-
                Time at which the notification was updated in UTC in RFC3339
                format.
              readOnly: true
          required:
            - id
            - userID
            - content
            - eventType
            - timestamp
            - read
            - createdAt
            - updatedAt
    NotificationStrict:
      allOf:
        - $ref: '#/components/schemas/Notification'
        - additionalProperties: false
    ApplianceConnectionStatus:
      title: Appliance connection status
      type: object
      readOnly: true
      required:
        - status
      properties:
        status:
          type: string
          description: >
            Indicates the connection status of an appliance.
                
            The connection status of an appliance is determined by the gateway.
            The gateway regularly

            sends the connection status of all connected appliances.


            It is one of:

            - `AVAILABLE`: Appliance was reported as available by the gateway.

            - `UNAVAILABLE`: Appliance was reported as unavailable by the
            gateway.

            - `UNKNOWN`: The gateway didn't report a status for the appliance.


            In case the connection status of the gateway this appliance belongs
            to is `TEMPORARILY_UNAVAILABLE` or `UNAVAILABLE`

            the status is always `UNAVAILABLE`. 
          enum:
            - AVAILABLE
            - UNAVAILABLE
            - UNKNOWN
        contactedAt:
          type: string
          format: date-time
          deprecated: true
          description: >
            No longer supported. 


            Will be set approximately to a value matching the status field.

            If the appliance is `AVAILABLE`, it will be the current datetime.

            If the appliance is `UNAVAILABLE`, it will be a datetime 24 hours in
            the past. 
    ApplianceStatus:
      description: >
        Status of the appliance. This field is set dynamically in the appliance
        handler.


        **Deprecated** - Use `ConnectionStatus` instead.
      type: string
      enum:
        - UNDEFINED
        - OK
        - WARNING
        - ERROR
      deprecated: true
    ApplianceType:
      type: string
      example: INVERTER
      description: >
        Describes the 'physical' type of the appliance.


        See `kind` for further distinction of the type in terms of the
        appliance's purpose/role,

        e.g. appliance with type=INVERTER and kind=BATTERY represents a battery
        inverter.
      x-go-type-skip-optional-pointer: true
    ApplianceInactive:
      type: boolean
    ApplianceName:
      type: string
      description: Name of the appliance.
    ApplianceReverseFlow:
      description: >
        If true, changes the energy flow's direction.


        If during installation the input/output wiring is mixed up, set it to
        true in order to compensate for that.

        This impact the consumption/production calculation as follows: 

        It switches the algebraic sign of the appliance's measurements, e.g. if
        an appliance measurement showed supply (+), it will change to feed-in
        (-) after this field is set to true (and vice versa).
      type: boolean
    ApplianceRoom:
      type: string
      description: The physical room/location of the appliance in the building.
    ApplianceSerialNumber:
      type: string
      example: '1901000652'
      description: Serialnumber of the appliance.
    Network:
      title: Network
      description: Represents a network connection.
      type: object
      properties:
        interface:
          type: string
          example: eth0
          description: Used network interface such as "eth0", "vpn0" etc.
        address:
          type: string
          example: 192.168.178.153
          description: IP address of the device.
        port:
          type: integer
          format: int32
          example: 0
          description: Port used for the connection.
        protocol:
          type: string
          example: tcp/modbus
          description: Protocol used for the connection.
    ApplianceParent:
      type: string
      format: uuid
      description: >-
        Specifies the parent appliance ID, for an appliance which is a child of
        a `CONTAINER` or `INVERTER` of kind `HYBRID`.
    LoadSettings:
      title: Load Settings
      description: Configure load of appliance.
      type: object
      required:
        - disabled
      properties:
        disabled:
          type: boolean
          description: >-
            If true, disable electrical load of the appliance (e.g. stops
            charging for EV charging station).
    AbstractSensorSettings:
      title: Sensor Settings
      type: object
      properties:
        sensorL1:
          type: integer
        sensorL2:
          type: integer
        sensorL3:
          type: integer
    SensorSettings:
      title: Sensor Settings
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractSensorSettings'
        - required:
            - createdAt
            - updatedAt
          properties:
            createdAt:
              type: string
              format: date-time
            updatedAt:
              type: string
              format: date-time
    Source:
      title: Source
      type: object
      required:
        - origin
      properties:
        origin:
          type: string
          description: >
            Specifies who created the appliance. This can be one of:

            - `GRIDBOX` if the appliance was found during a scan using a
            gridBox.

            - `API` if a user of the gridX API used the 'Create Appliance'
            endpoint
              to create this appliance.
            - `UNKNOWN` otherwise.
          enum:
            - UNKNOWN
            - GRIDBOX
            - API
          example: API
        uri:
          type: string
          description: >
            Contains an URI identifying the exact resource that created this
            appliance.


            If origin is 'GRID_BOX' the value will point to the gateway object
            of the gridBox. If

            origin is 'API' the value will specify the user that made the
            request to the gridX API.

            The 'UNKNOWN' origin should not occur in practice and is reserved
            for special cases (for now).
          example: >-
            accounts/b30510fa-a8a5-475f-a75d-82a46cb62582/users/b30510fa-a8a5-475f-a75d-82a46cb62582
    CommissioningKind:
      title: Commissioning Kind
      description: >
        Indicates special requirements to be fulfilled during the commissioning
        for this appliance.


        If empty or unset (default), the appliance can be commissioned as
        regular.

        - `property:CryptoSettings` means that the appliance property
        `CryptoSettings` needs to be set, e.g. for authenticating towards it
        with an appliance-specific API token.

        - `flow:Pairing` means that a coupling or pairing flow has to be
        initiated and run-through in order for the appliance to behave
        correctly.
      type: string
      enum:
        - property:CryptoSettings
        - flow:Pairing
    ApplianceState:
      title: Appliance State
      description: State an appliance can be in.
      type: string
      enum:
        - UNKNOWN_APPLIANCE_STATE
        - SCANNED
        - CONNECTING
        - VERIFYING
        - UNTRUSTED
        - CONNECTED
        - DISCONNECTED
    StateTransition:
      title: State Transition
      description: Defines the properties of a transition an appliance can go through.
      type: object
      required:
        - start
        - target
      properties:
        start:
          description: The starting state of the appliance.
          example: CONNECTING
          $ref: '#/components/schemas/ApplianceState'
        target:
          description: The target state of the appliance.
          example: DISCONNECTED
          $ref: '#/components/schemas/ApplianceState'
    AbstractState:
      title: State
      description: Contains information about the appliance's state.
      type: object
      properties:
        current:
          description: The state the appliance is currently in.
          example: SCANNED
          $ref: '#/components/schemas/ApplianceState'
        transitions:
          description: >
            List with all the possible state transitions an appliance can go
            through. 

            An appliance can go from a `starting` state to a `target` state.
          type: array
          items:
            $ref: '#/components/schemas/StateTransition'
    State:
      title: State
      description: Contains information about the appliance's state.
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractState'
        - required:
            - current
            - desired
          properties:
            desired:
              $ref: '#/components/schemas/ApplianceState'
    AbstractEnergyManagementSettings:
      title: Energy Management Settings
      description: Contains energy management information
      type: object
      properties:
        minControlInterval:
          type: integer
        socMax:
          description: >
            The maximum state of charge an energy storage can be charged to in a
            range from [0-100] in %.
          type: number
          format: double
          minimum: 0
          maximum: 100
        socLockMax:
          description: >
            The threshold above which no charging is allowed once SoC max is
            reached, in a range from [0-100] in %.

            Must be smaller than or equal to socMax.
          type: number
          format: double
          minimum: 0
          maximum: 100
        socMin:
          description: >
            The minimum state of charge an energy storage can be discharged to
            in a range from [0-100] in %.
          type: number
          format: double
          minimum: 0
          maximum: 100
        socLockMin:
          description: >
            The threshold below which no discharging is allowed once SoC min is
            reached, in a range from [0-100] in %.

            Must be larger than or equal to socMin.
          type: number
          format: double
          minimum: 0
          maximum: 100
        socDeepDischarge:
          description: >
            The lowest state of charge an energy storage can reach, in a range
            from [0-100] in %.

            Below this it is not usable and a forced recharge to at least socMin
            is required.
          type: number
          format: double
          minimum: 0
          maximum: 100
        phaseMapping:
          description: >
            Contains three indices representing the actual phases on the grid
            connection point this appliance is connected to. 

            Note that the first phase has index 0 and last phase index 2.

            The index of the sequence is the phase on the gcp and the values are
            the appliance phases. Unused phases are marked with -1.
          type: array
          nullable: true
          minItems: 3
          maxItems: 3
          items:
            type: integer
        temperatureExtremeMax:
          description: >
            The temperature to which the system should be heated up to in °C, if
            there is an energy surplus.
          type: number
          format: double
        temperatureExtremeMin:
          description: |
            The minimum temperature the system can reach in °C.
          type: number
          format: double
        temperatureComfortMax:
          description: >
            The temperature to which the system should be heated up to in °C, if
            there is no energy surplus.
          type: number
          format: double
        temperatureComfortMin:
          description: |
            The temperature at which the system starts to heat up to in °C.
          type: number
          format: double
        surplusThreshold:
          description: The supply surplus threshold for the EMS to activate the appliance.
          type: integer
    EnergyManagementSettings:
      title: Energy Management Settings
      description: Contains energy management information
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractEnergyManagementSettings'
        - required:
            - updatedAt
          properties:
            updatedAt:
              description: >-
                Specifies when the energy management settings were updated the
                last time.
              type: string
              format: date-time
    AbstractCryptoSetting:
      type: object
      required:
        - key
      properties:
        key:
          description: Crypto key data that is accessible to the appliance.
          type: string
    CryptoSetting:
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractCryptoSetting'
        - properties:
            createdAt:
              type: string
              format: date-time
              description: Specifies when the crypto key was created.
            updatedAt:
              type: string
              format: date-time
              description: Specifies when the crypto key was updated the last time.
    BaseAppliance:
      title: Base Appliance
      description: |
        BaseAppliance contains fields that all appliances have in common.

        Specific appliance types extend this schema and add new fields.
      type: object
      required:
        - id
        - inactive
        - createdAt
        - updatedAt
        - type
        - position
        - reverseFlow
        - connectionStatus
        - state
      properties:
        id:
          type: string
          format: uuid
          example: ec4d0c89-a604-49ac-82f0-427f9cb42204
          description: Uniquely identifies the appliance.
        createdAt:
          type: string
          format: date-time
          description: Specifies when the appliance was created.
        updatedAt:
          type: string
          format: date-time
          description: Specifies when the appliance was updated the last time.
        connectionStatus:
          $ref: '#/components/schemas/ApplianceConnectionStatus'
        status:
          $ref: '#/components/schemas/ApplianceStatus'
        type:
          $ref: '#/components/schemas/ApplianceType'
        inactive:
          $ref: '#/components/schemas/ApplianceInactive'
        name:
          $ref: '#/components/schemas/ApplianceName'
        reverseFlow:
          $ref: '#/components/schemas/ApplianceReverseFlow'
        room:
          $ref: '#/components/schemas/ApplianceRoom'
        serialnumber:
          $ref: '#/components/schemas/ApplianceSerialNumber'
        network:
          $ref: '#/components/schemas/Network'
        parent:
          $ref: '#/components/schemas/ApplianceParent'
        loadSettings:
          $ref: '#/components/schemas/LoadSettings'
        sensorSettings:
          $ref: '#/components/schemas/SensorSettings'
        source:
          $ref: '#/components/schemas/Source'
        commissioningKind:
          $ref: '#/components/schemas/CommissioningKind'
        state:
          $ref: '#/components/schemas/State'
        energySettings:
          $ref: '#/components/schemas/EnergyManagementSettings'
        cryptoSettings:
          title: Crypto Settings
          description: >-
            Contains a list of crypto setting keys that are associated with the
            appliance.
          type: array
          items:
            $ref: '#/components/schemas/CryptoSetting'
    InverterKind:
      description: >
        Indicates the role of the inverter.


        Setting the kind impacts the system measurements. So it's best to set it
        up correctly as early as possible

        in accordance to the actual installation in order for the measurement
        calculation to be correct (best during commissioning).
      type: string
      enum:
        - UNKNOWN
        - PV
        - PV_EXTERNAL
        - BATTERY
        - HYBRID
    AbstractBatteryInformation:
      title: Battery Information
      type: object
      description: >-
        The battery specific information for inverters of BATTERY and HYBRID
        kind.
      properties:
        maxCharge:
          type: integer
          title: Battery's maximum charge
          $ref: '#/components/schemas/PositivePower'
        maxDischarge:
          type: integer
          title: Battery's maximum discharge
          $ref: '#/components/schemas/PositivePower'
        controllable:
          type: boolean
          description: >-
            Controllable is true if the battery charging/discharging can be
            controlled.
        dischargeLimit:
          type: integer
          description: >-
            DischargeLimit is the minimum state of charge in % from 0-100 to
            discharge to.
        rechargeLimit:
          type: integer
          description: >
            RechargeLimit is the state of charge in % from 0-100 to which the
            battery needs to 

            recharge before allowing discharging again.
        controlSettings:
          type: object
          description: Indicates the currently desired control settings for the battery.
          required:
            - value
            - command
          properties:
            value:
              type: integer
              description: Represents the charge/discharge power in mW.
            command:
              type: string
              description: Represents the current control command.
              enum:
                - none
                - charge
                - discharge
    AbstractInverter:
      type: object
      properties:
        type:
          enum:
            - INVERTER
          type: string
          x-go-type-skip-optional-pointer: true
        kind:
          $ref: '#/components/schemas/InverterKind'
        manufacturer:
          type: string
          example: SMA
          description: Manufacturer of the appliance.
        model:
          type: string
          example: Sunny Boy Storage 2.5
          description: Model of the appliance.
        firmware:
          type: string
          example: 2.4.23.R
          description: Firmware version of the appliance.
        inverter:
          type: object
          description: The inverter specific information.
          properties:
            maxActivePowerOutput:
              description: >-
                Maximum active power output of the inverter in mW; set manually.
                Zero if not set.
              type: integer
            type:
              description: Describes the specific type of the inverter.
              type: string
              example: SUNGROW_SG_20_RT
        nominalPowerLimit:
          description: Designed maximal power output of the inverter in mW.
          type: integer
        hybridCalcMode:
          description: The calculation mode for inverters of HYBRID kind.
          type: integer
          enum:
            - 0
            - 1
            - 2
          example: 0
        battery:
          $ref: '#/components/schemas/AbstractBatteryInformation'
    HardwareStatus:
      title: Hardware Status
      type: object
      description: >
        HardwareStatus provides information about the condition of the inverter
        and in case of issues, 

        possible follow-up actions the user/installer can perform to resolve
        them.
      properties:
        state:
          type: string
          enum:
            - UNKNOWN
            - OK
            - WARNING
            - ERROR
          description: State of the inverter.
        action:
          type: string
          description: Recommended action to resolve ERROR/WARNING state.
          enum:
            - CONSULT_DEVICE_READOUT
            - CONTACT_INSTALLER
            - CONTACT_MANUFACTURER
            - CONTACT_GRID_OPERATOR
        errorCode:
          type: string
          description: >-
            Inverter manufacturer/model dependent error code formatted as it
            would be shown on display.
        description:
          type: string
          description: Contains details about the inverter ERROR and WARNING states.
          enum:
            - OTHER
            - GRID_FAULT
            - INSULATION_FAILURE
            - INTERFERENCE_DEVICE
            - FAN_FAULT
            - WAIT_FOR_UPDATE
            - SOFTWARE_FAULT
            - HARDWARE_FAULT
            - PARAMETER_FAULT
            - HIGH_TEMPERATURE
            - HIGH_DC_VOLTAGE
            - LOW_DC_POWER
            - DC_OVERCURRENT
            - INSTALLATION_FAULT
            - COMMUNICATION_FAULT
            - BATTERY_FAULT
        measuredAt:
          type: string
          format: date-time
          example: '2018-04-15T00:00:00Z'
    BatteryInformation:
      title: Battery Information
      type: object
      description: >-
        The battery specific information for inverters of BATTERY and HYBRID
        kind.
      allOf:
        - $ref: '#/components/schemas/AbstractBatteryInformation'
        - required:
            - controllable
    Inverter:
      title: Inverter
      description: |
        Inverter represents a monitor-/controllable inverter. It can be of kind:
        - `PV`/`PV_EXTERNAL`: used as photovoltaic only.
        - `BATTERY`: used as battery only.
        - `HYBRID`: used as both photovoltaic and battery.
        - `UNKNOWN`: default, when the inverter kind is not determined.
      allOf:
        - $ref: '#/components/schemas/BaseAppliance'
        - $ref: '#/components/schemas/AbstractInverter'
        - required:
            - kind
            - inverter
          properties:
            hardwareStatus:
              $ref: '#/components/schemas/HardwareStatus'
            inverter:
              required:
                - type
            battery:
              $ref: '#/components/schemas/BatteryInformation'
    AbstractMeter:
      type: object
      properties:
        type:
          type: string
          enum:
            - METER
          x-go-type-skip-optional-pointer: true
        model:
          type: string
          example: B-control Energy Manager 300
          description: Model of the meter.
        firmware:
          type: string
          example: '2.03'
          description: Firmware version of the meter.
        auxMeter:
          type: object
          description: The meter specific information.
          properties:
            location:
              type: string
              enum:
                - UNKNOWN
                - PV
                - GRID
                - BATTERY
                - HEAT_PUMP
                - FUEL_CELL
                - HEAT_PUMP_EXTERNAL
                - EVSTATION
                - PV_EXTERNAL
                - BTTP
                - HEATING
                - MISC
                - CLUSTER
                - WIND_TURBINE
              description: >
                Indicates that the meter is in front of given location for
                measuring the consumption and production.
            type:
              description: Describes the specific type of the meter.
              type: string
              example: SE_SINGLE_PHASE
            modbusAddress:
              type: integer
    MeterKind:
      description: >-
        Indicates what the meter measures.

        Setting the kind impacts the system measurements. So it's best to set it
        up correctly as early as possible in accordance to the actual
        installation in order for the measurement calculation to be correct
        (best during commissioning).
      type: string
      enum:
        - UNKNOWN
        - PV
        - GRID
        - BATTERY
        - HEAT_PUMP
        - FUEL_CELL
        - HEAT_PUMP_EXTERNAL
        - EVSTATION
        - PV_EXTERNAL
        - BTTP
        - HEATING
        - MISC
        - CLUSTER
        - WIND_TURBINE
    Meter:
      title: Meter
      description: Meter represents a monitor-/controllable meter.
      allOf:
        - $ref: '#/components/schemas/BaseAppliance'
        - $ref: '#/components/schemas/AbstractMeter'
        - type: object
          required:
            - auxMeter
            - kind
          properties:
            kind:
              $ref: '#/components/schemas/MeterKind'
            manufacturer:
              type: string
              example: TQ Systems
              description: Manufacturer of the meter.
            auxMeter:
              required:
                - location
                - type
    AbstractHeatPumpInformation:
      title: Heat Pump Information
      description: The heat pump specific information.
      type: object
      properties:
        type:
          description: Describes the specific type of the heat pump.
          type: string
          enum:
            - UNKNOWN
            - EEBUS
            - SIMULATION
            - INNOTEC
            - XNET_CLOUD
            - EXT_IO_DEVICE
            - EXT_IO_DEVICE_DHW
            - STIEBEL_ELTRON_WPMSYSTEM
            - SAIA_PCD_E_LINE
            - DAIKIN_HOMEHUB
        controllable:
          description: Specifies whether this appliance is controllable by the EMS.
          type: boolean
        behindGCP:
          description: Specifies whether this heat pump exists behind a GCP meter.
          type: boolean
        withOwnTariff:
          description: Specifies whether this heat pump has its own meter and tariff.
          type: boolean
        userControlEnabled:
          description: >-
            Specifies whether EMS control of this appliance is enabled by the
            user.
          type: boolean
    AbstractHeatPump:
      type: object
      properties:
        type:
          type: string
          enum:
            - HEAT_PUMP
          x-go-type-skip-optional-pointer: true
        manufacturer:
          type: string
          example: Stiebel Eltron
          description: Manufacturer of the heat pump.
        model:
          type: string
          example: WPMsystem
          description: Model of the heat pump.
        firmware:
          type: string
          example: mac_02:80:ad:24:d5:ab
          description: Firmware version of the heat pump.
        heatPump:
          $ref: '#/components/schemas/AbstractHeatPumpInformation'
    HeatPumpInformation:
      title: Heat Pump Information
      description: The heat pump specific information.
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractHeatPumpInformation'
        - required:
            - type
            - controllable
            - behindGCP
            - withOwnTariff
            - userControlEnabled
    HeatPump:
      title: Heat Pump
      description: Heat Pump represents a monitor-/controllable heat pump.
      allOf:
        - $ref: '#/components/schemas/BaseAppliance'
        - $ref: '#/components/schemas/AbstractHeatPump'
        - required:
            - heatPump
          properties:
            heatPump:
              $ref: '#/components/schemas/HeatPumpInformation'
    EVSEID:
      description: The EVSE-ID related to the charge point.
      type: string
    EVLoadManagementParameters:
      title: EvLoadManagementParameters
      description: >
        Load management configuration for EV charging stations.


        **Deprecated** - Use the system's EV charging station configuration
        instead.
      deprecated: true
      type: object
      properties:
        enabled:
          description: Indicates whether the load management is enabled.
          type: boolean
        maxPower:
          description: The maximum power in W.
          type: number
          format: double
          minimum: 0
    AbstractEVStation:
      type: object
      properties:
        type:
          type: string
          enum:
            - EVSTATION
          x-go-type-skip-optional-pointer: true
        manufacturer:
          type: string
          example: Echarge Hardy Barth
          description: Manufacturer of the ev charging station.
        model:
          type: string
          example: eCHARGE/PV
          description: Model of the ev charging station.
        firmware:
          type: string
          example: 0.38-78000001
          description: Firmware version of the ev charging station.
        evseID:
          $ref: '#/components/schemas/EVSEID'
        evLoadManagementParameters:
          $ref: '#/components/schemas/EVLoadManagementParameters'
    EVStation:
      title: EV Charging Station
      description: >
        EV Charging Station represents a monitor-/controllable electric vehicle
        charging station.
      allOf:
        - $ref: '#/components/schemas/BaseAppliance'
        - $ref: '#/components/schemas/AbstractEVStation'
    AbstractHeatMeter:
      type: object
      properties:
        type:
          type: string
          enum:
            - HEAT_METER
          x-go-type-skip-optional-pointer: true
    HeatMeter:
      title: Heat Meter
      description: Heat Meter represents a monitor-/controllable heat meter.
      allOf:
        - $ref: '#/components/schemas/BaseAppliance'
        - $ref: '#/components/schemas/AbstractHeatMeter'
    AbstractElectrolyzer:
      type: object
      properties:
        type:
          type: string
          enum:
            - ELECTROLYZER
          x-go-type-skip-optional-pointer: true
    Electrolyzer:
      title: Electrolyzer
      description: Electrolyzer represents a monitor-/controllable electrolyzer.
      allOf:
        - $ref: '#/components/schemas/BaseAppliance'
        - $ref: '#/components/schemas/AbstractElectrolyzer'
    IODeviceInputAction:
      title: IO Device Input Action
      description: >-
        One individual input action, that can be registered to a channel of a
        fieldbus coppler appliance.
      type: object
      required:
        - name
        - value
      properties:
        name:
          type: string
          description: Name of the action.
        value:
          type: number
          description: Value of the action. Unit must be derived from Name.
    IODeviceInputChannel:
      title: IO Device Input Channel
      type: object
      properties:
        bitMask:
          type: string
          format: base64
          description: BitMask used to identify the channel.
        bitValue:
          type: string
          format: base64
          description: BitValue used to trigger the action.
        actions:
          type: array
          items:
            $ref: '#/components/schemas/IODeviceInputAction'
    IODeviceOutputActionSGReady:
      title: IO Device Output Action SGReady
      description: >-
        Used to specify a connection to a heat pump supporting the SGReady
        standard.
      type: object
      required:
        - pMin
        - pMax
        - state
        - applianceID
      properties:
        pMin:
          type: number
        pMax:
          type: number
        state:
          description: Represents one state of the sg ready standard.
          type: string
          enum:
            - UNKNOWN
            - 'OFF'
            - AUTO
            - RECOMMEND_ON
            - 'ON'
        applianceID:
          type: string
          format: uuid
    IODeviceOutputAction:
      title: IO Device Output Action
      description: >-
        An individual output action, that can be registered to an output channel
        of an IODevice.
      type: object
      properties:
        bitValue:
          type: string
          format: base64
          description: >-
            The value to write to the IODevice's output channel. Each action has
            its own bit value, to allow arbitrary combinations to be written to
            the output channel.
        sgReady:
          $ref: '#/components/schemas/IODeviceOutputActionSGReady'
    IODeviceOutputChannel:
      title: IO Device Output Channel
      description: Represents one output channel of the IODevice.
      type: object
      properties:
        bitMask:
          type: string
          format: base64
          description: Bit mask identifying the output channel.
        actions:
          type: array
          description: >-
            Actions (name/value pairs) that are applied to the channel when
            enabled.
          items:
            $ref: '#/components/schemas/IODeviceOutputAction'
    AbstractIODeviceInformation:
      title: IO Device Information
      description: The io device specific information.
      type: object
      properties:
        type:
          description: Describes the specific type of the device.
          type: string
          enum:
            - UNKNOWN
            - WAGO
            - SGREADY
            - JANITZA_UMG604
            - RUTENBECK_TCR_IP4
            - SIEMENS_PAC_7KM_2200
            - JANITZA
        inChannelsCount:
          type: integer
          description: >-
            The number of input ports on the device, real physical ports you can
            connect a cable to.
        outChannelsCount:
          type: integer
          description: >-
            The number of output ports on the device, real physical ports you
            can connect a cable to.
        inputChannels:
          type: array
          description: Input channels of the fieldbus coupler, containing actions.
          items:
            $ref: '#/components/schemas/IODeviceInputChannel'
        outputChannels:
          type: array
          description: >
            Output channels of the IODevice, containing actions. An output
            channel must not always use exactly one port, but can use multiple
            physical connections.

            SGReady heat pumps for example are connected using two output ports
            (which are grouped in one OutputChannel).
          items:
            $ref: '#/components/schemas/IODeviceOutputChannel'
    AbstractIODevice:
      type: object
      properties:
        type:
          type: string
          enum:
            - IO_DEVICE
          x-go-type-skip-optional-pointer: true
        manufacturer:
          type: string
          example: Siemens AG
          description: Manufacturer of the io device.
        model:
          type: string
          example: Siemens AG 7KM2200-2EA30-1EA1
          description: Model of the io device.
        firmware:
          type: string
          example: HW 3 SW V3.2.2
          description: Firmware version of the io device.
        ioDevice:
          $ref: '#/components/schemas/AbstractIODeviceInformation'
    IODeviceInformation:
      title: IO Device Information
      description: The io device specific information.
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractIODeviceInformation'
        - required:
            - type
    IODevice:
      title: IO Device
      description: >-
        IO devices represent configuration options that can be applied for
        appliances of the fieldbus coupler type
      allOf:
        - $ref: '#/components/schemas/BaseAppliance'
        - $ref: '#/components/schemas/AbstractIODevice'
        - properties:
            ioDevice:
              $ref: '#/components/schemas/IODeviceInformation'
    AbstractHeater:
      type: object
      properties:
        type:
          type: string
          enum:
            - HEATER
          x-go-type-skip-optional-pointer: true
        firmware:
          type: string
          example: '101.3'
          description: Firmware version of the heater.
        heater:
          description: The heater specific information.
          type: object
          properties:
            type:
              description: Describes the specific type of the heater.
              type: string
              enum:
                - UNKNOWN
                - MY_PV_AC_THOR
                - SIMULATION
                - EXT_IO_DEVICE_ELECTRIC
            medium:
              description: The medium the heater is working with.
              type: integer
              enum:
                - 0
                - 1
                - 2
            nominalPower:
              description: The nominal power of the heater.
              type: integer
    Heater:
      title: Heater
      description: Heater represents a monitor-/controllable heater.
      allOf:
        - $ref: '#/components/schemas/BaseAppliance'
        - $ref: '#/components/schemas/AbstractHeater'
        - required:
            - heater
          properties:
            manufacturer:
              type: string
              example: my-PV
              description: Manufacturer of the heater.
            heater:
              required:
                - type
                - medium
    AbstractContainer:
      type: object
      properties:
        type:
          type: string
          enum:
            - CONTAINER
          x-go-type-skip-optional-pointer: true
        manufacturer:
          type: string
          example: Loxone
          description: Manufacturer of the container.
        model:
          type: string
          example: Miniserver
          description: Model of the container.
        container:
          description: The container specific information.
          type: object
          properties:
            type:
              description: Describes the specific type of the container.
              type: string
              enum:
                - UNKNOWN
                - EEBUS
    Container:
      title: Container
      description: >-
        Container represents a container appliance, used to group multiple child
        appliances.
      allOf:
        - $ref: '#/components/schemas/BaseAppliance'
        - $ref: '#/components/schemas/AbstractContainer'
        - required:
            - container
          properties:
            container:
              required:
                - type
    Appliance:
      title: Appliance
      description: |
        Appliance represents a monitor-/controllable device such as Inverters,
        Meters and Heat Pumps.
      readOnly: true
      oneOf:
        - $ref: '#/components/schemas/Inverter'
        - $ref: '#/components/schemas/Meter'
        - $ref: '#/components/schemas/HeatPump'
        - $ref: '#/components/schemas/EVStation'
        - $ref: '#/components/schemas/HeatMeter'
        - $ref: '#/components/schemas/Electrolyzer'
        - $ref: '#/components/schemas/IODevice'
        - $ref: '#/components/schemas/Heater'
        - $ref: '#/components/schemas/Container'
      discriminator:
        propertyName: type
        mapping:
          INVERTER: '#/components/schemas/Inverter'
          METER: '#/components/schemas/Meter'
          HEAT_PUMP: '#/components/schemas/HeatPump'
          EVSTATION: '#/components/schemas/EVStation'
          HEAT_METER: '#/components/schemas/HeatMeter'
          ELECTROLYZER: '#/components/schemas/Electrolyzer'
          IO_DEVICE: '#/components/schemas/IODevice'
          HEATER: '#/components/schemas/Heater'
          CONTAINER: '#/components/schemas/Container'
    AbstractBiddingZone:
      type: object
      description: >
        The bidding zone determines from which electricity market bidding zone
        the raw market prices for

        market data tariffs are used.


        The bidding zone is the ENTSOE-E Area EIC codes (Y).

        See
        https://www.entsoe.eu/data/energy-identification-codes-eic/eic-approved-codes/
        &
        https://www.entsoe.eu/data/energy-identification-codes-eic/eic-approved-codes/

        for available codes.
      properties:
        biddingZone:
          example: 10Y1001A1001A44P
          type: string
      required:
        - biddingZone
    BiddingZone:
      allOf:
        - $ref: '#/components/schemas/AbstractBiddingZone'
        - type: object
          properties:
            biddingZone:
              nullable: true
    BiddingZoneSet:
      allOf:
        - $ref: '#/components/schemas/AbstractBiddingZone'
        - type: object
          properties:
            biddingZone:
              nullable: false
    BiddingZoneSetStrict:
      allOf:
        - $ref: '#/components/schemas/BiddingZoneSet'
        - additionalProperties: false
    Assets:
      description: A List of Assets and metadata about the list.
      type: object
      properties:
        assets:
          type: array
          items:
            $ref: '#/components/schemas/Asset'
        metadata:
          $ref: '#/components/schemas/AssetsMetadata'
      required:
        - assets
    Asset:
      description: An Asset as its defined for the gridX Platform.
      type: object
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        name:
          type: string
          example: Some Human-Readable Asset Name
        applicationId:
          type: string
          format: uuid
          readOnly: true
        system:
          $ref: '#/components/schemas/AssetSystem'
        status:
          type: string
          enum:
            - AVAILABLE
            - UNAVAILABLE
            - UNKNOWN
          description: >
            An asset is considered as `AVAILABLE` if it sent a heartbeat in the
            past 5 minutes. Respectively, if there 

            hasn't been a heartbeat in the past 5 minutes, the asset is
            considered as `UNAVAILABLE`. In case there isn't

            a heartbeat (e.g. in case of a new Asset), the status will be
            `UNKNOWN`.
          default: UNKNOWN
        manufacturer:
          type: string
          example: TQ-Systems
          readOnly: true
        model:
          type: string
          example: B-control Energy Manager 300
          readOnly: true
        serialNumber:
          type: string
          example: 3cdae5c3c30c53b9
          readOnly: true
        priority:
          type: boolean
          nullable: true
        lastHeartbeatReceivedAt:
          type: string
          format: date-time
          readOnly: true
          description: At what time the last heartbeat was received.
          nullable: true
        driverVersion:
          type: string
          example: v1.0.1
          readOnly: true
        type:
          type: string
          enum:
            - CONTAINER
            - EVSTATION
            - HEAT_PUMP
            - HEATER
            - INVERTER
            - IO_DEVICE
            - METER
            - UNKNOWN
        kind:
          type: string
          enum:
            - BATTERY
            - BTTP
            - CLUSTER
            - CONTAINER
            - EVSTATION
            - FUEL_CELL
            - GRID
            - HEAT_PUMP
            - HEAT_PUMP_EXTERNAL
            - HEATER
            - HEATING
            - HYBRID
            - IO_DEVICE
            - MISC
            - PV
            - PV_EXTERNAL
            - UNKNOWN
            - WIND_TURBINE
        metadata:
          example: >-
            "{"reverse_flow": false, "aux_meter_type":
            "SIMULATION_AUX_METER_TYPE"}"
        networkSettings:
          $ref: '#/components/schemas/NetworkSettings'
        createdAt:
          type: string
          format: date-time
          readOnly: true
        updatedAt:
          type: string
          format: date-time
          readOnly: true
      required:
        - applicationId
        - system
        - type
    AssetSystem:
      description: Minimal information about the System that the Asset belongs to.
      type: object
      readOnly: true
      properties:
        id:
          type: string
          format: uuid
          readOnly: true
        name:
          type: string
          example: GridBox at Office
          readOnly: true
      required:
        - id
    NetworkSettings:
      description: >-
        Provides information about how to connect to the asset. The data varies
        depending on the driver.
      type: object
      properties:
        address:
          type: string
          example: wss://SMA3009885376.local:4712/ship/
        port:
          type: integer
          example: 1234
          minimum: 0
          maximum: 65535
    AssetsMetadata:
      type: object
      readOnly: true
      description: >-
        Provides information about the returned object, such as length of the
        list and distinct values.
      properties:
        counts:
          type: object
          description: >
            This will only be available if the response is a list or contains
            multiple items. It provides multiple 

            "counts" of the list that is being returned.
          properties:
            total:
              readOnly: true
              description: >
                The total number of objects in the list, regardless of any query
                parameters such as filtering or 

                pagination.
              type: integer
              example: 321
            filtered:
              readOnly: true
              description: >
                The number of objects in the list after the filters have been
                applied. This ignores pagination and will 

                show how many objects are available with the given filters. This
                number will always be less than or 

                equal to the `total` count.
              type: integer
              example: 123
    AbstractCluster:
      type: object
      properties:
        priority:
          description: >-
            The higher the priority, the more energy the appliances will get; a
            cluster with higher priority will be curtailed least.
          type: integer
          format: int
          example: 1
        name:
          description: The cluster's name meant to be displayable to the user.
          type: string
          example: E Corp HQ
        strategy:
          description: Identifies the specific curtailment approach within the cluster.
          type: string
          enum:
            - SERIES
            - EQUALLY
            - FIRST_COME_FIRST_SERVE
            - LAST_COME_FIRST_SERVE
            - ROUND_ROBIN
            - AI
            - PROPORTIONAL
        priorities:
          description: Defines the priority for the EMS.
          type: array
          items:
            type: string
            enum:
              - BATTERY
              - HEATER
              - EV
              - HEATPUMP
        maxPower:
          description: The maximum power in W.
          type: integer
        maxPowerL1:
          description: The maximum power in W for phase L1.
          type: integer
        maxPowerL2:
          description: The maximum power in W for phase L2.
          type: integer
        maxPowerL3:
          description: The maximum power in W for phase L3.
          type: integer
        maxPowerMargin:
          description: The maximum power safety margin in W.
          type: integer
        maxPowerMarginL1:
          description: The maximum power safety margin in W for phase L1.
          type: integer
        maxPowerMarginL2:
          description: The maximum power safety margin in W for phase L2.
          type: integer
        maxPowerMarginL3:
          description: The maximum power safety margin in W for phase L3.
          type: integer
        maxPowerWorstCase:
          description: The assumed maximum power in W in case of a lost connection.
          type: integer
        maxPowerWorstCaseL1:
          description: >-
            The assumed maximum power in W in case of a lost connection for
            phase L1.
          type: integer
        maxPowerWorstCaseL2:
          description: >-
            The assumed maximum power in W in case of a lost connection for
            phase L2.
          type: integer
        maxPowerWorstCaseL3:
          description: >-
            The assumed maximum power in W in case of a lost connection for
            phase L3.
          type: integer
        dynamicPowerDistribution:
          description: >-
            Specifies whether dynamic power distribution should be enabled or
            not.
          type: boolean
    AbstractClusterStrict:
      allOf:
        - $ref: '#/components/schemas/AbstractCluster'
        - additionalProperties: false
    Cluster:
      allOf:
        - $ref: '#/components/schemas/AbstractCluster'
        - properties:
            id:
              description: Identifier of the cluster.
              type: string
              format: uuid
              readOnly: true
            systemID:
              description: Identifier of the system.
              type: string
              format: uuid
            createdAt:
              description: >-
                Time at which the cluster was created in UTC using the ISO 8601
                full-time format.
              type: string
              format: date-time
              example: '1985-04-12T23:20:50Z'
              readOnly: true
            updatedAt:
              description: >-
                Time at which the cluster was updated in UTC using the ISO 8601
                full-time format.
              type: string
              format: date-time
              example: '1985-04-12T23:20:50Z'
              readOnly: true
            dynamicPowerDistribution:
              default: false
            clusters:
              description: Clusters that belong to the cluster.
              type: array
              items:
                $ref: '#/components/schemas/Cluster'
            appliances:
              description: Appliances that belong to the cluster.
              type: array
              items:
                $ref: '#/components/schemas/Appliance'
          required:
            - id
    ClusterSet:
      allOf:
        - $ref: '#/components/schemas/AbstractCluster'
        - properties:
            systemID:
              description: Identifier of the system.
              type: string
              format: uuid
          required:
            - systemID
    ClusterSetStrict:
      allOf:
        - $ref: '#/components/schemas/ClusterSet'
        - additionalProperties: false
    Message:
      title: Message
      description: Message represents a string.
      type: object
      properties:
        message:
          type: string
      required:
        - message
    AuthEvent:
      title: AuthEvent
      description: AuthEvent represents auth events such as login, password reset.
      type: object
      properties:
        createdAt:
          type: string
          format: date-time
          readOnly: true
        type:
          type: string
        ip:
          type: string
          format: ip
          example: 192.168.178.153
          description: IP is the IP address of the person who created the event
    CustomerAccount:
      title: Customer Account
      description: Represents an end-customer account.
      type: object
      allOf:
        - $ref: '#/components/schemas/Account'
        - properties:
            kind:
              example: end-user
    UnauthorizedException:
      readOnly: true
      allOf:
        - $ref: '#/components/schemas/GeneralException'
        - title: ClientError - Unauthorized
          description: The client isn't authorized to access the requested resource.
          example:
            message: Unauthorized
    CustomerAccountStrict:
      allOf:
        - $ref: '#/components/schemas/CustomerAccount'
        - additionalProperties: false
    CustomerAccountUpdate:
      allOf:
        - $ref: '#/components/schemas/AbstractAccount'
        - properties:
            customization:
              description: Customization can be used to store arbitrary data.
            mainAddress:
              $ref: '#/components/schemas/Address'
    CustomerAccountUpdateStrict:
      allOf:
        - $ref: '#/components/schemas/CustomerAccountUpdate'
        - additionalProperties: false
    UserStrict:
      allOf:
        - $ref: '#/components/schemas/User'
        - additionalProperties: false
    ImpersonationStrict:
      description: Impersonate as user
      type: object
      properties:
        dashboard:
          type: string
          example: https://my.gridx.de
      additionalProperties: false
      required:
        - dashboard
    AbstractImportPowerLimit:
      title: Import power limit
      type: object
      properties:
        maxImportTotal:
          type: integer
          description: Maximum total import power in W.
          format: int64
        maxImportL1:
          type: integer
          description: Maximum total import power in the first phase in W.
          format: int64
        maxImportL2:
          type: integer
          description: Maximum total import power in the second phase in W.
          format: int64
        maxImportL3:
          type: integer
          description: Maximum total import power in the third phase in W.
          format: int64
        importEVMarginTotal:
          type: integer
          format: int64
        importEVMarginPhase:
          type: integer
          format: int64
        maxImportEVMarginL1:
          type: integer
          description: Maximum import power margin in the first phase in W.
          format: int64
        maxImportEVMarginL2:
          type: integer
          description: Maximum import power margin in the second phase in W.
          format: int64
        maxImportEVMarginL3:
          type: integer
          description: Maximum import power margin in the third phase in W.
          format: int64
        maxImportEVWorstCase:
          type: integer
          description: >-
            The assumed maximum charging power in W for all EVs in case the
            connection to the grid connection point is lost.
          format: int64
        maxImportEVWorstCaseL1:
          type: integer
          description: >-
            The assumed maximum charging power in W for all EVs in case the
            connection to the grid connection point is lost for the first phase.
          format: int64
        maxImportEVWorstCaseL2:
          type: integer
          description: >-
            The assumed maximum charging power in W for all EVs in case the
            connection to the grid connection point is lost for the second
            phase.
          format: int64
        maxImportEVWorstCaseL3:
          type: integer
          description: >-
            The assumed maximum charging power in W for all EVs in case the
            connection to the grid connection point is lost for the third phase.
          format: int64
    ImportPowerLimit:
      allOf:
        - $ref: '#/components/schemas/AbstractImportPowerLimit'
        - properties:
            internalDeviceID:
              type: string
              description: >-
                Unique ID to identify the gateway the import power limit belongs
                to.
              example: aeb639cf0793e81f0804c6647af7f0900a847921c0596726f1afdfd04a3a3186
              readOnly: true
            createdAt:
              type: string
              description: >-
                Time at which the import power limit was created in UTC using
                the RFC3339 format.
              example: '2021-10-10T23:20:50Z'
              format: date-time
              readOnly: true
            updatedAt:
              type: string
              description: >-
                Time at which the import power limit was updated in UTC using
                the RFC3339 format.
              example: '2021-10-10T23:20:50Z'
              format: date-time
              readOnly: true
          required:
            - internalDeviceID
            - createdAt
            - updatedAt
            - maxImportTotal
            - maxImportL1
            - maxImportL2
            - maxImportL3
            - importEVMarginTotal
            - importEVMarginPhase
            - maxImportEVMarginL1
            - maxImportEVMarginL2
            - maxImportEVMarginL3
            - maxImportEVWorstCase
            - maxImportEVWorstCaseL1
            - maxImportEVWorstCaseL2
            - maxImportEVWorstCaseL3
    ImportPowerLimitSet:
      $ref: '#/components/schemas/AbstractImportPowerLimit'
    ImportPowerLimitSetStrict:
      allOf:
        - $ref: '#/components/schemas/AbstractImportPowerLimit'
        - additionalProperties: false
    PowerLimitDynamic:
      title: Import power limits stored with the dynamic API.
      type: object
      properties:
        maxImportMeasuredTimestamp:
          type: string
          description: >-
            Time at which the import power limit was created in UTC using the
            RFC3339 format.
          example: '2021-10-10T23:20:50Z'
          format: date-time
          readOnly: true
        maxImportTotal:
          type: integer
          format: int64
          description: Maximum total import power in mW.
        maxImportL1:
          type: integer
          format: int64
          description: Maximum total import power in the first phase in mW.
        maxImportL2:
          type: integer
          format: int64
          description: Maximum total import power in the second phase in mW.
        maxImportL3:
          type: integer
          format: int64
          description: Maximum total import power in the third phase in mW.
        maxImportEvMarginTotal:
          type: integer
          format: int64
          description: >-
            maxImportTotal - importEVMarginTotal is the maximum import power
            considered in total in mW.
        maxImportEvMarginL1:
          type: integer
          format: int64
          description: Maximum import power margin in the first phase in mW.
        maxImportEvMarginL2:
          type: integer
          format: int64
          description: Maximum import power margin in the second phase in mW.
        maxImportEvMarginL3:
          type: integer
          format: int64
          description: Maximum import power margin in the third phase in mW.
        maxImportEvMarginWorstCaseTotal:
          type: integer
          format: int64
          description: >-
            The assumed maximum charging power in mW for all EVs in case the
            connection to the grid connection point is lost.
        maxImportEvMarginWorstCaseL1:
          type: integer
          format: int64
          description: >-
            The assumed maximum charging power in mW for all EVs in case the
            connection to the grid connection point is lost for the first phase.
        maxImportEvMarginWorstCaseL2:
          type: integer
          format: int64
          description: >-
            The assumed maximum charging power in mW for all EVs in case the
            connection to the grid connection point is lost for the second
            phase.
        maxImportEvMarginWorstCaseL3:
          type: integer
          format: int64
          description: >-
            The assumed maximum charging power in mW for all EVs in case the
            connection to the grid connection point is lost for the third phase.
      required:
        - maxImportMeasuredTimestamp
        - maxImportTotal
        - maxImportL1
        - maxImportL2
        - maxImportL3
        - maxImportEvMarginTotal
        - maxImportEvMarginL1
        - maxImportEvMarginL2
        - maxImportEvMarginL3
        - maxImportEvMarginWorstCaseTotal
        - maxImportEvMarginWorstCaseL1
        - maxImportEvMarginWorstCaseL2
        - maxImportEvMarginWorstCaseL3
    HistoricalPowerLimits:
      title: Historical import power limit
      type: object
      properties:
        systemID:
          type: string
          format: uuid
          description: Unique ID to identify the system the import power limits belong to.
          readOnly: true
          example: 512654ea-5328-4c79-8ed7-b4136aa31679
        data:
          type: array
          items:
            $ref: '#/components/schemas/PowerLimitDynamic'
      required:
        - systemID
        - data
    UserLimitSet:
      title: User Limit Request Body
      description: Set the user limit, price and enable or disable the limit.
      type: object
      properties:
        userLimit:
          type: number
          description: Limit set by the user in W.
        userLimitEnabled:
          type: boolean
          description: >-
            Enables or disables the limit set by the user. Fallback is the
            suggested limit.
        price:
          type: number
          description: Price for the given capacity tariff (set by the user) in €/kW.
        enabled:
          type: boolean
          description: >
            Enables or disables the capacity tariff.

            If enabled, energy management system uses the `effectiveLimit` as an
            upper bound on a 15 minute average base.
          example: true
    UserLimitSetStrict:
      allOf:
        - $ref: '#/components/schemas/UserLimitSet'
        - additionalProperties: false
    RecommendedLimitSet:
      title: Recommended Limit Request Body
      description: Sets the suggested limit.
      type: object
      properties:
        value:
          type: number
          description: Limit set by the energy provider as a suggestion for the user in W.
    RecommendedLimitSetStrict:
      allOf:
        - $ref: '#/components/schemas/RecommendedLimitSet'
        - additionalProperties: false
    PeakPowerSet:
      title: Peak Power
      description: Sets the peak power.
      type: object
      properties:
        value:
          type: number
          description: Peak power set by the EMS in W.
    PeakPowerSetStrict:
      allOf:
        - $ref: '#/components/schemas/PeakPowerSet'
        - additionalProperties: false
    BatteryControlSettings:
      title: Battery Control Settings
      description: |
        Represents settings for a battery, indicating whether it is set to
        charge or discharge.
      type: object
      properties:
        value:
          type: integer
          format: int64
          description: represents the charge/discharge power in mW
        command:
          type: integer
          format: int64
          description: represents the current control command (charge/discharge/none)
    BatteryControlSettingsStrict:
      allOf:
        - $ref: '#/components/schemas/BatteryControlSettings'
        - additionalProperties: false
    CapacityTariff:
      title: Capacity Tariff
      description: >-
        Represents the set tariff information for a defined power import peak
        limit.
      type: object
      required:
        - userLimit
        - userLimitEnabled
        - price
        - effectiveLimit
      properties:
        userLimit:
          type: number
          description: Limit set by the user in W.
        userLimitEnabled:
          type: boolean
          description: >-
            Enables or disables the limit set by the user. Fallback is the
            suggested limit. Default is disabled.
        userLimitUpdatedAt:
          type: string
          format: date-time
          readOnly: true
        price:
          type: number
          description: Price for the given capacity tariff (set by the user) in €/kW.
        recommendedLimit:
          type: number
          description: >
            Limit set by the energy provider as a suggestion for the user in W.

            If the limit is deleted, it's not part of the capacity tariff
            response.
          readOnly: true
        recommendedLimitUpdatedAt:
          type: string
          format: date-time
          readOnly: true
        peakPower:
          type: number
          description: >
            Maximum peak power. If it exceeds both the user and the recommended
            limit it is set as `effectiveLimit`.

            If the value is deleted, it's not part of the capacity tariff
            response.
          readOnly: true
        peakPowerUpdatedAt:
          type: string
          format: date-time
          readOnly: true
        effectiveLimit:
          type: number
          description: >-
            Defines which limit is used by the energy management system (either
            user or recommended).
          readOnly: true
        enabled:
          type: boolean
          description: >
            Enables or disables the capacity tariff.

            If enabled, energy management system uses the `effectiveLimit` as an
            upper bound on a 15 minute average base.
          default: true
    GridConnectionPointForecasts:
      type: object
      properties:
        from:
          type: string
          format: date-time
          example: '2020-09-21T00:00:00Z'
          description: >
            Timestamp in RFC3339 format that marks the beginning of the validity
            period for the forecast.
        to:
          type: string
          format: date-time
          example: '2020-09-21T22:10:00Z'
          description: >
            Timestamp in RFC3339 format that marks the end of the validity
            period for the forecast.
        periods:
          type: array
          items:
            $ref: '#/components/schemas/GridConnectionPointPeriod'
        lastUpdated:
          type: string
          format: date-time
          example: '2020-09-21T00:00:00Z'
          description: |
            Last time when the forecast was updated.
    GridConnectionPointPeriod:
      type: object
      properties:
        from:
          type: string
          format: date-time
          example: '2020-09-21T00:00:00Z'
          description: |
            Timestamp in RFC3339 format that marks the beginning of the period.
        to:
          type: string
          format: date-time
          example: '2020-09-21T00:15:00Z'
          description: |
            Timestamp in RFC3339 format that marks the end of the period.
        importActivePower:
          type: number
          description: |
            The forecasted import active power in Watts.
        exportActivePower:
          type: number
          description: |
            The forecasted export active power in Watts.
    StatusHistory:
      type: object
      properties:
        from:
          type: string
          format: date-time
          example: '2020-09-21T00:00:00Z'
          description: >
            Timestamp in RFC3339 format that marks the beginning of the validity
            period for the status history.
        to:
          type: string
          format: date-time
          example: '2020-09-21T22:10:00Z'
          description: >
            Timestamp in RFC3339 format that marks the end of the validity
            period for the status history.
        periods:
          $ref: '#/components/schemas/RunStatuses'
    RunStatuses:
      type: array
      items:
        $ref: '#/components/schemas/RunStatus'
    RunStatus:
      type: object
      properties:
        from:
          type: string
          format: date-time
          example: '2020-09-21T00:00:00Z'
          description: |
            Timestamp in RFC3339 format that marks the beginning of the period.
        to:
          type: string
          format: date-time
          example: '2020-09-21T00:15:00Z'
          description: |
            Timestamp in RFC3339 format that marks the end of the period.
        status:
          $ref: '#/components/schemas/StatusValue'
        error_code:
          $ref: '#/components/schemas/ToUErrorCode'
        warnings:
          $ref: '#/components/schemas/ToUWarnings'
    StatusValue:
      type: string
      enum:
        - ONLINE
        - SUBOPTIMAL
        - OFFLINE
        - DISABLED
        - INITIALIZING
      example: ONLINE
      description: >
        Operational status of Time-of-Use for a specific run.


        * `ONLINE` - Time-of-Use optimization is running successfully.

        * `SUBOPTIMAL` - Time-of-Use optimization is running suboptimally.

        * `OFFLINE` - Time-of-Use optimization failed.

        * `DISABLED` - Time-of-Use optimization is disabled for the system.

        * `INITIALIZING` - Time-of-Use optimization is initializing, it may take
        up to 48h.
    SystemCreate:
      type: object
      allOf:
        - $ref: '#/components/schemas/SystemWithoutProductOption'
        - type: object
          properties:
            priorities:
              readOnly: true
            curtailmentStrategy:
              readOnly: true
    SystemCreateStrict:
      allOf:
        - $ref: '#/components/schemas/SystemCreate'
        - additionalProperties: false
    SystemUpdate:
      allOf:
        - $ref: '#/components/schemas/AbstractSystem'
        - type: object
          properties:
            productOption:
              type: object
              required:
                - id
              properties:
                id:
                  type: string
                  format: uuid
    SystemUpdateStrict:
      allOf:
        - $ref: '#/components/schemas/SystemUpdate'
        - additionalProperties: false
    GatewayWithSystem:
      allOf:
        - $ref: '#/components/schemas/Gateway'
        - properties:
            system:
              $ref: '#/components/schemas/System'
    GatewayUpdate:
      allOf:
        - $ref: '#/components/schemas/AbstractGateway'
        - properties:
            name:
              nullable: true
    GatewayUpdateStrict:
      allOf:
        - $ref: '#/components/schemas/GatewayUpdate'
        - additionalProperties: false
    GatewayCreate:
      allOf:
        - $ref: '#/components/schemas/AbstractGateway'
        - properties:
            startcode:
              description: Code used to register a new gateway.
              type: string
              example: 39FDDF7D85BAAD2D
              pattern: ^[A-F0-9]{16}$
            vendorID:
              description: >-
                ID of the vendor account to which the corresponding system is
                assigned.
              type: string
              format: uuid
              example: 6dd0a658-5828-4d30-bc65-a03c6d6e425f
            type:
              $ref: '#/components/schemas/GatewayType'
          required:
            - startcode
    GatewayCreateStrict:
      allOf:
        - $ref: '#/components/schemas/GatewayCreate'
        - additionalProperties: false
    Scanner:
      title: Scanner
      description: Represents a scanner within a scan.
      type: object
      properties:
        id:
          description: Unique identifier of a scanner.
          type: string
          format: uuid
          example: 7992f38a-df67-49d9-9f2f-98c63015a20c
        name:
          $ref: '#/components/schemas/ScannerName'
        startedAt:
          description: The time at which the scan has started.
          type: string
          format: date-time
          readOnly: true
          example: '2018-04-15T00:00:00Z'
        finishedAt:
          description: The time at which the scan has finished.
          type: string
          format: date-time
          readOnly: true
          nullable: true
          example: '2018-04-15T00:00:00Z'
      required:
        - id
        - name
        - startedAt
        - finishedAt
    Scan:
      title: Scan
      description: Represents a group of scanners than have to run on a specific gridbox.
      type: object
      properties:
        id:
          description: Unique identifier of a scan.
          type: string
          format: uuid
          example: 9ee88ee2-49f4-434d-a96f-67aca96aaa0a
        startedAt:
          description: The time at which the scan has started.
          type: string
          format: date-time
          readOnly: true
          example: '2018-04-15T00:00:00Z'
        finishedAt:
          description: The time at which the scan has finished.
          type: string
          format: date-time
          readOnly: true
          example: '2018-04-15T00:00:00Z'
        scanners:
          description: Represents a list of scanners that have to run.
          type: array
          items:
            $ref: '#/components/schemas/Scanner'
        appliances:
          description: >-
            Represents a list of appliances that have been detected during a
            scan.
          type: array
          items:
            $ref: '#/components/schemas/Appliance'
      required:
        - id
    JobType:
      description: |
        Represents the kind of the job. A job can be of type:
        - `UNKNOWN_TYPE`
        - `RESET`: Indicates that the application has to be reset.
        - `SCAN`: Indicates that the application should start a scan.
        - `RESTART`: Indicates that the application should restart.
      type: string
      enum:
        - UNKNOWN_TYPE
        - SCAN
        - RESET
        - RESTART
      example: RESET
    JobState:
      type: string
      description: >
        Represents the current state of the job. It can be one of:

        * `UNKNOWN_STATE`

        * `PENDING`: Indicates that the job waits to be fetched.

        * `RECEIVED`: Indicates that the job has reached the gridbox.

        * `STARTED`: Indicates that the job has been started.

        * `DONE`: Indicates that the job is done.

        * `ERROR`: Indicates that the job has failed.

        * `CANCELED`: Indicates that the job was remotely cancelled.It might
        only have an impact if the state is still pending.
      enum:
        - UNKNOWN_STATE
        - PENDING
        - RECEIVED
        - STARTED
        - DONE
        - ERROR
        - CANCELED
      example: PENDING
    AbstractJob:
      description: Represents an application-based job on the gridBox.
      type: object
      properties:
        type:
          $ref: '#/components/schemas/JobType'
        requestedAt:
          description: Represents the time at which the job was requested.
          type: string
          format: date-time
          readOnly: true
          example: '2018-04-15T00:00:00Z'
        state:
          $ref: '#/components/schemas/JobState'
    JobExecution:
      title: Job Execution
      description: Represents an execution of a job.
      type: object
      properties:
        id:
          description: Unique identifier of a job execution.
          type: string
          format: uuid
          example: 5830cd32-a194-4b9d-bea3-c2332f27167f
        jobID:
          description: Unique identifier of a job.
          type: string
          format: uuid
        succeeded:
          description: Indicates that the execution was successful.
          type: boolean
        error:
          description: A possible error message.
          type: string
        startedAt:
          description: >-
            Represents the time at which the execution was started at the
            gridbox.
          type: string
          format: date-time
          readOnly: true
          example: '2018-04-15T00:00:00Z'
        finishedAt:
          description: Represents the time at which the execution was finished.
          type: string
          format: date-time
          readOnly: true
          example: '2018-04-15T00:00:00Z'
      required:
        - id
    JobWithExecutions:
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractJob'
        - properties:
            id:
              type: string
              format: uuid
              readOnly: true
              description: Unique identifier of a job.
              example: d90fc059-b1d0-4277-a347-43609e232f4f
            receivedAt:
              description: >-
                Represents the time at which the job was received by the
                gateway.
              type: string
              format: date-time
              readOnly: true
              example: '2018-04-15T00:00:00Z'
            startedAt:
              description: Represents the time at which the job was started.
              type: string
              format: date-time
              readOnly: true
              example: '2018-04-15T00:00:00Z'
            finishedAt:
              description: Represents the time at which the job was finished.
              type: string
              format: date-time
              readOnly: true
              example: '2018-04-15T00:00:00Z'
            executions:
              description: Represents a set of job executions.
              type: array
              items:
                $ref: '#/components/schemas/JobExecution'
          required:
            - id
            - state
            - type
            - executions
    JobCreation:
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractJob'
        - properties:
            id:
              type: string
              format: uuid
              readOnly: true
              description: Unique identifier of a job.
              example: d90fc059-b1d0-4277-a347-43609e232f4f
          required:
            - state
            - type
    BaseApplianceCreate:
      title: Base Appliance Create
      description: >
        BaseApplianceCreate contains fields of an appliance that can be set upon
        creation, regardless of appliance type.


        Specific appliance types extend this schema and add new fields.
      type: object
      required:
        - type
      properties:
        inactive:
          $ref: '#/components/schemas/ApplianceInactive'
        name:
          $ref: '#/components/schemas/ApplianceName'
        type:
          $ref: '#/components/schemas/ApplianceType'
        network:
          $ref: '#/components/schemas/Network'
        loadSettings:
          $ref: '#/components/schemas/LoadSettings'
        sensorSettings:
          $ref: '#/components/schemas/AbstractSensorSettings'
        state:
          $ref: '#/components/schemas/AbstractState'
        parent:
          $ref: '#/components/schemas/ApplianceParent'
        serialnumber:
          $ref: '#/components/schemas/ApplianceSerialNumber'
        cryptoSettings:
          title: Crypto Settings
          description: >-
            Contains a list of crypto setting keys that are associated with the
            appliance.
          type: array
          items:
            $ref: '#/components/schemas/AbstractCryptoSetting'
        energySettings:
          $ref: '#/components/schemas/AbstractEnergyManagementSettings'
    InverterCreate:
      title: Inverter Create
      description: |
        Inverter represents a monitor-/controllable inverter. It can be of kind:
        - `PV`/`PV_EXTERNAL`: used as photovoltaic only.
        - `BATTERY`: used as battery only.
        - `HYBRID`: used as both photovoltaic and battery.
        - `UNKNOWN`: default, when the inverter kind is not determined.
      allOf:
        - $ref: '#/components/schemas/BaseApplianceCreate'
        - $ref: '#/components/schemas/AbstractInverter'
    MeterCreate:
      title: Meter Create
      description: |
        Meter represents a monitor-/controllable meter.
      allOf:
        - $ref: '#/components/schemas/BaseApplianceCreate'
        - $ref: '#/components/schemas/AbstractMeter'
        - required:
            - auxMeter
    EVStationCreate:
      title: EV Charging Station Create
      description: >
        EV Charging Station represents a monitor-/controllable electric vehicle
        charging station.
      allOf:
        - $ref: '#/components/schemas/BaseApplianceCreate'
        - $ref: '#/components/schemas/AbstractEVStation'
        - required:
            - evChargingStation
          properties:
            evChargingStation:
              type: object
              properties:
                type:
                  type: string
    HeatPumpCreate:
      title: Heat Pump Create
      description: |
        Heat Pump represents a monitor-/controllable heat pump.
      allOf:
        - $ref: '#/components/schemas/BaseApplianceCreate'
        - $ref: '#/components/schemas/AbstractHeatPump'
        - required:
            - heatPump
    HeatMeterCreate:
      title: Heat Meter Create
      description: |
        Heat Meter represents a monitor-/controllable heat meter.
      allOf:
        - $ref: '#/components/schemas/BaseApplianceCreate'
        - $ref: '#/components/schemas/AbstractHeatMeter'
    ElectrolyzerCreate:
      title: Electrolyzer Create
      description: |
        Electrolyzer represents a monitor-/controllable electrolyzer.
      allOf:
        - $ref: '#/components/schemas/BaseApplianceCreate'
        - $ref: '#/components/schemas/AbstractElectrolyzer'
    IODeviceCreate:
      title: IO Device Create
      description: >
        IO devices represent configuration options that can be applied for
        appliances of the fieldbus coupler type.
      allOf:
        - $ref: '#/components/schemas/BaseApplianceCreate'
        - $ref: '#/components/schemas/AbstractIODevice'
        - required:
            - ioDevice
    HeaterCreate:
      title: Heater Create
      description: |
        Heater represents a monitor-/controllable heater.
      allOf:
        - $ref: '#/components/schemas/BaseApplianceCreate'
        - $ref: '#/components/schemas/AbstractHeater'
        - required:
            - heater
    ContainerCreate:
      title: Container Create
      description: >
        Container represents a container appliance, used to group multiple child
        appliances.
      allOf:
        - $ref: '#/components/schemas/BaseApplianceCreate'
        - $ref: '#/components/schemas/AbstractContainer'
        - required:
            - container
    ApplianceCreate:
      title: Appliance Create
      description: |
        Appliance represents a monitor-/controllable device such as Inverters,
        Meters and Heat Pumps.
      readOnly: true
      oneOf:
        - $ref: '#/components/schemas/InverterCreate'
        - $ref: '#/components/schemas/MeterCreate'
        - $ref: '#/components/schemas/EVStationCreate'
        - $ref: '#/components/schemas/HeatPumpCreate'
        - $ref: '#/components/schemas/HeatMeterCreate'
        - $ref: '#/components/schemas/ElectrolyzerCreate'
        - $ref: '#/components/schemas/IODeviceCreate'
        - $ref: '#/components/schemas/HeaterCreate'
        - $ref: '#/components/schemas/ContainerCreate'
      discriminator:
        propertyName: type
        mapping:
          INVERTER: '#/components/schemas/InverterCreate'
          METER: '#/components/schemas/MeterCreate'
          EVSTATION: '#/components/schemas/EVStationCreate'
          HEAT_PUMP: '#/components/schemas/HeatPumpCreate'
          HEAT_METER: '#/components/schemas/HeatMeterCreate'
          ELECTROLYZER: '#/components/schemas/ElectrolyzerCreate'
          IO_DEVICE: '#/components/schemas/IODeviceCreate'
          HEATER: '#/components/schemas/HeaterCreate'
          CONTAINER: '#/components/schemas/ContainerCreate'
    ApplianceCreateStrict:
      allOf:
        - $ref: '#/components/schemas/ApplianceCreate'
        - additionalProperties: false
    ApplianceUpdate:
      title: Appliance Update
      description: |
        ApplianceUpdate contains fields of an appliance that can be updated.
      type: object
      properties:
        inactive:
          $ref: '#/components/schemas/ApplianceInactive'
        name:
          $ref: '#/components/schemas/ApplianceName'
        reverseFlow:
          $ref: '#/components/schemas/ApplianceReverseFlow'
        room:
          $ref: '#/components/schemas/ApplianceRoom'
        loadSettings:
          $ref: '#/components/schemas/LoadSettings'
        kind:
          description: |
            Indicates the specific kind or role of the appliance.
            Only settable for appliances of type `INVERTER` or `METER`.
          type: string
          enum:
            - UNKNOWN
            - PV
            - PV_EXTERNAL
            - BATTERY
            - HYBRID
            - GRID
            - HEAT_PUMP
            - FUEL_CELL
            - HEAT_PUMP_EXTERNAL
            - EVSTATION
            - BTTP
            - HEATING
            - MISC
            - CLUSTER
            - WIND_TURBINE
        energySettings:
          $ref: '#/components/schemas/AbstractEnergyManagementSettings'
        cryptoSettings:
          title: Crypto Settings
          description: >-
            Contains a list of crypto setting keys that are associated with the
            appliance.
          type: array
          items:
            $ref: '#/components/schemas/AbstractCryptoSetting'
        evLoadManagementParameters:
          $ref: '#/components/schemas/EVLoadManagementParameters'
        evseID:
          $ref: '#/components/schemas/EVSEID'
        desiredState:
          $ref: '#/components/schemas/ApplianceState'
        heatPump:
          $ref: '#/components/schemas/AbstractHeatPumpInformation'
        ioDevice:
          $ref: '#/components/schemas/AbstractIODeviceInformation'
    ApplianceUpdateStrict:
      allOf:
        - $ref: '#/components/schemas/ApplianceUpdate'
        - additionalProperties: false
    HardwareStatusData:
      title: Hardware Status array
      type: object
      description: >
        HardwareStatusData provides information about the status of hardware and
        holds an array of HardwareStatus. 
      properties:
        data:
          type: array
          items:
            $ref: '#/components/schemas/HardwareStatus'
    AbstractEVChargingStationConfiguration:
      title: EV Charging Station Configuration
      description: >
        Configure the charge mode and other settings considered by the EMS and
        applied to the EV charging station.
      type: object
      properties:
        issueTimestamp:
          type: string
          format: date-time
          deprecated: true
          description: >
            Specifies when the configuration was send or received the last time
            by the EMS.


            **Deprecated** - No longer updated, always returns the current date.
        chargingEnabled:
          type: boolean
          nullable: true
          description: Specifies whether charging is allowed.
        chargingRemoteControllable:
          type: boolean
          nullable: true
          description: Specifies whether charging may be controlled via network connection.
        lockEnabled:
          type: boolean
          nullable: true
          description: Specifies whether the plug is locked.
        minRequestedSoc:
          type: number
          nullable: true
          minimum: 0
          maximum: 100
          format: double
          description: >
            The minimum SoC the EV shall have and keep to guarantee the range
            for the next usage.


            This is set by the user and needed for `DEPARTURE_TIME_EV` and
            `MIN_EV` charge modes.

            If this value is set, the `userTotalCapacity` needs to be set, too.

            Value is between 0.0 - 100.0 in %.
          example: 30
        departureTimestamp:
          type: string
          format: date-time
          nullable: true
          description: >
            The departure time of the EV for the `DEPARTURE_TIME_EV` charge
            mode.


            Only the time of the day is considered, not the exact date. 

            If the time of day is in the past it is interpreted as tomorrow and
            if it in the future it is today.
        estimatedDepartureTimestamp:
          type: string
          format: date-time
          description: >
            The estimated timestamp when the desired SoC is reached.


            Optimally, the timestamp is close to the user's wanted
            `departureTimestamp`.

            The estimated timestamp is calculated by the EMS and takes into
            account the current SoC of the EV and the fact that the EV power can
            be curtailed by the DLM.
        userSoc:
          type: number
          format: double
          nullable: true
          minimum: 0
          maximum: 100
          description: >
            The State of Charge (SoC) level read and set by the user for the
            connected EV.


            This is needed in cases where the SoC cannot be determined
            automatically.

            Value is between 0.0 - 100.0 in %.
          example: 50
        userTotalCapacity:
          type: number
          format: double
          nullable: true
          description: >
            The size of the EV's battery in Wh.


            If this cannot be determined directly from the hardware, then the
            user enters it during the onboarding process.

            The value is needed to calculate the energy that needs to be charged
            to fulfill the `minRequestedSoc`.
          minimum: 0
          example: 82000
        chargeMode:
          type: string
          description: |
            Defines how the EV shall be charged.
              * `FORCED_EV`: EV will be charged with full power until 100% SoC. This is the default behaviour, also if there is no configuration set. It does not require any additional fields to be set. Also commonly referred to as "Quick Charge".
              * `MIN_EV`: EV will be charged with full power until the specified `minRequestedSoc` (must be provided). Also commonly referred to as "Safety Charge".
              * `DEPARTURE_TIME_EV`: EV will be charged until `departureTimestamp` to the `minRequestedSoc`. This means that initially it charges with surplus energy, but if it is not enough it will charge with full power to meet the requested `departureTimestamp`. Also commonly referred to as "Program Charge".
              * `SURPLUS_EV`: EV will only be charged with surplus energy regardless of SoC level. It does not require any additional fields to be set. Also commonly referred to as "Solar Charge".
          enum:
            - FORCED_EV
            - MIN_EV
            - DEPARTURE_TIME_EV
            - SURPLUS_EV
        maxPowerCalculated:
          type: number
          format: double
          nullable: true
          description: >
            The maximum potential total charge power in Watt is calculated by
            the gridBox in usual setups.


            The total power is defined as sum of all phases' power.

            It considers the maximum power supported by the EV and that the
            power can be curtailed by the DLM.
          minimum: 0
          example: 8000
        maxChargePower:
          type: number
          format: double
          nullable: true
          description: |
            The maximum total power that the EV should be charged with in Watt.

            The total power is defined as sum of all phases' power.
            EV charging power will not exceed the specified value.
          minimum: 0
          example: 8000
        minChargePower:
          type: number
          format: double
          nullable: true
          description: >
            The minimum total power that the EV should be charged with in Watt.


            The total power is defined as sum of all phases' power.

            EV will only be charged if the total power is above the specified
            value.
          minimum: 0
          example: 2070
        minChargePowerPerPhase:
          type: number
          format: double
          description: >
            The minimum power that the EV should be charged with in Watt for one
            phase.


            EV will only be charged if **one** of the phases' power is above the
            specified value.
          minimum: 0
          example: 1840
        evProfileID:
          description: >-
            Represents the ID of the EV profile that is going to be used in the
            next charging session.
          type: string
          format: uuid
          example: 6dd0a658-5828-4d30-bc65-a03c6d6e425f
    EVChargingStationConfiguration:
      type: object
      readOnly: true
      allOf:
        - $ref: '#/components/schemas/AbstractEVChargingStationConfiguration'
        - required:
            - applianceID
            - createdAt
            - updatedAt
            - chargingEnabled
            - chargingRemoteControllable
            - lockEnabled
            - minRequestedSoc
            - departureTimestamp
            - userSoc
            - userTotalCapacity
            - maxPowerCalculated
            - maxChargePower
            - minChargePower
          properties:
            applianceID:
              type: string
              format: uuid
              description: |
                ID of the EV charging station this configuration belongs to. 
            createdAt:
              type: string
              format: date-time
              description: Specifies when the configuration was created.
            updatedAt:
              type: string
              format: date-time
              description: Specifies when the configuration was updated the last time.
    EVChargingStationConfigurationCreation:
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractEVChargingStationConfiguration'
    EVChargingStationConfigurationCreationStrict:
      allOf:
        - $ref: '#/components/schemas/EVChargingStationConfigurationCreation'
        - additionalProperties: false
    EVChargingStationConfigurationUpdate:
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractEVChargingStationConfiguration'
    AbstractElectricVehicleProfile:
      title: ElectricVehicleProfile
      description: Represents data related to an EV Profile.
      type: object
      properties:
        name:
          type: string
          description: Name of the EV profile.
          example: My profile
        manufacturer:
          type: string
          description: The manufacturer of the EV.
          example: Tesla
        model:
          type: string
          description: The model of the EV (manufacturer-dependent).
          example: Model-3
        color:
          type: string
          description: The color of the EV.
          example: red
        capacity:
          type: number
          description: Battery capacity of the EV in Wh.
          example: 12000
        averageConsumption:
          type: number
          description: The average consumption of the EV provided in Wh/100km.
          example: 30000
        phasesCount:
          type: number
          format: int64
          description: The number of phases used for charging the EV (range 1-3).
          example: 1
        minChargePower:
          description: >
            The minimum total power that the EV should be charged with in
            Watt.   


            If the EV Profile is assigned to a charging station, this
            configuration will be applied, 

            otherwise, the [EV Charging Station
            Configuration](https://developer.gridx.ai/reference/get_gateways-gatewayid-appliances-applianceid-ev-configuration)
            will be used.
          type: number
          format: double
          example: 8000
        userSoc:
          description: >
            The State of Charge (SoC) level read and set by the user for the
            connected EV.


            This is needed in cases where the SoC cannot be determined
            automatically.

            Value is between 0.0 - 100.0 in %.

            If the EV Profile is assigned to a charging station, this
            configuration will be applied,

            otherwise, the [EV Charging Station
            Configuration](https://developer.gridx.ai/reference/get_gateways-gatewayid-appliances-applianceid-ev-configuration)
            will be used.
          type: number
          format: double
          minimum: 0
          maximum: 100
          example: 50
        image:
          description: >-
            Image to be used when displaying the EV profile in base64 encoding.
            Format must be `jpeg` or `png`.
          type: string
          example: >-
            data:image/jpeg;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==
        minChargePowerPerPhase:
          type: number
          description: Defines the minimum charge power in W for one phase set by the user.
          example: 2070
        minRequestedSoc:
          type: number
          description: >-
            The minimum state of charge the EV shall have and keep to guarantee
            the range for the next usage. This is set by the user. The value
            ranges from 0.0 - 100.0 in %.
          example: 70
    ElectricVehicleProfile:
      allOf:
        - $ref: '#/components/schemas/AbstractElectricVehicleProfile'
        - properties:
            id:
              type: string
              format: uuid
              description: Unique identifier of an EV profile.
              example: 51c0c70f-dfcc-4520-b535-0ecc44c75e12
            systemID:
              description: Unique identifier of the system that this EV profile belongs to.
              type: string
              format: uuid
              example: 938b84d9-17e9-44e5-b422-4fb95ea3550b
            createdAt:
              type: string
              format: date-time
              readOnly: true
              description: >-
                Date when the EV profile was created in UTC using the RFC3339
                format.
              example: '2022-11-10T23:20:50Z'
            updatedAt:
              type: string
              format: date-time
              readOnly: true
              description: >-
                Date when the EV profile was updated the last time in UTC using
                the RFC3339 format.
              example: '2022-11-12T23:20:50Z'
            chargingStationApplianceIDs:
              readOnly: true
              title: ChargingStationApplianceIDs
              description: >
                ChargingStationApplianceIDs represents the charging station
                appliances the EV is assigned to.
              type: array
              items:
                type: string
                format: uuid
              example:
                - 6dd0a658-5828-4d30-bc65-a03c6d6e425f
                - e3bb9553-78a6-4f4f-98d5-5c5f9012251d
          required:
            - id
            - systemID
            - createdAt
            - updatedAt
    ElectricVehicleProfileCreate:
      allOf:
        - $ref: '#/components/schemas/AbstractElectricVehicleProfile'
        - properties:
            id:
              type: string
              format: uuid
              description: Unique identifier of an EV profile.
              example: 51c0c70f-dfcc-4520-b535-0ecc44c75e12
    ElectricVehicleProfileUpdate:
      allOf:
        - $ref: '#/components/schemas/AbstractElectricVehicleProfile'
    EVChargingScheduleCreation:
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractEVChargingSchedule'
        - required:
            - from
            - to
            - limit
    EVChargingScheduleCreationStrict:
      allOf:
        - $ref: '#/components/schemas/EVChargingScheduleCreation'
        - additionalProperties: false
    EVChargingScheduleUpdate:
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractEVChargingSchedule'
    EVChargingScheduleUpdateStrict:
      allOf:
        - $ref: '#/components/schemas/EVChargingScheduleUpdate'
    AbstractPowerLimitSchedule:
      title: Power Limit Schedule
      description: >
        A Power Limit Schedule is a schedule that defines recurring import power
        limits, 

        which should be applied to the grid meter.


        The schedule is recurring inside the interval bounds defined by `from`
        and `to`.


        There can be only one active timeframe for every point in time.

        Schedules can overlap, but they must not have overlapping timeframes. 
      type: object
      properties:
        title:
          type: string
          description: Name of this schedule. Must be unique for this system.
        from:
          type: string
          format: date-time
          description: From when the schedule applies (inclusive).
        to:
          type: string
          format: date-time
          description: Until when the schedule applies (exclusive).
        timezone:
          type: string
          description: >
            Fully qualified identifier of the timezone ([IANA timezone database
            identifiers](https://en.wikipedia.org/wiki/List_of_tz_database_time_zones))
            this schedule should be applied in.

            Used to determine time of day of the timeframes.
        timeframes:
          description: >
            List of timeframes containing which import limit should be applied
            at which time of the day.


            They must not overlap in this schedule and also not with timeframes
            of other schedules of this system.
          type: array
          items:
            type: object
            required:
              - from
              - to
              - maxPower
            properties:
              from:
                description: >
                  Time of day from when the limit of this timeframe should be
                  applied (inclusive).
                type: string
                example: '00:00'
              to:
                description: >
                  Time of day until when the limit of this timeframe should be
                  applied (exclusive).
                type: string
                example: '14:00'
              maxPower:
                description: >-
                  Max import power in Watt to apply to the grid meter during
                  this timeframe.
                type: integer
                format: int64
                minimum: 0
                example: 100000
        recurrence:
          type: object
          description: >
            Recurrence rules for this schedule.


            Inspired by
            [RFC5545](https://www.rfc-editor.org/rfc/rfc5545#section-3.3.10) and
            supporting a small subset of it.
          required:
            - frequency
          properties:
            frequency:
              description: Type of recurrence rule.
              type: string
              enum:
                - DAILY
            byDayOfWeek:
              description: |
                Specifies a list of weekdays this rule should apply to.
                Only valid for `frequency=DAILY`.

                Omitting it is the same as selecting all days.
              type: array
              items:
                type: string
                enum:
                  - SU
                  - MO
                  - TU
                  - WE
                  - TH
                  - FR
                  - SA
    PowerLimitSchedule:
      allOf:
        - $ref: '#/components/schemas/AbstractPowerLimitSchedule'
        - required:
            - id
            - title
            - from
            - to
            - timezone
            - timeframes
            - recurrence
            - status
            - createdAt
            - updatedAt
          properties:
            id:
              type: string
              format: uuid
              description: Unique ID of this schedule.
            timeframes:
              minItems: 1
            status:
              description: >
                Status of the schedule.


                - `ACTIVE`: A timeframe of this schedule is currently being
                applied.

                - `OUTDATED`: No more timeframes from this schedule will be
                applied.

                - `UPCOMING`: A timeframe of this schedule will be applied in
                the future.
              type: string
              enum:
                - ACTIVE
                - OUTDATED
                - UPCOMING
            createdAt:
              description: When the Power Limit Schedule was created.
              type: string
              format: date-time
            updatedAt:
              description: When the Power Limit Schedule was last updated.
              type: string
              format: date-time
    PowerLimitScheduleCreate:
      allOf:
        - $ref: '#/components/schemas/AbstractPowerLimitSchedule'
        - required:
            - title
            - from
            - to
            - timeframes
            - recurrence
          properties:
            timezone:
              default: Europe/Berlin
            timeframes:
              minItems: 1
    PowerLimitScheduleCreateStrict:
      allOf:
        - $ref: '#/components/schemas/PowerLimitScheduleCreate'
        - additionalProperties: false
    PowerLimitScheduleUpdate:
      allOf:
        - $ref: '#/components/schemas/AbstractPowerLimitSchedule'
    PowerLimitScheduleUpdateStrict:
      allOf:
        - $ref: '#/components/schemas/PowerLimitScheduleUpdate'
        - additionalProperties: false
    PowerLimitIntervals:
      description: >
        Ascending ordered list of intervals in which a scheduled power limit was
        applied.
      type: object
      required:
        - from
        - to
        - intervals
      properties:
        from:
          description: |
            From when the first interval of this object applied (inclusive).
            Equal to requested `interval` start, if there are no intervals.
          type: string
          format: date-time
        to:
          description: |
            Until when the last interval of this object applied (exclusive).
            Equal to requested `interval` start, if there are no intervals.
          type: string
          format: date-time
        intervals:
          type: array
          items:
            type: object
            required:
              - from
              - to
              - maxPower
            properties:
              from:
                description: From when the interval applied (inclusive).
                type: string
                format: date-time
              to:
                description: Until when the interval applied (exclusive).
                type: string
                format: date-time
              maxPower:
                description: Max import power in Watt applied during the interval.
                type: integer
                minimum: 0
                format: int64
    ConflictException:
      readOnly: true
      allOf:
        - $ref: '#/components/schemas/GeneralException'
        - title: ClientError - Conflict
          description: >
            Conflict indicates that the client is attempting to create a
            resource that already exists.
          type: object
          example:
            message: Resource already exists
    Money:
      description: Represents monetary value in a specific currency.
      type: object
      properties:
        value:
          type: number
          example: 138.43
        currency:
          type: string
          description: Currency code (ISO 4217)
          example: EUR
    Saving:
      description: Saving due to various optimizations.
      type: object
      allOf:
        - $ref: '#/components/schemas/Money'
        - properties:
            updatedAt:
              description: The datetime when the saving was calculated the last time.
              type: string
              example: '2023-05-12T23:20:50Z'
              format: date-time
          required:
            - value
            - currency
            - updatedAt
    TariffV2StaticPeriodTime:
      title: TariffV2 static period time
      description: >-
        Contains the information when a static period of a TariffV2 starts or
        ends.

        Described by the weekday and the seconds of this day.
      type: object
      properties:
        weekday:
          description: The weekdays index (Sunday=0, ...)
          type: integer
          minimum: 0
          maximum: 6
          example: 0
        secondsOfDay:
          description: >-
            The second of the weekday until the period is valid/which the period
            is valid from
          type: integer
          minimum: 0
          maximum: 86399
          example: 0
      required:
        - weekday
        - secondsOfDay
    TariffV2StaticPeriod:
      title: TariffV2 Static period
      description: >
        Contains the tariff periods for a tariff with either OfftakeType or
        FeedinType `STATIC`. 


        The period is active between `from` and `to`. `from` is included in the
        interval, `to` is excluded.
      type: object
      properties:
        from:
          $ref: '#/components/schemas/TariffV2StaticPeriodTime'
        to:
          $ref: '#/components/schemas/TariffV2StaticPeriodTime'
        feedinPrice:
          description: Price per kWh fed into the grid in the currency of the tariff.
          type: number
          example: 0.09
          default: 0
        offtakePrice:
          description: Price per kWh consumed from the grid in the currency of the tariff.
          type: number
          example: 0.4
          default: 0
      required:
        - from
        - to
    AbstractMarketDataSettings:
      title: Market Data Settings
      type: object
      description: Settings specific to market-data-based tariffs.
      properties:
        feedinOffset:
          type: number
          description: Sets the fee per kWh on top of market prices for feed-in tariffs.
          example: 2.5
        offtakeOffset:
          type: number
          description: Sets the fee per kWh on top of market prices for off-take tariffs.
          example: 2.5
        providerFee:
          type: number
          description: Additional fee per kWh on top, after applying VAT.
          example: 10
        vat:
          type: number
          description: The VAT is the value-added tax rate expressed as a decimal number.
          example: 0.12
    AbstractTariffV2:
      title: Energy TariffV2
      type: object
      description: >
        Represents an energy tariff.

        The tariff contains settings which specify where to take prices from and
        how the end prices will be calculated.


        If `feedinType` or `offtakeType` is `MARKET_DATA`, `marketDataSettings`
        is required.

        If `feedinType` or `offtakeType` is `STATIC` `staticPeriods` is
        required.


        For **external tariffs**, `feedinType` and `offtakeType` **both** have
        to be set to `EXTERNAL`.

        External tariffs are tariffs where the prices are sent directly via API
        and not calculated.

        The price periods are sent with the `/systems/{systemID}/tariff/prices`
        endpoint.
      properties:
        name:
          type: string
          description: Name of the energy tariff, to be chosen freely.
          example: E.ON Strom
          nullable: true
        currency:
          type: string
          description: Currency code (ISO 4217).
          example: EUR
        feedinType:
          type: string
          description: Type of feed-in tariff.
          example: STATIC
          enum:
            - MARKET_DATA
            - STATIC
            - EXTERNAL
        offtakeType:
          type: string
          description: Type of off-take tariff.
          example: MARKET_DATA
          enum:
            - MARKET_DATA
            - STATIC
            - EXTERNAL
        staticPeriods:
          description: >
            Weekly recurring periods with static prices. Used for example for
            completely static, day/night and weekend tariffs.


            Static periods have to form a closed loop. The loop must cover the
            whole week:

            A period has to end at the start of the next period. The end of the
            last period has to be the start of the first period.
          type: array
          items:
            $ref: '#/components/schemas/TariffV2StaticPeriod'
        marketDataSettings:
          $ref: '#/components/schemas/AbstractMarketDataSettings'
    MarketDataSettings:
      allOf:
        - $ref: '#/components/schemas/AbstractMarketDataSettings'
        - required:
            - feedinOffset
            - offtakeOffset
            - providerFee
            - vat
    TariffV2:
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractTariffV2'
        - properties:
            systemID:
              type: string
              description: ID of the system the tariff is assigned to
              format: uuid
              example: 3a07b17f-da57-4d61-b9e4-17c4fcd861c4
              readOnly: true
            createdAt:
              type: string
              description: Time at which the tariff was created using the RFC3339 format.
              example: '2021-10-10T23:20:50Z'
              format: date-time
              readOnly: true
            updatedAt:
              type: string
              description: Time at which the tariff was updated using the RFC3339 format.
              example: '2021-10-10T23:20:50Z'
              format: date-time
              readOnly: true
            currency:
              default: EUR
            marketDataSettings:
              $ref: '#/components/schemas/MarketDataSettings'
          required:
            - name
            - feedinType
            - offtakeType
            - systemID
            - createdAt
            - updatedAt
            - currency
    TariffV2Creation:
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractTariffV2'
        - type: object
          properties:
            marketDataSettings:
              $ref: '#/components/schemas/MarketDataSettings'
          required:
            - feedinType
            - offtakeType
    TariffV2CreationStrict:
      allOf:
        - $ref: '#/components/schemas/TariffV2Creation'
        - additionalProperties: false
    TariffV2Update:
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractTariffV2'
    TariffV2UpdateStrict:
      allOf:
        - $ref: '#/components/schemas/TariffV2Update'
        - additionalProperties: false
    AbstractEndpriceTariffV2Period:
      title: End-price Tariff V2 Period
      type: object
      description: |
        Represents a period of a TariffV2 with end prices.
        End prices are prices with applied offset, VAT and provider fee.
      properties:
        from:
          type: string
          format: date-time
          example: '2018-04-01T00:10:00Z'
          description: |
            Time at which the period starts in the RFC3339 format.
        to:
          type: string
          format: date-time
          example: '2018-04-01T00:10:00Z'
          description: |
            Time at which the period ends in the RFC3339 format.
        feedinPrice:
          type: number
          format: double
          example: 0.09
          description: >-
            Price including offset, VAT and provider fee per kWh for fed in
            energy in the period [from, to).
        offtakePrice:
          type: number
          format: double
          example: 0.4
          description: >-
            Price including offset, VAT and provider fee per kWh for consumed
            energy in the period [from, to).
        marketPrice:
          type: number
          nullable: true
          format: double
          example: 0.15
          description: >
            Raw market price (Day-Ahead EPEX Spot price with 60min resolution)
            per kWh at the time of this period in the bidding zone of the
            system.

            Returned regardless if underlying tariff has a market data type or
            not (if available).


            For static tariffs (both offtake & feedin =STATIC) this can be
            `null`, when there is no market price for the requested period.
      required:
        - from
        - to
        - feedinPrice
        - offtakePrice
    AbstractEndpriceTariffV2:
      title: End-price Tariff V2
      description: >
        Represent a tariff v2 with end price periods.

        End prices are prices with applied offset, VAT and provider fee.

        In contrast to normal "TariffV2" EndpriceTariffV2 always is for a
        particular interval

        and contains all periods for this interval.
      type: object
      properties:
        currency:
          type: string
          description: Currency code (ISO 4217)
          example: EUR
        periods:
          description: |
            List of periods containing end prices over non-overlapping periods. 
            The periods are sorted chronologically.
          type: array
          items:
            $ref: '#/components/schemas/AbstractEndpriceTariffV2Period'
    EndpriceTariffV2Period:
      allOf:
        - $ref: '#/components/schemas/AbstractEndpriceTariffV2Period'
        - type: object
          required:
            - marketPrice
    EndpriceTariffV2:
      allOf:
        - $ref: '#/components/schemas/AbstractEndpriceTariffV2'
        - type: object
          properties:
            name:
              type: string
              description: Name of the underlying TariffV2.
              nullable: true
            from:
              type: string
              format: date-time
              example: '2018-04-01T00:10:00Z'
              description: >
                Time at which the contained periods starts in the RFC3339
                format.
            to:
              type: string
              format: date-time
              example: '2018-04-01T00:10:00Z'
              description: |
                Time at which the contained period ends in the RFC3339 format.
            periods:
              items:
                $ref: '#/components/schemas/EndpriceTariffV2Period'
          required:
            - name
            - currency
            - from
            - to
            - periods
    EndPriceTariffV2Set:
      allOf:
        - $ref: '#/components/schemas/AbstractEndpriceTariffV2'
        - type: object
          properties:
            currency:
              description: |
                Currency code (ISO 4217)
                If not set, the currency of the tariff is used.
            periods:
              minItems: 1
          required:
            - periods
    EndPriceTariffV2SetStrict:
      allOf:
        - $ref: '#/components/schemas/EndPriceTariffV2Set'
        - additionalProperties: false
    DecisionInsight:
      type: object
      properties:
        motives:
          type: array
          items:
            type: string
            enum:
              - BATTERY_CHARGE_TO_COVER_LOAD
              - BATTERY_CHARGE_TO_DISCHARGE_TO_GRID
              - BATTERY_CHARGE_SURPLUS_TO_COVER_LOAD
              - BATTERY_CHARGE_SURPLUS_TO_DISCHARGE_TO_GRID
              - BATTERY_KEEP_TO_COVER_LOAD
              - BATTERY_KEEP_TO_DISCHARGE_TO_GRID
              - BATTERY_DISCHARGE_TO_GRID
              - EV_CHARGE_IN_LOW_PRICES
              - EV_CHARGE_TO_SATISFY_DESIRED_SOC
              - EV_KEEP_TO_EXPORT_SURPLUS_AND_CHARGE_FROM_GRID_LATER
              - HEAT_PUMP_RECOMMEND_ON_MOTIVE
          example:
            - BATTERY_CHARGE_TO_COVER_LOAD
          description: >
            Identifies the motivation behind a ToU decision. The following
            insights are implemented:

            1. `BATTERY_CHARGE_TO_COVER_LOAD`: Charge the battery in low
            `import_price` to cover load at higher import prices (>
            `break_even_import_price`) between `start_time` and `end_time`.

            2. `BATTERY_CHARGE_TO_DISCHARGE_TO_GRID`: Charge the battery in low
            `import_price` to discharge to grid at higher export prices (>
            `break_even_export_price`) between `start_time` and `end_time`.

            3. `BATTERY_CHARGE_SURPLUS_TO_COVER_LOAD`: Charge the battery from
            surplus to cover load later at higher import prices.

            4. `BATTERY_CHARGE_SURPLUS_TO_DISCHARGE_TO_GRID`: Charge the battery
            from surplus to discharge to grid at higher export prices.

            5. `BATTERY_KEEP_TO_COVER_LOAD`: Delay battery discharge to cover
            load at higher import prices (> `break_even_import_price`) between
            `start_time` and `end_time`.

            6. `BATTERY_KEEP_TO_DISCHARGE_TO_GRID`: Delay battery discharge to
            the grid at higher export prices (> `break_even_export_price`)
            between `start_time` and `end_time`.

            7. `BATTERY_DISCHARGE_TO_GRID`: Discharge the battery into the grid
            to benefit from high export prices.

            8. `EV_CHARGE_IN_LOW_PRICES`: Charge the EV earlier in low
            `import_price`. The desired SoC expected to be met at `end_time`.

            9. `EV_CHARGE_TO_SATISFY_DESIRED_SOC`: Force Charge the EV from grid
            to ensure that the desired SoC at pre-defined departure time
            (regardless of prices).

            10. `EV_KEEP_TO_EXPORT_SURPLUS_AND_CHARGE_FROM_GRID_LATER`: Prevent
            EV charge to allow PV surplus export at high export prices, and
            charge EV from grid later at lower import prices.

            11. `HEAT_PUMP_RECOMMEND_ON_MOTIVE`: Request increased heat pump
            operation, to avoid potential higher price periods or to use PV
            surplus.
        importPrice:
          type: number
          example: 0.1
          description: |
            Current import price at which the decision is taken.
        breakEvenImportPrice:
          type: number
          example: 0.1
          description: >
            Refers to the minimum import price at which using the stored energy
            later becomes more profitable than importing from grid, while
            accounting for battery efficiency losses.
        averageImportPrice:
          type: number
          example: 0.1
          description: |
            Average import price at which the stored energy was utilized.
        exportPrice:
          type: number
          example: 0.1
          description: |
            Current export price at which the decision is taken.
        breakEvenExportPrice:
          type: number
          example: 0.1
          description: >
            Refers to the minimum export price at which selling the stored
            energy to grid later becomes profitable, while accounting for
            battery efficiency losses.
        averageExportPrice:
          type: number
          example: 0.1
          description: |
            Average export price at which the stored energy was utilized.
        from:
          type: string
          format: date-time
          example: '2020-09-21T00:00:00Z'
          description: >
            Refers to the start time of an upcoming event justifying the current
            decision (e.g., start of battery discharge to cover load / to grid).
        to:
          type: string
          format: date-time
          example: '2020-09-21T01:00:00Z'
          description: >
            Refers to the end time of an upcoming event justifying the current
            decision (e.g., end of battery discharge to cover load / to grid).
    Decision:
      type: object
      properties:
        from:
          type: string
          format: date-time
        to:
          type: string
          format: date-time
        case_name:
          type: string
          enum:
            - BATTERY_SELF_CONSUMPTION
            - BATTERY_NO_DISCHARGE
            - BATTERY_CHARGE_FROM_GRID
            - BATTERY_DISCHARGE_TO_GRID
            - BATTERY_NO_CHARGE
            - BATTERY_LIMIT_CHARGE
            - BATTERY_LIMIT_DISCHARGE
            - BATTERY_UNDEFINED_DECISION
            - EV_NO_DECISION
            - EV_CHARGE_FROM_GRID
            - EV_NO_CHARGE
            - EV_LIMIT_CHARGE
            - EV_LIMIT_DISCHARGE
            - EV_UNDEFINED_DECISION
            - HEATPUMP_RECOMMEND_ON
            - HEATPUMP_AUTO
          example: BATTERY_CHARGE_FROM_GRID
          description: >
            Identifies underlying the decision case that this decision is based
            on.

            The following cases are implemented:

            1. `BATTERY_SELF_CONSUMPTION`: No time-of-use decision applied for
            the battery. In this case, the default

            self-consumption maximization logic applies to the battery.

            2. `BATTERY_NO_DISCHARGE`: Do not discharge the battery, even if
            there is demand and no PV surplus.

            Demand is served with power from the grid, instead of discharging
            the battery.

            3. `BATTERY_CHARGE_FROM_GRID`: Charge the battery with power for the
            grid, instead of only

            charging the PV surplus. The battery is forced to charge with
            maximum charging power.

            4. `BATTERY_DISCHARGE_TO_GRID`: Discharge the battery into the grid,
            instead of only discharging to serve demand. 

            Discharge of the battery may coincide with PV surplus, to benefit
            from high grid export prices charging the PV 

            surplus. The battery is forced to discharge with maximum power.

            5. `BATTERY_NO_CHARGE`: Do not charge the battery, even if there is
            PV surplus. PV surplus is injected

            into the grid, instead of charging the battery.

            6. `BATTERY_LIMIT_CHARGE`: Limit the charging power of the battery,
            even if there is additional PV surplus.

            7. `BATTERY_LIMIT_DISCHARGE`: Limit the discharging power of the
            battery, even if there is additional demand.

            8. `BATTERY_UNDEFINED_DECISION`: Decision applied to the battery,
            but the decision cannot be mapped to any

            other decision case. This case is used as a fallback for newly
            implemented decision cases.

            self-consumption maximization logic applies to the battery.

            9. `EV_NO_DECISION`: No time-of-use decision applied for the EV. In
            this case, the default

            charge logic applies to the EV, depending on the charge mode.

            10. `EV_CHARGE_FROM_GRID`: Charge the EV with power for the grid,
            instead of only

            charging the PV surplus. The EV is forced to charge with maximum
            charging power.

            11. `EV_NO_CHARGE`: Do not charge the EV, even if there is PV
            surplus.

            12. `EV_LIMIT_CHARGE`: Limit the charging power of the EV.

            13. `EV_LIMIT_DISCHARGE`: Limit the discharging power of the EV.

            14. `EV_UNDEFINED_DECISION`: Decision applied to the EV, but the
            decision cannot be mapped to any

            other decision case. This case is used as a fallback for newly
            implemented decision cases.

            15. `HEATPUMP_RECOMMEND_ON`: Recommending the heat pump to switch
            on.

            16. `HEATPUMP_AUTO`: The heat pump is set to run in its
            energy-efficient normal mode.
        insight:
          $ref: '#/components/schemas/DecisionInsight'
        isPriceBasedOptimization:
          type: boolean
          description: >-
            Indicates if the decision is based on price. In most cases,
            decisions not based on price correspond to the "default" decision
            for a particular appliance type.
      required:
        - from
        - to
        - case_name
        - isPriceBasedOptimization
    DecisionMetrics:
      type: object
      properties:
        percent_decision_taken:
          type: number
          format: double
          example: 75
          description: >
            Percentage of the taken decisions as a share of the total possible
            decisions during this time interval. Taken decisions are all
            decisions excluding "no-decision" cases.
      required:
        - percent_decision_taken
    Decisions:
      type: object
      properties:
        decisions:
          type: array
          items:
            $ref: '#/components/schemas/Decision'
        metrics:
          $ref: '#/components/schemas/DecisionMetrics'
      required:
        - decisions
        - metrics
    TimeOfUseSettings:
      description: Settings for the Time-of-Use (ToU) optimization feature.
      type: object
      properties:
        enabled:
          description: >
            If `true`, Time-of-Use (ToU) optimization is enabled for this
            system.
          type: boolean
          example: false
        enabledBatteryChargeFromGrid:
          description: >
            If `true`, the Time-of-Use (ToU) optimization is allowed to trigger
            charging of the battery while

            simultaneously importing electricity from the grid. Default: `true`
          example: true
          type: boolean
        enabledDischargeFlexibilityToGrid:
          description: >
            If `true`, the Time-of-Use optimization is allowed to trigger
            discharging of electricity from any

            flexibility (battery and EVCS, when EVCS discharge is supported)
            into the grid. Default: `false`
          example: false
          type: boolean
    TimeOfUseSettingsPut:
      allOf:
        - $ref: '#/components/schemas/TimeOfUseSettings'
        - properties:
            enabledBatteryChargeFromGrid:
              default: true
            enabledDischargeFlexibilityToGrid:
              default: false
          required:
            - enabled
    TimeOfUseSettingsPutStrict:
      allOf:
        - $ref: '#/components/schemas/TimeOfUseSettingsPut'
        - additionalProperties: false
    TimeOfUseSettingsPatchStrict:
      allOf:
        - $ref: '#/components/schemas/TimeOfUseSettings'
        - additionalProperties: false
    ToUErrorCode:
      type: string
      enum:
        - STATIC_PRICES
        - MISSING_PRICES
        - INCOMPLETE_PRICES
        - MISSING_GRID_METER
        - MULTIPLE_BATTERIES
        - MULTIPLE_EVCS
        - MULTIPLE_HEAT_PUMPS
        - MISSING_CONTROLLABLE_APPLIANCE
        - OFFLINE_APPLIANCE
        - INTERNAL_ERROR
      example: INTERNAL_ERROR
      description: >
        Most recent error causing a failure of Time-of-Use specific run.

        * `STATIC_PRICES` - Time-of-Use failing due to import and export prices
        are constant.

        * `MISSING_PRICES` - Time-of-Use failing due to missing import and
        export prices.

        * `INCOMPLETE_PRICES` - Time-of-Use failing due to incomplete import and
        export prices.

        * `MISSING_GRID_METER` - Time-of-Use failing due to missing grid meter.

        * `MULTIPLE_BATTERIES` - Time-of-Use failing due to multiple batteries
        within a system.

        * `MULTIPLE_EVCS` - Time-of-Use failing due to multiple EV charging
        stations within a system.

        * `MULTIPLE_HEAT_PUMPS` - Time-of-Use failing due to multiple heat pumps
        within a system.

        * `MISSING_CONTROLLABLE_APPLIANCE` - Time-of-Use failing due to missing
        controllable device (battery, EV or heat pump).

        * `OFFLINE_APPLIANCE` - Time-of-Use failing due to an offline appliance.

        * `INTERNAL_ERROR` - Time-of-Use failing due to an unknown, internal
        issue.
    ToUWarnings:
      type: array
      items:
        type: string
        enum:
          - MISSING_EV_CONFIG
          - MISSING_EV_PROFILE
          - UNSUPPORTED_CHARGE_MODE_QUICK
          - UNSUPPORTED_CHARGE_MODE_SURPLUS
          - UNSUPPORTED_CHARGE_MODE_SAFETY
          - UNSUPPORTED_CHARGE_MODE_UNKNOWN
      example:
        - MISSING_EV_CONFIG
      description: >
        All the relevant warnings that occurred during a Time-of-Use specific
        run.


        * `MISSING_EV_CONFIG` - Time-of-Use not working optimally due to missing
        EV configuration.

        * `MISSING_EV_PROFILE` - Time-of-Use not working optimally due to
        missing EV profile.

        * `UNSUPPORTED_CHARGE_MODE_QUICK` - Time-of-Use not working optimally
        due to EV set to Quick Charge Mode, which is not supported.

        * `UNSUPPORTED_CHARGE_MODE_SURPLUS` - Time-of-Use not working optimally
        due to EV set to Surplus Charge Mode, which is not supported.

        * `UNSUPPORTED_CHARGE_MODE_SAFETY` - Time-of-Use not working optimally
        due to EV set to Safety Charge Mode, which is not supported.

        * `UNSUPPORTED_CHARGE_MODE_UNKNOWN` - Time-of-Use not working optimally
        due to EV set to unknown charge mode.
    ToUReadinessReason:
      type: string
      enum:
        - UNKNOWN_REASON
        - UNSUPPORTED_SETUP_NO_APPLIANCES_FOUND
        - UNSUPPORTED_SETUP_MULTIPLE_BATTERIES
        - UNSUPPORTED_SETUP_MULTIPLE_EVCS
        - UNSUPPORTED_SETUP_MULTIPLE_GRID_METERS
        - UNSUPPORTED_SETUP_MULTIPLE_HEAT_PUMPS
        - UNSUPPORTED_SETUP_NO_GRID_METER
        - UNSUPPORTED_SETUP_NO_CONTROLLABLE_APPLIANCE
        - UNSUPPORTED_SETUP_UNKNOWN_APPLIANCE
        - UNSUPPORTED_APPLIANCE_PV_INVERTER
        - UNSUPPORTED_APPLIANCE_BATTERY_INVERTER
        - UNSUPPORTED_APPLIANCE_EVCS
        - UNSUPPORTED_APPLIANCE_HEAT_PUMP
        - SYSTEM_LOCATION_MISSING
        - TARIFF_PRICES_NOT_SET
        - TARIFF_PRICES_NOT_DYNAMIC
        - TARIFF_PRICES_BIDDING_ZONE_NOT_SET
      example: UNSUPPORTED_SETUP_NO_APPLIANCES_FOUND
      description: |
        Justification for ToU Readiness truth value.
    ToUReadiness:
      type: object
      properties:
        isTouReady:
          type: boolean
          example: false
          description: |
            Truth value whether system is ready for ToU.
        reasons:
          type: array
          description: >
            List of reasons detailing the cause(s) of the truth value of ToU
            Readiness
          items:
            $ref: '#/components/schemas/ToUReadinessReason'
      required:
        - isTouReady
    SystemGridSignals:
      type: object
      description: |
        Information about the grid signal capabilities of the system.
      properties:
        is14aCompliant:
          description: >
            Whether the system is compliant with §14a EnWG. Only for German
            market.
          type: boolean
    SystemGridSignalsUpdate:
      allOf:
        - $ref: '#/components/schemas/SystemGridSignals'
    SystemGridSignalsUpdateStrict:
      allOf:
        - $ref: '#/components/schemas/SystemGridSignalsUpdate'
        - additionalProperties: false
    SystemEMSCapability:
      description: >
        EMS capability of the system. Possible values:

        * `EMS_CAPABILITY_POWER_EQUALITY_CONSTRAINTS` - The EMS supports
        accepting and forwarding equality constraints (e.g. ActivePower = 42W).

        * `EMS_CAPABILITY_POWER_INEQUALITY_CONSTRAINTS` - The EMS supports
        considering inequality constraints for power limits (e.g. MaxActivePower
        = 2kW).

        * `EMS_CAPABILITY_BATTERY_DISCHARGE` - The EMS supports accepting
        constraints that cause assets to discharge their energy into the grid.
      type: string
      readOnly: true
      enum:
        - EMS_CAPABILITY_POWER_EQUALITY_CONSTRAINTS
        - EMS_CAPABILITY_POWER_INEQUALITY_CONSTRAINTS
        - EMS_CAPABILITY_BATTERY_DISCHARGE
    SystemEMSCapabilities:
      type: object
      description: |
        Information about the supported EMS capabilities of the system.
      properties:
        reportedAt:
          description: >
            Timestamp of last reported capabilities. If empty, no capabilities
            were reported by the system.
          type: string
          format: date-time
          readOnly: true
          example: '2029-11-10T23:20:50Z'
        capabilities:
          description: >
            List of supported capabilities. An empty list means no specific
            capabilities are supported by the current EMS.
          type: array
          readOnly: true
          items:
            $ref: '#/components/schemas/SystemEMSCapability'
    Measurement:
      title: Measurement
      type: object
      properties:
        measuredAt:
          type: string
          format: date-time
          example: '2018-04-01T00:10:00Z'
          description: |
            Date and time at which the data point was observed.
            For power values the data point is written after the aggregated 
            time span. For energy values the observation is stored at the 
            beginning of the aggregated time span.
        grid:
          type: number
          format: double
          description: |
            Grid is the measured power/energy at the grid connection point.

            For power values, Positive values indicate supply, Negative values
            indicate feed in.
        gridL1:
          type: number
          format: double
          description: |
            GridL1 is the power/energy measured at the grid connection point's 
            first phase.
        gridL2:
          type: number
          format: double
          description: |
            GridL2 is the power/energy measured at the grid connection point's 
            second phase.
        gridL3:
          type: number
          format: double
          description: |
            GridL3 is the power/energy measured at the grid connection point's 
            third phase.
        gridSupplyLimit:
          type: number
          format: double
          description: |
            GridSupplyLimit is the restriction of supplied power at the grid
            connection point.
        photovoltaic:
          type: number
          format: double
          description: |
            Photovoltaic is the measured power/energy in front of the
            photovoltaic systems.
        photovoltaicExternal:
          type: number
          format: double
          description: |
            PhotovoltaicExternal is the measured power/energy in front of the
            external photovoltaic systems.
        blockTypeThermalPowerStation:
          type: number
          format: double
          description: |
            BTTPPower is the measured power for the block-type thermal power
            station.
        fuelCell:
          type: number
          format: double
          description: |
            FuelCell is the measured power/energy in front of the fuel cells.
        production:
          type: number
          format: double
          description: Sum of all energy producing appliances (e.g. PV).
        battery:
          $ref: '#/components/schemas/BatteryMeasurement'
        batteries:
          type: array
          description: Battery measurements for each battery in the system.
          items:
            $ref: '#/components/schemas/BatteryMeasurement'
        heatPump:
          type: number
          format: double
          description: |
            Aggregated measured power/energy for heat pumps.
        heatPumpExternal:
          type: number
          format: double
          description: |
            Aggregated measured power/energy for heat pumps that have their own 
            heat pump tariff.
        heatPumps:
          type: array
          description: Heat pump measurements for each heat pump in the system.
          items:
            $ref: '#/components/schemas/HeatPumpMeasurement'
        heatMeters:
          type: array
          description: Heat meter measurements for each heat meter in the system.
          items:
            $ref: '#/components/schemas/HeatMeterMeasurement'
        evChargingStation:
          $ref: '#/components/schemas/EVStationMeasurement'
        evChargingStations:
          type: array
          description: |
            Charging station measurements for all charging stations that are 
            part of the system.
          items:
            $ref: '#/components/schemas/EVStationMeasurement'
        consumption:
          type: number
          format: double
          description: Adjusted power/energy of the system.
        totalConsumption:
          type: number
          format: double
          description: |
            Adjusted power/energy of the system including heatpumps
            and EV charging stations.
        selfConsumption:
          type: number
          format: double
          description: |
            Power/Energy consumed through production and charged into battery.
        directConsumption:
          type: number
          format: double
          description: |
            Power/energy consumed through production directly.
        directConsumptionHousehold:
          type: number
          format: double
          description: |
            Power/energy consumed by the household through production directly.
        directConsumptionHeatPump:
          type: number
          format: double
          description: |
            Power/energy consumed by the heat pump through production directly.
        directConsumptionEV:
          type: number
          format: double
          description: |
            Power/energy consumed by the EV through production directly.
        directConsumptionHeater:
          type: number
          format: double
          description: |
            Power/energy consumed by the heater through production directly.
        selfSupply:
          type: number
          format: double
          description: |
            Power/energy consumed through storage and production.
        selfSufficiencyRate:
          type: number
          format: double
          description: |
            Ratio of produced energy vs total consumed energy (0.0-1.0).
          example: 0.9
        selfConsumptionRate:
          type: number
          format: double
          description: Ratio of self consumption vs production (0.0-1.0).
        directConsumptionRate:
          type: number
          format: double
          description: Ratio of direct consumption vs production (0.0-1.0).
        heating:
          type: number
          format: double
          description: Aggregated power/energy measured for heaters.
        heatingTemperature:
          type: number
          format: double
          description: Average temperature of the heaters in °C.
        heaters:
          type: array
          description: |
            Heating measurement for all heaters that are part of the system.
          items:
            $ref: '#/components/schemas/MeasurementHeating'
        appliancePower:
          type: number
          format: double
          description: |
            Power of the appliances with misc location, empty for energy.
        appliances:
          type: array
          items:
            $ref: '#/components/schemas/MeasurementAppliance'
        gridMeterReadingPositive:
          type: number
          format: double
          description: |
            Meter reading for grid in Ws (Imported Energy), empty for energy.
        gridMeterReadingNegative:
          type: number
          format: double
          description: |
            Meter reading for grid in Ws (Exported Energy), empty for energy.
        heatPumpMeterReadingPositive:
          type: number
          format: double
          description: |
            Meter reading for heatpump in Ws (Imported Energy), empty for 
            energy.
        heatPumpMeterReadingNegative:
          type: number
          format: double
          description: |
            Meter Reading for heatpump in Ws (Exported Energy), empty for 
            energy.
        windTurbine:
          type: number
          format: double
        fuelCellMeterReadingPositive:
          type: number
          format: double
          description: Meter reading for FuelCell in Ws (Imported Energy).
        fuelCellMeterReadingNegative:
          type: number
          format: double
          description: Meter reading for FuelCell in Ws (Exported Energy).
        l1CurtailmentPower:
          type: number
          format: double
          description: |
            Potential max. charging power minus the actual setpoint in Ws on 
            phase 1.
        l2CurtailmentPower:
          type: number
          format: double
          description: |
            Potential max. charging power minus the actual setpoint in Ws on 
            phase 2.
        l3CurtailmentPower:
          type: number
          format: double
          description: |
            Potential max. charging power minus the actual setpoint in Ws on 
            phase 3.
        fuseProtectionCount:
          type: integer
          description: |
            Number of times the fuse was protected, based on the curtailed power
            over all phases.
    Measurements:
      title: Measurements
      type: object
      properties:
        total:
          allOf:
            - $ref: '#/components/schemas/MeasurementExtended'
            - properties:
                measuredAt:
                  description: >
                    Interval containing all data points in the requested
                    interval formatted in ISO8601.
                  type: string
                  example: 2018-04-01T00:00:00Z/2018-04-05T00:00:00Z
              type: object
        data:
          type: array
          items:
            allOf:
              - $ref: '#/components/schemas/MeasurementExtended'
              - properties:
                  measuredAt:
                    format: date-time
    MeasurementExtended:
      title: Extended Measurement
      type: object
      properties:
        measuredAt:
          type: string
          description: Time when the data was measured.
        gridL1:
          type: number
          format: double
          description: GridL1 is the part of the grid connection point's first phase.
        gridL2:
          type: number
          format: double
          description: GridL2 is the part of the grid connection point's second phase.
        gridL3:
          type: number
          format: double
          description: GridL3 is the part of the grid connection point's second phase.
        gridSupplyLimit:
          type: number
          format: double
          description: |
            GridSupplyLimit is the restriction of supplied power at the grid
            connection point.
        photovoltaic:
          type: number
          format: double
          description: |
            Photovoltaic is the measured power/energy in front of the
            photovoltaic systems.
        photovoltaicExternal:
          type: number
          format: double
          description: |
            PhotovoltaicExternal is the measured power/energy in front of the
            external photovoltaic systems.
        blockTypeThermalPowerStation:
          type: number
          format: double
          description: |
            BTTPPower is the measured power for the block-type thermal power
            station.
        fuelCell:
          type: number
          format: double
          description: FuelCell is the measured power/energy in front of the fuel cells.
        production:
          type: number
          format: double
          description: Production is sum of the producers.
        batteries:
          type: array
          items:
            $ref: '#/components/schemas/BatteryMeasurement'
        heatPump:
          type: number
          format: double
          description: HeatPump is the measured power/energy in front of the heat pumps.
        heatPumpExternal:
          type: number
          format: double
          description: |
            HeatPumpExternal is the measured power/energy in front of the heat
            pump which has its own heat pump tariff.
        evChargingStations:
          type: array
          items:
            $ref: '#/components/schemas/EVStationMeasurement'
        consumption:
          type: number
          format: double
          description: Consumption is adjusted power/energy of the system.
        totalConsumption:
          type: number
          format: double
          description: |
            Adjusted power/energy of the system which
            includes heatpump and EV.
        selfConsumption:
          type: number
          format: double
          description: |
            SelfConsumption is power/energy consumed through production and
            charged into battery.
        directConsumption:
          type: number
          format: double
          description: |
            DirectConsumption is power/energy consumed from production directly.
        directConsumptionHousehold:
          type: number
          format: double
          description: |
            DirectConsumptionHousehold is power/energy consumed by the
            household through production directly.
        directConsumptionHeatPump:
          type: number
          format: double
          description: |
            DirectConsumptionHeatPump is power/energy consumed by the heat pump
            through production directly.
        directConsumptionEV:
          type: number
          format: double
          description: |
            DirectConsumptionEV is power/energy consumed by the EV through
            production directly.
        directConsumptionHeater:
          type: number
          format: double
          description: |
            DirectConsumptionHeater is the power/energy consumed by the heater
            through production directly.
        selfSupply:
          type: number
          format: double
          description: SelfSupply is power/energy consumed through storage and production.
        selfSufficiencyRate:
          type: number
          format: double
        selfConsumptionRate:
          type: number
          format: double
        directConsumptionRate:
          type: number
          format: double
        heating:
          type: number
          format: double
          description: HeatingPower is the aggregated amount of power measured for heaters.
        heatingTemperature:
          type: number
          format: double
          description: HeatingTemperature is temperature of the heaters.
        heaters:
          type: array
          description: |
            Heating measurement for all heaters that are part of the system.
          items:
            $ref: '#/components/schemas/MeasurementHeating'
        appliancePower:
          type: number
          format: double
          description: AppliancePower is power of the appliances with misc location.
        appliances:
          type: array
          items:
            $ref: '#/components/schemas/MeasurementAppliance'
        gridMeterReadingPositive:
          type: number
          format: double
          description: |
            GridMeterReadingPositive is the meter Reading for grid in Ws
            (Imported Energy).
        gridMeterReadingNegative:
          type: number
          format: double
          description: |
            GridMeterReadingPositive is the meter Reading for grid in Ws
            (Exported Energy).
        heatPumpMeterReadingPositive:
          type: number
          format: double
          description: |
            HeatPumpMeterReadingPositive is the meter Reading for HeatPump in Ws
            (Imported Energy).
        heatPumpMeterReadingNegative:
          type: number
          format: double
          description: |
            HeatPumpMeterReadingNegative is the meter Reading for HeatPump in Ws
            (Exported Energy).
        windTurbine:
          type: number
          format: double
        fuelCellMeterReadingPositive:
          type: number
          format: double
          description: Meter reading for FuelCell in Ws (Imported Energy).
        fuelCellMeterReadingNegative:
          type: number
          format: double
          description: Meter reading for FuelCell in Ws (Exported Energy).
        l1CurtailmentPower:
          type: number
          format: double
          description: >
            Potential max. charging power minus the actual setpoint in Ws on
            phase 1.
        l2CurtailmentPower:
          type: number
          format: double
          description: >
            Potential max. charging power minus the actual setpoint in Ws on
            phase 2.
        l3CurtailmentPower:
          type: number
          format: double
          description: >
            Potential max. charging power minus the actual setpoint in Ws on
            phase 3.
        fuseProtectionCount:
          type: integer
          minimum: 0
          description: >
            Number of times the fuse was protected, based on the curtailed power
            over all phases.
        grid:
          $ref: '#/components/schemas/MeasurementGrid'
        battery:
          $ref: '#/components/schemas/MeasurementBatteryExtended'
        evChargingStation:
          $ref: '#/components/schemas/MeasurementEVStationExtended'
    MeasurementBatteryExtended:
      title: Extended Battery Measurement
      type: object
      properties:
        charge:
          type: number
          format: double
          description: Power/energy charged to the battery.
        discharge:
          type: number
          format: double
          description: Power/energy discharged from the battery.
        stateOfCharge:
          type: number
          format: double
          description: |
            Percentage of battery capacity charged (0.0-1.0).
        capacity:
          type: number
          format: double
          description: |
            Capacity is the maximum energy the battery can provide in Wh.
        nominalCapacity:
          type: number
          format: double
          description: |
            NominalCapacity is the nominal capacity of battery in Wh.
    MeasurementEVStationExtended:
      title: Extended EV Station Measurement
      type: object
      properties:
        charge:
          type: number
          format: double
          description: The measured charging power of the EV.
        discharge:
          type: number
          format: double
          description: Power/energy discharged from the EV.
        stateOfCharge:
          type: number
          format: double
          description: Percentage of EV battery charged (0.0-1.0).
        currentL1:
          type: number
          format: double
          description: |
            Current on the first phase of the EV station in A (ampere).
        currentL2:
          type: number
          format: double
          description: Current on the second phase of the EV station in A.
        currentL3:
          type: number
          format: double
          description: Current on the third phase of the EV station in A.
    MeasurementGrid:
      title: Measurement Grid
      type: object
      properties:
        measuredAt:
          type: string
          format: date-time
          description: Time when the data was measured.
        feedIn:
          type: number
          format: double
        supply:
          type: number
          format: double
        supplyLimit:
          type: number
          format: double
        meterReading:
          $ref: '#/components/schemas/MeasurementGridMeterReading'
    MeasurementGridMeterReading:
      title: Measurement Grid Meter Reading
      type: object
      properties:
        feedIn:
          type: number
          format: double
        supply:
          type: number
          format: double
    CombinedMeasurement:
      type: object
      description: Combined appliance and energy management measurement.
      allOf:
        - oneOf:
            - $ref: '#/components/schemas/BatteryMeasurement'
            - $ref: '#/components/schemas/InverterMeasurement'
            - $ref: '#/components/schemas/AUXMeterMeasurement'
            - $ref: '#/components/schemas/EVChargingStationMeasurement'
            - $ref: '#/components/schemas/HeatMeterMeasurement'
        - type: object
          properties:
            energyManagement:
              $ref: '#/components/schemas/EnergyManagementMeasurement'
    InverterMeasurement:
      title: Inverter's Measurements
      type: object
      properties:
        measuredAt:
          type: string
          format: date-time
          description: Time when the data was measured.
        gridFrequency:
          type: integer
          format: int32
          description: The locally measured grid frequency in centi (10^-2) Hz.
        acCurrent:
          type: integer
          format: int32
          description: AC current in mA.
        l1ACCurrent:
          type: integer
          format: int32
          description: AC current on phase L1 in mA.
        l2ACCurrent:
          type: integer
          format: int32
          description: AC current on phase L2 in mA.
        l3ACCurrent:
          type: integer
          format: int32
          description: AC current on phase L3 in mA.
        l1ACVoltage:
          type: integer
          format: int32
          description: AC voltage on phase L1 in mV.
        l2ACVoltage:
          type: integer
          format: int32
          description: AC voltage on phase L2 in mV.
        l3ACVoltage:
          type: integer
          format: int32
          description: AC voltage on phase L3 mV.
        acActivePower:
          type: integer
          format: int32
          description: AC active power in mW.
        acReactivePower:
          type: integer
          format: int32
          description: AC reactive power in VAr.
        acApparentPower:
          type: integer
          format: int32
          description: AC apparent power VA.
        dcCurrent:
          type: integer
          format: int32
          description: DC current in mA.
        dcVoltage:
          type: integer
          format: int32
          description: DC voltage in mV.
        dcPower:
          type: integer
          format: int32
          description: DC power in mW.
        kind:
          type: integer
          format: int32
          description: |
            Inverter kind describes if the inverter is used as PV, battery, or
            hybrid inverter.
        totalEnergyYield:
          type: integer
          format: int64
          description: Total amount of transformed energy in Wh.
        internalEnergyUse:
          type: integer
          format: int32
          description: Energy used by the inverter internally in Wh.
    HeatMeterMeasurement:
      title: Heat Meter Measurement
      description: |
        Measurement recorded for a heat meter.
      type: object
      properties:
        applianceID:
          type: string
        measuredAt:
          type: string
          format: date-time
          description: Time when the data was measured.
          example: '2018-04-01T00:00:00Z'
        flowRate:
          type: number
          format: double
          description: Volumetric flow rate given in m³/s.
          example: 0.9
        readingPositive:
          type: number
          format: double
          description: |
            Energy meter reading that was gained during circulation from 
            inflow to outflow in Wh.
          example: 2000
        readingNegative:
          type: number
          format: double
          description: |
            Energy meter reading that was consumed during circulation from 
            inflow to outflow in Wh.
          example: 1000
        power:
          type: number
          format: double
          description: Current power in W.
          example: 671.2
        inflowTemperature:
          type: number
          format: double
          description: Inflow temperature measured in °C.
          example: 26.1
        outflowTemperature:
          type: number
          format: double
          description: Outflow temperature measured in °C.
          example: 30
    ElectrolyzerMeasurement:
      title: Electrolyzer Measurement
      type: object
      properties:
        measuredAt:
          type: string
          format: date-time
          description: Time when the data was measured.
        status:
          type: integer
          format: int32
          description: Status is the local mode of the electrolyzer.
        statusPurification:
          type: boolean
          description: >-
            StatusPurification is the purification status of the electrolyzer. 0
            means no regeneration is in progress.
        flowSetpoint:
          type: number
          format: float
          description: Flow Setpoint value set by the customer in Nm3/h.
        hydrogenFlow:
          type: number
          format: float
          description: Hydrogen Flow leaving the electrolyzer in Nm3/h.
        pressure:
          type: number
          format: float
          description: Pressure in the electrolyzer in barg.
        rectifierEnergy1:
          type: number
          format: float
          description: Rectifier Energy at 400V in kW.
        rectifierEnergy2:
          type: number
          format: float
          description: Rectifier Energy at 21KV in kW.
        bufferPressure:
          type: number
          format: float
          description: Buffer Pressure of the Electrolyzer in barg.
        productionTime:
          type: number
          format: float
          description: Production Time in hours.
        timeUntilMaintenance:
          type: number
          format: float
          description: Time until maintenance in hours.
        pipelinePressure:
          type: number
          format: float
          description: Pipeline pressure in bar.
        customerHydrogenFlow1:
          type: number
          format: float
          description: Hydrogen flow in Nm3/h provided by the customer.
        customerHydrogenFlow2:
          type: number
          format: float
          description: Hydrogen flow in Nm3/h provided by an additional customer.
        customerHydrogenFlow3:
          type: number
          format: float
          description: Hydrogen flow in Nm3/h provided by an additional customer.
        customerHydrogenFlow4:
          type: number
          format: float
          description: Hydrogen flow in Nm3/h provided by an additional customer.
        customerHydrogenFlow5:
          type: number
          format: float
          description: Hydrogen flow in Nm3/h provided by an additional customer.
      required:
        - measuredAt
    AUXMeterMeasurement:
      title: Meter's Measurement
      type: object
      properties:
        measuredAt:
          type: string
          format: date-time
          description: Time when the data was measured.
        l1ActivePower:
          type: integer
          format: int64
          description: L1 Active Power in mW.
        l1ActivePowerReadingPositive:
          type: integer
          format: int64
          description: L1 Active Power Reading (Imported Energy) in Ws.
        l1ActivePowerReadingNegative:
          type: integer
          format: int64
          description: L2 Active Power Reading (Exported Energy) in Ws.
        l1ReactivePower:
          type: integer
          format: int64
          description: L1 Reactive Power in VAr.
        l1ReactivePowerReadingPositive:
          type: integer
          format: int64
          description: L1 Reactive Power Reading (Imported Energy) in VArs.
        l1ReactivePowerReadingNegative:
          type: integer
          format: int64
          description: L1 Reactive Power Reading (Exported Energy) in VArs.
        l1ApparentPower:
          type: integer
          format: int64
          description: L1 Apparent Power in VA.
        l1ApparentPowerReadingPositive:
          type: integer
          format: int64
          description: L1 Apparent Power Reading (Imported Energy) in VAs.
        l1ApparentPowerReadingNegative:
          type: integer
          format: int64
          description: L1 Apparent Power Reading (Exported Energy) in VAs.
        l1Current:
          type: integer
          format: int32
          description: L1 Current in mA.
        l1Voltage:
          type: integer
          format: int32
          description: L1 Voltage in mV.
        l1ImportPowerLimit:
          type: integer
          format: int64
          description: L1 maximum imported power in mW.
        l2ActivePower:
          type: integer
          format: int64
          description: L2 Active Power in mW.
        l2ActivePowerReadingPositive:
          type: integer
          format: int64
          description: L2 Active Power Reading (Imported Energy) in Ws.
        l2ActivePowerReadingNegative:
          type: integer
          format: int64
          description: L2 Active Power Reading (Exported Energy) in Ws.
        l2ReactivePower:
          type: integer
          format: int64
          description: L2 Reactive Power in VAr.
        l2ReactivePowerReadingPositive:
          type: integer
          format: int64
          description: L2 Reactive Power Reading (Imported Energy) in VArs.
        l2ReactivePowerReadingNegative:
          type: integer
          format: int64
          description: L2 Reactive Power Reading (Exported Energy) in VArs.
        l2ApparentPower:
          type: integer
          format: int64
          description: L2 Apparent Power in VA.
        l2ApparentPowerReadingPositive:
          type: integer
          format: int64
          description: L2 Apparent Power Reading (Imported Energy) in VAs.
        l2ApparentPowerReadingNegative:
          type: integer
          format: int64
          description: L2 Apparent Power Reading (Exported Energy) in VAs.
        l2Current:
          type: integer
          format: int32
          description: L2 Current in mA.
        l2Voltage:
          type: integer
          format: int32
          description: L2 Voltage in mV.
        l2ImportPowerLimit:
          type: integer
          format: int64
          description: L2 maximum imported power in mW.
        l3ActivePower:
          type: integer
          format: int64
          description: L3 Active Power in mW.
        l3ActivePowerReadingPositive:
          type: integer
          format: int64
          description: L3 Active Power Reading (Imported Energy) in Ws.
        l3ActivePowerReadingNegative:
          type: integer
          format: int64
          description: L3 Active Power Reading (Exported Energy) in Ws.
        l3ReactivePower:
          type: integer
          format: int64
          description: L3 Reactive Power in VAr.
        l3ReactivePowerReadingPositive:
          type: integer
          format: int64
          description: L3 Reactive Power Reading (Imported Energy) in VArs.
        l3ReactivePowerReadingNegative:
          type: integer
          format: int64
          description: L3 Reactive Power Reading (Exported Energy) in VArs.
        l3ApparentPower:
          type: integer
          format: int64
          description: L3 Apparent Power in VA.
        l3ApparentPowerReadingPositive:
          type: integer
          format: int64
          description: L3 Apparent Power Reading (Imported Energy) in VAs.
        l3ApparentPowerReadingNegative:
          type: integer
          format: int64
          description: L3 Apparent Power Reading (Exported Energy) in VAs.
        l3Current:
          type: integer
          format: int32
          description: L3 Current in mA.
        l3Voltage:
          type: integer
          format: int32
          description: L3 Voltage in mV.
        l3ImportPowerLimit:
          type: integer
          format: int64
          description: L3 maximum imported power in mW.
        sumActivePower:
          type: integer
          format: int64
          description: Sum Active Power in mW.
        sumActivePowerReadingPositive:
          type: integer
          format: int64
          description: Sum Active Power Reading (Imported Energy) in Ws.
        sumActivePowerReadingNegative:
          type: integer
          format: int64
          description: Sum Active Power Reading (Exported Energy) in Ws.
        sumApparentPower:
          type: integer
          format: int64
          description: Sum Apparent Power in VA.
        sumApparentPowerReadingPositive:
          type: integer
          format: int64
          description: Sum Apparent Power Reading (Imported Energy) in VAs.
        sumApparentPowerReadingNegative:
          type: integer
          format: int64
          description: Sum Apparent Power Reading (Exported Energy) in VAs.
        sumImportPowerLimit:
          type: integer
          format: int64
          description: Sum Maximum imported power in mW.
        sumPowerFactor:
          type: integer
          format: int32
          description: Power factor in deg.
    EnergyManagementMeasurement:
      title: Energy Management Measurement
      type: object
      properties:
        measuredAt:
          type: string
          format: date-time
          description: Time when the data was measured.
        strategyID:
          type: string
          description: |
            True if the PV power is dynamically limited based on the available
            battery capacity.
        dynamicFeedInCurtailment:
          type: boolean
          description: |
            True if the PV power is dynamically limited based on the available
            battery capacity.
        prognosisBasedBatteryCharging:
          type: boolean
          description: |
            True if a forecast is used to determine the future feed-in into the
            batteries.
        activePowerSetpoint:
          type: integer
          format: int64
          description: The setpoint the appliance should follow in mW.
        activePowerSetpointSystemicError:
          type: integer
          format: int64
          description: |
            The measured deviation from the setpoint for the active power value
            in mW.
        l1CurrentSetpoint:
          type: integer
          format: int64
          description: Is the setpoint the appliance should follow in mA on phase 1.
        l2CurrentSetpoint:
          type: integer
          format: int64
          description: Is the setpoint the appliance should follow in mA on phase 2.
        l3CurrentSetpoint:
          type: integer
          format: int64
          description: Is the setpoint the appliance should follow in mA on phase 3.
        maxStateOfChargeAfterMaxFeedIn:
          type: integer
          format: int32
          description: >
            MaxStateOfChargeAfterMaxFeedIn is the max state of charge (0-100%)
            the

            battery can reach while considering the capacity needed to store the

            energy above max feed-in. (eBatMax - eBatOverFeedIn) * 100 /

            eBatMax.
        predictedEnergyOutput:
          type: integer
          format: int64
          description: |
            PredictedEnergyOutput is the predicted electrical energy output of
            this appliance in Wh based on the forecast model, including error
            adjustments.
        energyOverFeedInCumulatedDaily:
          type: integer
          format: int64
          description: |
            EnergyOverFeedInCumulatedDaily is the cumulated energy over the
            feed-in that is saved this day thanks to the energy management. This
            value is reported by the grid meter in Wh.
    EVStationMeasurement:
      title: |
        MeasurementEVStation represents the power or energy the gateway measured
        from a ev charging station
      type: object
      properties:
        applianceID:
          type: string
          description: gridX API internal ID of the appliance.
          example: a7d56cb5-2dac-48d4-952a-6eb75ee0ce18
        power:
          type: number
          format: double
          description: |
            Measured power used to charge/discharge via EV station,
            positive values indicate charging, negatives discharging.
        stateOfCharge:
          type: number
          format: double
          description: |
            Percentage of the EVs battery capacity charged (0.0-1.0).
        readingTotal:
          type: number
          format: double
          description: The sum of all meter readings in Wh.
        readingTariff1:
          type: number
          format: double
          description: The meter reading of meter tariff 1 in Wh.
        readingTariff2:
          type: number
          format: double
          description: The meter reading of meter tariff 2 in Wh.
        plugState:
          type: string
          description: >-
            Defines whether this EV is currently plugged in the charging station
            and whether it's charging.
        currentL1:
          type: number
          format: double
          description: Current of the first phase in Ampere.
        currentL2:
          type: number
          format: double
          description: Current of the second phase in Ampere.
        currentL3:
          type: number
          format: double
          description: Current of the third phase in Ampere.
    EVChargingStationMeasurement:
      title: EV Charging Station's Measurement
      type: object
      properties:
        measuredTimestamp:
          type: string
          format: date-time
          description: Date and time the data point was collected.
        l1Voltage:
          type: integer
          format: int32
          description: Voltage for first phase in mW.
        l2Voltage:
          type: integer
          format: int32
          description: Voltage for second phase in mW.
        l3Voltage:
          type: integer
          format: int32
          description: Voltage for third phase in mW.
        l1Current:
          type: integer
          format: int32
          description: Current for first phase in mA.
        l2Current:
          type: integer
          format: int32
          description: Current for second phase in mA.
        l3Current:
          type: integer
          format: int32
          description: Current for third phase in mA.
        realPower:
          type: integer
          format: int64
          description: |
            Real Power in mW. Positive values mean charging, negative values
            mean discharging (V2G; currently not done).
        powerFactor:
          type: integer
          format: int32
          description: Power Factor in 0.1% (cosphi).
        realPowerL1:
          type: integer
          format: int64
          description: Real Power L1 in mW.
        realPowerL2:
          type: integer
          format: int64
          description: Real Power L2 in mW.
        realPowerL3:
          type: integer
          format: int64
          description: Real Power L3 in mW.
        temperature:
          type: integer
          format: int64
          description: Temperature inside the charging station in °C.
        capacity:
          type: integer
          format: int32
          description: The total capacity of the EV battery in Wh.
        stateOfCharge:
          type: number
          format: double
          description: |
            The current state of charge of the EV battery in percent from 0.0 -
            100.0%.
        maxCharge:
          type: integer
          format: int32
          description: Maximum allowed charge power in mW.
        minCharge:
          type: integer
          format: int32
          description: |
            Minimum allowed charge power in mW, below this power the EV won't
            charge.
        maxDischarge:
          type: integer
          format: int32
          description: Maximum allowed discharge power in mW.
        stationState:
          type: string
          description: |
            State indicating whether the charging station is charging, ready, in
            error state, etc.
        plugState:
          type: string
          description: |
            State indicates whether an EV is plugged into the charging station.
        pluggedIn:
          type: boolean
          description: |
            PluggedIn true if an electric vehicle is currently plugged into the
            charging station.
        tokenId:
          type: string
          description: |
            TokenID is the used authentication token at the charging station.
    BatteryMeasurement:
      title: Battery Measurement
      description: |
        MeasurementBattery represents the aggregated power or energy the gateway
        measured from a battery.
      type: object
      properties:
        applianceID:
          type: string
          description: |
            ApplianceID is the battery's appliance ID. It is empty for
            aggregated batteries.
          example: a7d56cb5-2dac-48d4-952a-6eb75ee0ce18
        power:
          type: number
          format: double
          description: |
            Power is the measured power used to charge/discharge the battery.

            Unit W, Meaning, Positive values indicate discharging. Negative
            values indicate charging.
        remainingCharge:
          type: number
          format: double
          description: RemainingCharge is the amount of energy left.
        capacity:
          type: number
          format: double
          description: Maximum energy the battery can provide in Wh.
        nominalCapacity:
          type: number
          format: double
          description: Nominal capacity of the battery in Wh.
        stateOfCharge:
          type: number
          format: double
          description: |
            State of Charge indicates how full a battery is. Unit Percentage
            points 0.0-1.0.
    HeatPumpMeasurement:
      title: Heat pump measurement
      type: object
      properties:
        applianceID:
          type: string
        power:
          type: number
          format: double
    MeasurementHeating:
      title: Heater Measurement
      type: object
      properties:
        measuredAt:
          type: string
          format: date-time
          description: Represents the time when the data was measured.
        applianceID:
          type: string
          description: Unique identifier for referencing a heater.
        power:
          type: number
          format: double
          description: Power consumed by the heater in W.
        powerL1:
          type: number
          format: int64
          description: Power consumed by the heater on the first phase in W.
        powerL2:
          type: number
          format: int64
          description: Power consumed by the heater on the second phase in W.
        powerL3:
          type: number
          format: int64
          description: Power consumed by the heater on the third phase in W.
        temperature:
          type: number
          format: double
          description: Temperature measured by this heater in °C.
        minTemperature:
          type: number
          format: double
          description: Minimum temperature measured by this heater in °C.
        maxTemperature:
          type: number
          format: double
          description: Maximum temperature measured by this heater in °C.
    MeasurementAppliance:
      title: Additional meter appliances
      description: |
        Used in installations that have multiple grid meters, e.g. for 
        multi family homes which a central PV but multiple meters.
      type: object
      properties:
        applianceID:
          type: string
          description: gridX API internal identifier of the meter.
          example: a7d56cb5-2dac-48d4-952a-6eb75ee0ce18
        power:
          type: number
          format: double
          description: Power/energy measured for this meter in W.
        kind:
          type: string
          description: Kind of the appliance measurement.
      required:
        - applianceID
    RawInverterMeasurement:
      title: A raw measurement produced by an inverter.
      type: object
      properties:
        measuredAt:
          type: string
          format: date-time
          description: Time when the data was measured in UTC using the RFC3339 format.
        gridFrequency:
          type: integer
          format: int32
          minimum: 0
          description: Grid frequency in centi (10^-2) Hz.
        acCurrent:
          type: integer
          format: int32
          minimum: 0
          description: AC current in mA.
        l1ACCurrent:
          type: integer
          format: int32
          minimum: 0
          description: AC current for the first phase in mA.
        l2ACCurrent:
          type: integer
          format: int32
          minimum: 0
          description: AC current for the second phase in mA.
        l3ACCurrent:
          type: integer
          format: int32
          minimum: 0
          description: AC current for the third phase in mA.
        l1ACVoltage:
          type: integer
          format: int32
          minimum: 0
          description: AC voltage for the first phase in mV.
        l2ACVoltage:
          type: integer
          format: int32
          minimum: 0
          description: AC voltage for the second phase in mV.
        l3ACVoltage:
          type: integer
          format: int32
          minimum: 0
          description: AC voltage for the third phase in mV.
        acActivePower:
          type: integer
          format: int32
          description: AC active power in mW.
        acReactivePower:
          type: integer
          format: int32
          description: AC reactive power in mW.
        acApparentPower:
          type: integer
          format: int32
          description: AC apparent power in mW.
        dcCurrent:
          type: integer
          format: int32
          minimum: 0
          description: DC current in mA.
        dcVoltage:
          type: integer
          format: int32
          minimum: 0
          description: DC current in mV.
        dcPower:
          type: integer
          format: int32
          description: DC current in mW.
    RawBatteryMeasurement:
      title: A measurement produced by a battery (inverter).
      type: object
      properties:
        measuredAt:
          type: string
          format: date-time
          description: Time when the data was measured in UTC using RFC3339 format.
        capacity:
          type: integer
          format: int32
          minimum: 0
          description: Capacity in Wh.
        nominalCapacity:
          type: integer
          format: int32
          minimum: 0
          description: Nominal capacity in Wh.
        stateOfCharge:
          type: integer
          format: int32
          minimum: 0
          description: Value in range 0-100, state of charge in percent.
        stateOfHealth:
          type: integer
          format: int32
          minimum: 0
          description: Value in range 0-100, health of the battery in percent.
        temperature:
          type: integer
          format: int32
          description: Temperature of the battery in degrees Celsius.
        presentCharge:
          type: integer
          format: int32
          minimum: 0
          description: Current charge of the battery in mW.
        presentDischarge:
          type: integer
          format: int32
          minimum: 0
          description: Current discharge of the battery in mW.
    RawMeterMeasurement:
      title: A measurement produced by a grid meter.
      type: object
      properties:
        measuredAt:
          type: string
          format: date-time
          description: Time when the data was measured in UTC using RFC3339 format.
        l1ActivePower:
          type: integer
          format: int64
          description: Active power for the first phase in mW.
        l1ActivePowerReadingPositive:
          type: integer
          format: int64
          minimum: 0
          description: Active power reading for the first phase in Ws (imported).
        l1ActivePowerReadingNegative:
          type: integer
          format: int64
          minimum: 0
          description: Active power reading for the first phase in Ws (exported).
        l1ReactivePower:
          type: integer
          format: int64
          description: Reactive power in VAr for the first phase.
        l1ReactivePowerReadingPositive:
          type: integer
          format: int64
          minimum: 0
          description: >-
            Reactive power reading (imported energy) in VArs for the first phase
            .
        l1ReactivePowerReadingNegative:
          type: integer
          format: int64
          minimum: 0
          description: >-
            Reactive power reading (exported energy) in VArs for the first
            phase.
        l1ApparentPower:
          type: integer
          format: int64
          description: Apparent power for the first phase in VA.
        l1ApparentPowerReadingPositive:
          type: integer
          format: int64
          minimum: 0
          description: Apparent power reading (imported energy) in VAs for the first phase.
        l1ApparentPowerReadingNegative:
          type: integer
          format: int64
          minimum: 0
          description: >-
            Apparent power reading (imported energy) in VAs for the second
            phase.
        l1Current:
          type: integer
          format: int32
          minimum: 0
          description: Current for the first phase in mA.
        l1Voltage:
          type: integer
          format: int32
          minimum: 0
          description: Voltage at the first phase in mV.
        l1ImportPowerLimit:
          type: integer
          format: int64
          description: Maximum imported power for the first phase in mW.
        l2ActivePower:
          type: integer
          format: int64
        l2ActivePowerReadingPositive:
          type: integer
          format: int64
          minimum: 0
        l2ActivePowerReadingNegative:
          type: integer
          format: int64
          minimum: 0
        l2ReactivePower:
          type: integer
          format: int64
        l2ReactivePowerReadingPositive:
          type: integer
          format: int64
          minimum: 0
        l2ReactivePowerReadingNegative:
          type: integer
          format: int64
          minimum: 0
        l2ApparentPower:
          type: integer
          format: int64
        l2ApparentPowerReadingPositive:
          type: integer
          format: int64
          minimum: 0
        l2ApparentPowerReadingNegative:
          type: integer
          format: int64
          minimum: 0
        l2Current:
          type: integer
          format: int64
          minimum: 0
        l2Voltage:
          type: integer
          format: int64
          minimum: 0
        l2ImportPowerLimit:
          type: integer
          format: int64
        l3ActivePower:
          type: integer
          format: int64
        l3ActivePowerReadingPositive:
          type: integer
          format: int64
          minimum: 0
        l3ActivePowerReadingNegative:
          type: integer
          format: int64
          minimum: 0
        l3ReactivePower:
          type: integer
          format: int64
        l3ReactivePowerReadingPositive:
          type: integer
          format: int64
          minimum: 0
        l3ReactivePowerReadingNegative:
          type: integer
          format: int64
          minimum: 0
        l3ApparentPower:
          type: integer
          format: int64
        l3ApparentPowerReadingPositive:
          type: integer
          format: int64
          minimum: 0
        l3ApparentPowerReadingNegative:
          type: integer
          format: int64
          minimum: 0
        l3Current:
          type: integer
          format: int64
          minimum: 0
        l3Voltage:
          type: integer
          format: int64
          minimum: 0
        l3ImportPowerLimit:
          type: integer
          format: int64
        sumActivePower:
          type: integer
          format: int64
        sumActivePowerReadingPositive:
          type: integer
          format: int64
          minimum: 0
        sumActivePowerReadingNegative:
          type: integer
          format: int64
          minimum: 0
        sumReactivePower:
          type: integer
          format: int64
        sumReactivePowerReadingPositive:
          type: integer
          format: int64
          minimum: 0
        sumReactivePowerReadingNegative:
          type: integer
          format: int64
          minimum: 0
        sumApparentPower:
          type: integer
          format: int64
        sumApparentPowerReadingPositive:
          type: integer
          format: int64
          minimum: 0
        sumApparentPowerReadingNegative:
          type: integer
          format: int64
          minimum: 0
        sumImportPowerLimit:
          type: integer
          format: int64
        sumPowerFactor:
          type: integer
          format: int64
          minimum: 0
    RawEVChargingStationMeasurement:
      title: A measurement produced by an EV charging station.
      type: object
      properties:
        measuredAt:
          type: string
          format: date-time
          description: Time when the data was measured.
        l1Voltage:
          type: integer
          format: int32
          minimum: 0
          description: Voltage at the first phase in mV.
        l2Voltage:
          type: integer
          format: int32
          minimum: 0
        l3Voltage:
          type: integer
          format: int32
          minimum: 0
        l1Current:
          type: integer
          format: int32
          minimum: 0
          description: Current for the first phase in mA.
        l2Current:
          type: integer
          format: int32
          minimum: 0
        l3Current:
          type: integer
          format: int32
          minimum: 0
        realPower:
          type: integer
          format: int64
          description: >-
            Real power in mW (positive values indicate charging, negative
            discharging).
        l1RealPower:
          type: integer
          format: int64
          description: Real power for the first phase in mW.
        l2RealPower:
          type: integer
          format: int64
        l3RealPower:
          type: integer
          format: int64
        powerFactor:
          type: integer
          format: int32
          minimum: 0
          description: Power factor in 0.1% (cosphi).
        stateOfCharge:
          type: number
          format: double
          description: State of charge of the vehicle in percent.
        capacity:
          type: integer
          format: int32
          minimum: 0
          description: Capacity of the vehicle in Wh.
        maxCharge:
          type: integer
          format: int32
          minimum: 0
          description: Maximum allowed charge power in mW.
        minCharge:
          type: number
          format: double
          description: Minimum allowed charge power in mW.
        maxDischarge:
          type: integer
          format: int32
          minimum: 0
        stationState:
          type: string
          default: UNKNOWN
          enum:
            - UNKNOWN
            - NOT_READY
            - READY
            - CHARGING
            - CHARGING_INTERRUPTED
            - ERROR
        plugState:
          type: string
          default: UNPLUGGED
          enum:
            - UNPLUGGED
            - PLUGGED_ON_STATION
            - PLUGGED_ON_STATION_AND_PLUGGED_ON_VEHICLE
        pluggedIn:
          type: integer
          format: int64
          minimum: 0
        tokenID:
          type: string
          description: Used authentication token at the charging station.
    RawHeaterMeasurement:
      title: A measurement produced by a heater appliance.
      type: object
      properties:
        measuredAt:
          type: string
          format: date-time
          description: Time when the data was measured in UTC using RFC3339 format.
        power:
          type: number
          format: double
          description: Power in mW.
        powerL1:
          type: integer
          format: int64
          minimum: 0
          description: Power for the first phase in mW.
        powerL2:
          type: integer
          format: int64
          minimum: 0
        powerL3:
          type: integer
          format: int64
          minimum: 0
        temperature:
          type: number
          format: double
          description: Temperature in degrees Celsius.
        minTemperature:
          type: number
          format: double
        maxTemperature:
          type: number
          format: double
    RawHeatpumpMeasurement:
      title: A measurement produced by a heatpump appliance.
      type: object
      properties:
        measuredAt:
          type: string
          format: date-time
          description: Time when the data was measured in UTC using RFC3339 format.
        power:
          type: integer
          format: int64
          description: Power of the heatpump in mW.
        powerL1:
          type: integer
          format: int64
          description: Power for the first phase in mW .
        powerL2:
          type: integer
          format: int64
        powerL3:
          type: integer
          format: int64
        minPower:
          type: integer
          format: int64
        maxPower:
          type: integer
          format: int64
        readyState:
          type: string
          default: UNKNOWN
          enum:
            - UNKNOWN
            - 'OFF'
            - AUTO
            - RECOMMEND_ON
            - 'ON'
        averageTemperature:
          type: number
          format: double
        controlledTemperature:
          type: number
          format: double
        baseLineTemperature:
          type: number
          format: double
        heatSourceTemperature:
          type: number
          format: double
        outdoorTemperature:
          type: number
          format: double
        operationStatus:
          type: string
          default: UNKNOWN
          enum:
            - UNKNOWN
            - HEATING
            - DRINKING_HOT_WATER
            - POOL_HEATING
            - EVU_LOCK
            - DEFROST
            - 'OFF'
            - EXTERNAL_SOURCE
            - COOLING
        energyHeating:
          type: number
          format: double
        energyDrinkingHotWater:
          type: number
          format: double
    PolicyDocumentUpdate:
      title: Policy Document Update
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractPolicyDocument'
        - properties:
            statements:
              type: array
              items:
                $ref: '#/components/schemas/AbstractPolicyStatement'
    PolicyDocumentUpdateStrict:
      allOf:
        - $ref: '#/components/schemas/PolicyDocumentUpdate'
        - additionalProperties: false
    PolicyGroupStrict:
      allOf:
        - $ref: '#/components/schemas/PolicyGroup'
        - additionalProperties: false
    ProductFunctionalityCreation:
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractProductFunctionality'
        - required:
            - name
            - hide
    ProductFunctionalityCreationStrict:
      allOf:
        - $ref: '#/components/schemas/ProductFunctionalityCreation'
        - additionalProperties: false
    ProductFunctionalityAssignment:
      type: object
      required:
        - id
      properties:
        id:
          description: Unique identifier of the product functionality.
          type: string
          format: uuid
          example: 4e3392ce-ed94-4946-8a11-665e0443723e
    ProductOptionCreation:
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractProductOption'
        - properties:
            isDefault:
              type: boolean
              description: >-
                Indicates whether the product option should be assigned by
                default to all systems of the owning account.
            hideFunctionalities:
              description: >-
                The default functionalities that a product option restricts
                access to. Must be of type `hide=true`.
              type: array
              items:
                $ref: '#/components/schemas/ProductFunctionalityAssignment'
            showFunctionalities:
              description: >-
                The extra functionalities that a product option grants access
                to. Must be of type `hide=false`.
              type: array
              items:
                $ref: '#/components/schemas/ProductFunctionalityAssignment'
          required:
            - name
            - isDefault
    ProductOptionCreationStrict:
      allOf:
        - $ref: '#/components/schemas/ProductOptionCreation'
        - additionalProperties: false
    ProductOptionUpdate:
      type: object
      allOf:
        - $ref: '#/components/schemas/AbstractProductOption'
        - properties:
            hideFunctionalities:
              description: >-
                The default functionalities that a product option restricts
                access to. Must be of type `hide=true`.
              type: array
              items:
                $ref: '#/components/schemas/ProductFunctionalityAssignment'
            showFunctionalities:
              description: >-
                The extra functionalities that a product option grants access
                to. Must be of type `hide=false`.
              type: array
              items:
                $ref: '#/components/schemas/ProductFunctionalityAssignment'
    ProductOptionUpdateStrict:
      allOf:
        - $ref: '#/components/schemas/ProductOptionUpdate'
        - additionalProperties: false
    PowerSequenceUpdate:
      type: object
      properties:
        earliestStartTime:
          type: string
          example: '2021-06-24T06:20:00'
    PowerSequenceUpdateStrict:
      allOf:
        - $ref: '#/components/schemas/PowerSequenceUpdate'
        - additionalProperties: false
    devices:
      type: object
      additionalProperties:
        type: array
        items:
          $ref: '#/components/schemas/device'
      example:
        homeconnect:
          - id: 27jslrNMHpUx266
            url: homeconnect-device-url
            parentURL: string
            deviceAddress: d:_n:NaTeYtMjnNGtQqQvbuJT4AoSY-LBq_;:7Jbs,L"Qz.hQg
            type: washer
            label: My New Dishwasher
            bindings:
              - bindingId: jaxbv2
                type: powerSequence
                url: https://api.eebus.org/devices/1041A421/bindings/jaxbv2
                name: bindingName
                validity: '2021-07-24T23:59:59Z'
            usecases:
              - name: fswg
                actor: server
            resources:
              - url: https://api.eebus.org/devices/1041A421/powerSequences
                type: powerSequence
                specialization: flexibleStart
                supportsBinding: true
                data:
                  - sequenceId: 1
                    state: scheduled
                    activeSlotNumber: 0
                    sequenceRemoteControllable: true
                    startTime: '2021-06-24T12:00:00Z'
                    endTime: '2021-06-24T13:40:00Z'
                    earliestStartTime: '2021-06-24T06:20:00Z'
                    latestEndTime: '2021-06-24T19:00:00Z'
                    isPausable: false
                    isStoppable: false
                    valueSource: empiricalValue
                    taskIdentifier: 0
                    powerTimeSlots:
                      - slotId: 1
                        defaultDuration: '00:23:00'
                        powerMin: 100
                        powerExpectedValue: 200
                        powerMax: 1000
    device:
      type: object
      properties:
        id:
          description: >-
            ID for device, must be url encoded. E.g. deviceId as specified by
            manufacturer.
          type: string
          example: 27jslrNMHpUx266
        url:
          description: URL of the device.
          type: string
        parentURL:
          description: URL of parent device.
          type: string
        deviceAddress:
          description: SPINE DeviceAddress.
          type: string
          pattern: d:_(i:[1-9][0-9]*|n:[a-zA-Z0-9-]+)_[^\p{Cc}\p{Cf}\p{Z}]+
          example: d:_n:NaTeYtMjnNGtQqQvbuJT4AoSY-LBq_;:7Jbs,L"Qz.hQg
        type:
          description: Type of the device.
          type: string
          example: washer
        label:
          description: User-defined label via an external app e.g Home Connect.
          type: string
          example: My new dishwasher
        bindings:
          $ref: '#/components/schemas/bindings'
        usecases:
          $ref: '#/components/schemas/usecases'
        resources:
          $ref: '#/components/schemas/resources'
      required:
        - id
        - url
        - type
        - bindings
        - usecases
        - resources
    usecases:
      description: List of supported use-cases for this device.
      type: array
      items:
        $ref: '#/components/schemas/usecase'
    usecase:
      type: object
      properties:
        name:
          description: Semantic short name of the use-case.
          type: string
          enum:
            - fswg
          readOnly: true
          example: fswg
        actor:
          description: The actor's role in the current scenario.
          type: string
          enum:
            - server
            - client
          readOnly: true
          example: server
      required:
        - name
        - actor
    resources:
      description: List of resources available on this device.
      type: array
      items:
        $ref: '#/components/schemas/resource'
    resource:
      description: >-
        A specific resource describes a capability (e.g. flexible start of white
        goods).
      type: object
      properties:
        url:
          description: URL of the resource.
          type: string
          example: https://api.eebus.org/devices/1041A421/powerSequences
        type:
          description: Type of the resource.
          type: string
          example: powerSequence
        specialization:
          description: Specialization of the resource.
          type: string
          example: flexibleStart
        supportsBinding:
          description: Explicit definition whether the resource supports exclusive binding.
          type: boolean
          example: true
        data:
          type: array
          items:
            oneOf:
              - $ref: '#/components/schemas/powerSequence'
      required:
        - url
        - type
        - supportsBinding
        - data
    bindings:
      description: List of bindings.
      type: array
      items:
        $ref: '#/components/schemas/binding'
    binding:
      type: object
      properties:
        bindingId:
          description: >-
            ID of binding entry, must be unique in path. The bindingId is
            provided by the server and must not specified on client side.
          type: string
          readOnly: true
          example: jaxbv2
        type:
          description: The resource type for which the binding is created.
          type: string
          enum:
            - powerSequence
          example: powerSequence
        url:
          description: >-
            Convenience pointer to endpoint for this binding. The validity is
            provided by the server and must not be specified on client side.
          type: string
          readOnly: true
          example: https://api.eebus.org/devices/1041A421/bindings/jaxbv2
        name:
          description: User-friendly name of binding partner.
          type: string
          example: bindingName
        validity:
          description: >-
            A Binding is valid for 24 hours and will be released if not renewed
            in time. The validity is provided by the server and must not be
            specified on client side.
          type: string
          format: date-time
          readOnly: true
          example: '2021-07-24T23:59:59Z'
      required:
        - type
        - name
    powerSequence:
      type: object
      properties:
        sequenceId:
          description: Identifier of power sequence, must be unique in path.
          type: integer
          readOnly: true
          example: 1
        state:
          description: EEBUS FSWG-025. See section 3.2.1.2.2.1.1.4
          type: string
          enum:
            - inactive
            - scheduled
            - running
            - paused
            - completed
            - invalid
          readOnly: true
          example: scheduled
        activeSlotNumber:
          description: >-
            The currently active powerTimeSlot, if state is inactive, schedule,
            completed or invalid, activeSlotNumber is 0.
          type: integer
          readOnly: true
        sequenceRemoteControllable:
          type: boolean
          readOnly: true
        startTime:
          description: See EEBUS FSWG-04.
          type: string
          format: date-time
          example: '2021-06-24T12:00:00Z'
        endTime:
          description: >-
            Must be greater than "alternatives. powerSequence. schedule.
            startTime"
          type: string
          format: date-time
          example: '2021-06-24T13:40:00Z'
        earliestStartTime:
          description: See EEBUS FSWG-022.
          type: string
          format: date-time
          readOnly: false
          example: '2021-06-24T06:20:00Z'
        latestEndTime:
          description: See EEBUS FSWG-023.
          type: string
          format: date-time
          example: '2021-06-24T19:00:00Z'
        isPausable:
          description: >
            If the sequence can be paused by the CEM, this element SHALL be
            present and set to true. Otherwise it SHALL be omitted or set to
            false (default value).

            For more details, see EEBUS FSWG-026S.
          type: boolean
          readOnly: true
          default: false
        isStoppable:
          description: >
            If the sequence can be stopped by the CEM, this element SHALL be
            present and set to true. Otherwise it SHALL be omitted or set to
            false (default value).

            For more details, see EEBUS FSWG-027.
          type: boolean
          readOnly: true
          default: false
        valueSource:
          description: If not set, the source of forecasted values is undefined.
          type: string
          enum:
            - empiricalValue
            - calculatedValue
            - measuredValue
          readOnly: true
        taskIdentifier:
          description: Identifier of the task.
          type: integer
          readOnly: true
        powerTimeSlots:
          $ref: '#/components/schemas/powerTimeSlots'
      required:
        - earliestStartTime
        - latestEndTime
        - powerTimeSlots
    powerTimeSlots:
      description: List of power time slots for a power sequence. See EEBUS FSWG-060.
      type: array
      items:
        $ref: '#/components/schemas/powerTimeSlot'
    powerTimeSlot:
      type: object
      properties:
        slotId:
          description: >-
            A SUB IDENTIFIER within powerSequence. The slot IDs within one power
            sequence shall be assigned according to the chronological order of
            the slots.
          type: integer
          readOnly: true
          example: 1
        defaultDuration:
          description: See EEBUS FSWG-063.
          type: string
          format: partial-time
          readOnly: true
          example: '00:23:00'
        powerMin:
          description: See EEBUS FSWG-062.
          type: number
          format: float
          readOnly: true
          example: 100
        powerExpectedValue:
          description: See EEBUS FSWG-062.
          type: number
          readOnly: true
          example: 200
        powerMax:
          description: See EEBUS FSWG-062.
          type: number
          format: float
          readOnly: true
          example: 1000
    LoginEvent:
      description: >-
        Represents a user login event that can occur either on login success or
        failure.
      type: object
      properties:
        createdAt:
          description: Time when the event occurred in UTC.
          type: string
          format: date-time
          example: '2020-11-10T13:13:00Z'
          readOnly: true
        type:
          description: The type of the login event.
          type: string
          example: LOGIN_SUCCESS
          readOnly: true
        ip:
          description: The IP address that caused the login event.
          type: string
          format: ipv4
          example: 8.8.8.8
          readOnly: true
    StarredSystem:
      description: >
        Represents a starred system which holds an additional starredAt
        timestamp.


        A System represents the logical view of one gateway and its appliances.

        For example, a household can be represented as a system with a gateway
        such as a 

        gridBox, and its connected appliances.
      allOf:
        - $ref: '#/components/schemas/System'
        - type: object
          properties:
            starredAt:
              description: Date when the system was starred in RFC3339 format.
              type: string
              format: date-time
              example: '2020-11-10T13:13:00Z'
              readOnly: true
          required:
            - name
            - createdAt
            - updatedAt
            - starredAt
    StarredAccount:
      description: >
        Represents a starred account which holds an additional starredAt
        timestamp.
      allOf:
        - $ref: '#/components/schemas/Account'
        - type: object
          properties:
            starredAt:
              description: Time when the account was starred in UTC (RFC 3339 format).
              type: string
              format: date-time
              example: '2020-11-10T13:13:00Z'
              readOnly: true
          required:
            - starredAt
    UserAccount:
      description: >
        An account describes an organizational unit to manage access to systems
        for one or multiple users.
      allOf:
        - $ref: '#/components/schemas/AbstractAccount'
        - properties:
            id:
              type: string
              format: uuid
              example: 49a4f165-8233-426b-a1a4-e569665a25dd
              description: Uniquely identifies the account.
            parentID:
              type: string
              format: uuid
              example: 19a4f165-8233-426b-a1a4-e569665a25dd
              description: >-
                Parent of the account for a tree-like account structure. Only
                the root account does not have a parent ID.
            kind:
              $ref: '#/components/schemas/AccountKind'
            createdAt:
              type: string
              format: date-time
              description: Specifies when the account was created.
            updatedAt:
              type: string
              format: date-time
              description: Specifies when the account was updated.
          required:
            - id
            - createdAt
            - updatedAt
            - kind
    NotificationUpdate:
      allOf:
        - $ref: '#/components/schemas/AbstractNotification'
    NotificationUpdateStrict:
      allOf:
        - $ref: '#/components/schemas/NotificationUpdate'
        - additionalProperties: false
    APITokenCreationStrict:
      allOf:
        - $ref: '#/components/schemas/AbstractAPIToken'
        - additionalProperties: false
    PersonalAPITokenWithSecret:
      title: PersonalAPITokenWithSecret
      allOf:
        - $ref: '#/components/schemas/APIToken'
        - properties:
            token:
              type: string
              description: >
                This token can be used for authenticating further requests as an
                alternative to Bearer Authentication.


                Example: Set the header field `Authorization` to `Token
                gxp_SUDJmIoABC1337JiAuKBZuauC0ff331HNPR0`. 

                The permissions of this tokens are the same as the user that
                created it.


                **ATTENTION** - Please keep the token secret and treat it like a
                password! The token is only available immediately after creation
                and can not be retrieved again afterwards.
              example: gxp_SUDJmIoABC1337JiAuKBZuauC0ff331HNPR0
          required:
            - token
    APITokenUpdate:
      allOf:
        - $ref: '#/components/schemas/AbstractAPIToken'
    APITokenUpdateStrict:
      allOf:
        - $ref: '#/components/schemas/APITokenUpdate'
        - additionalProperties: false
  examples:
    powerLimitScheduleDaily:
      summary: Daily repeating
      value:
        title: Daily repeating
        from: '2024-01-01T00:00:00+02:00'
        to: '2025-01-01T00:00:00+02:00'
        timeframes:
          - from: '00:00'
            to: '18:00'
            maxPower: 100000
          - from: '18:00'
            to: '00:00'
            maxPower: 150000
        recurrence:
          frequency: DAILY
    powerLimitScheduleWeekends:
      summary: Weekends
      value:
        title: Weekends
        from: '2024-01-01T00:00:00+02:00'
        to: '2025-01-01T00:00:00+02:00'
        timeframes:
          - from: '00:00'
            to: '00:00'
            maxPower: 100000
        recurrence:
          frequency: DAILY
          byDayOfWeek:
            - SA
            - SU
    systemPatch:
      summary: Update system name
      value:
        name: gridX Headquarter
    enableDerApi:
      description: >
        This example enables cloud DER API.

        This means that the gridBox will publish both constraints and
        flexibilities, which makes the objects available through the API.
      summary: Enable DER API
      value:
        metadata:
          energy:
            ems:
              derAPISettings:
                enabledCloudAPI: true
    enableDerApiWithoutFlexibilitiesSync:
      description: >
        This example enables cloud DER API without flexibilities being
        synchronised with gridBox.

        This means that the gridBox won't publish flexibilities and only
        considers the constraints published to the cloud.
      summary: Enable DER API, do not sync flexibilities
      value:
        metadata:
          energy:
            ems:
              derAPISettings:
                enabledCloudAPI: true
                flexibilities:
                  disabled: true
    scheduledStartPowerSequence:
      summary: Start a power sequence at a scheduled time.
      value:
        startTime: '2021-06-24T12:00:00'
    runningPowerSequence:
      summary: Running power sequence
      value:
        sequenceId: 1
        state: running
        activeSlotNumber: 1
        sequenceRemoteControllable: true
        startTime: '2021-06-24T12:00:00Z'
        endTime: '2021-06-24T13:40:00Z'
        earliestStartTime: '2021-06-24T06:20:00Z'
        latestEndTime: '2021-06-24T19:00:00Z'
        isPausable: false
        isStoppable: false
        powerTimeSlots:
          - slotId: 1
            defaultDuration: '00:23:00'
            powerMin: 100
            powerExpectedValue: 200
            powerMax: 2000
          - slotId: 2
            defaultDuration: '01:17:00'
            powerMin: 90
            powerExpectedValue: 180
            powerMax: 1800
    scheduledPowerSequence:
      summary: Scheduled power sequence
      value:
        sequenceId: 1
        state: scheduled
        activeSlotNumber: 0
        sequenceRemoteControllable: true
        startTime: '2021-06-24T12:00:00Z'
        endTime: '2021-06-24T13:40:00Z'
        earliestStartTime: '2021-06-24T06:20:00Z'
        latestEndTime: '2021-06-24T19:00:00Z'
        isPausable: false
        isStoppable: false
        powerTimeSlots:
          - slotId: 1
            defaultDuration: '00:23:00'
            powerMin: 100
            powerExpectedValue: 200
            powerMax: 2000
          - slotId: 2
            defaultDuration: '01:17:00'
            powerMin: 90
            powerExpectedValue: 180
            powerMax: 1800
